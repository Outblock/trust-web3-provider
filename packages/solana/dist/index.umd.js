(function(In,Be){typeof exports=="object"&&typeof module<"u"?Be(exports):typeof define=="function"&&define.amd?define(["exports"],Be):(In=typeof globalThis<"u"?globalThis:In||self,Be(In["@trustwallet/web3-provider-solana"]={}))})(this,function(In){"use strict";var Be=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oi(r){var t=r.default;if(typeof t=="function"){var e=function(){return t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var s=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:function(){return r[n]}})}),e}var ai={exports:{}},kn=typeof Reflect=="object"?Reflect:null,Gs=kn&&typeof kn.apply=="function"?kn.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)},lr;kn&&typeof kn.ownKeys=="function"?lr=kn.ownKeys:Object.getOwnPropertySymbols?lr=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:lr=function(t){return Object.getOwnPropertyNames(t)};function lc(r){console&&console.warn&&console.warn(r)}var Vs=Number.isNaN||function(t){return t!==t};function It(){It.init.call(this)}ai.exports=It,ai.exports.once=mc,It.EventEmitter=It,It.prototype._events=void 0,It.prototype._eventsCount=0,It.prototype._maxListeners=void 0;var Zs=10;function dr(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(It,"defaultMaxListeners",{enumerable:!0,get:function(){return Zs},set:function(r){if(typeof r!="number"||r<0||Vs(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");Zs=r}}),It.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},It.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Vs(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Ys(r){return r._maxListeners===void 0?It.defaultMaxListeners:r._maxListeners}It.prototype.getMaxListeners=function(){return Ys(this)},It.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var s=t==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var c=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw c.context=o,c}var d=i[t];if(d===void 0)return!1;if(typeof d=="function")Gs(d,this,e);else for(var w=d.length,S=eo(d,w),n=0;n<w;++n)Gs(S[n],this,e);return!0};function Xs(r,t,e,n){var s,i,o;if(dr(e),i=r._events,i===void 0?(i=r._events=Object.create(null),r._eventsCount=0):(i.newListener!==void 0&&(r.emit("newListener",t,e.listener?e.listener:e),i=r._events),o=i[t]),o===void 0)o=i[t]=e,++r._eventsCount;else if(typeof o=="function"?o=i[t]=n?[e,o]:[o,e]:n?o.unshift(e):o.push(e),s=Ys(r),s>0&&o.length>s&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=r,c.type=t,c.count=o.length,lc(c)}return r}It.prototype.addListener=function(t,e){return Xs(this,t,e,!1)},It.prototype.on=It.prototype.addListener,It.prototype.prependListener=function(t,e){return Xs(this,t,e,!0)};function dc(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Js(r,t,e){var n={fired:!1,wrapFn:void 0,target:r,type:t,listener:e},s=dc.bind(n);return s.listener=e,n.wrapFn=s,s}It.prototype.once=function(t,e){return dr(e),this.on(t,Js(this,t,e)),this},It.prototype.prependOnceListener=function(t,e){return dr(e),this.prependListener(t,Js(this,t,e)),this},It.prototype.removeListener=function(t,e){var n,s,i,o,c;if(dr(e),s=this._events,s===void 0)return this;if(n=s[t],n===void 0)return this;if(n===e||n.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){c=n[o].listener,i=o;break}if(i<0)return this;i===0?n.shift():pc(n,i),n.length===1&&(s[t]=n[0]),s.removeListener!==void 0&&this.emit("removeListener",t,c||e)}return this},It.prototype.off=It.prototype.removeListener,It.prototype.removeAllListeners=function(t){var e,n,s;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var i=Object.keys(n),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=n[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(s=e.length-1;s>=0;s--)this.removeListener(t,e[s]);return this};function Qs(r,t,e){var n=r._events;if(n===void 0)return[];var s=n[t];return s===void 0?[]:typeof s=="function"?e?[s.listener||s]:[s]:e?gc(s):eo(s,s.length)}It.prototype.listeners=function(t){return Qs(this,t,!0)},It.prototype.rawListeners=function(t){return Qs(this,t,!1)},It.listenerCount=function(r,t){return typeof r.listenerCount=="function"?r.listenerCount(t):to.call(r,t)},It.prototype.listenerCount=to;function to(r){var t=this._events;if(t!==void 0){var e=t[r];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}It.prototype.eventNames=function(){return this._eventsCount>0?lr(this._events):[]};function eo(r,t){for(var e=new Array(t),n=0;n<t;++n)e[n]=r[n];return e}function pc(r,t){for(;t+1<r.length;t++)r[t]=r[t+1];r.pop()}function gc(r){for(var t=new Array(r.length),e=0;e<t.length;++e)t[e]=r[e].listener||r[e];return t}function mc(r,t){return new Promise(function(e,n){function s(o){r.removeListener(t,i),n(o)}function i(){typeof r.removeListener=="function"&&r.removeListener("error",s),e([].slice.call(arguments))}no(r,t,i,{once:!0}),t!=="error"&&yc(r,s,{once:!0})})}function yc(r,t,e){typeof r.on=="function"&&no(r,"error",t,e)}function no(r,t,e,n){if(typeof r.on=="function")n.once?r.once(t,e):r.on(t,e);else if(typeof r.addEventListener=="function")r.addEventListener(t,function s(i){n.once&&r.removeEventListener(t,s),e(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}const ro={PROMISES:"PROMISES",CALLBACK:"CALLBACK"};class wc extends ai.exports.EventEmitter{setAdapter(t){return this.adapter=t,this}async request(t){try{if(!this.adapter)throw new Error("No adapter set, maybe you forgot to register the provider?");const e=await this.adapter.request(t,this.getNetwork());return this.emit("onResponseReady",t,e),e}catch(e){throw e}}sendResponse(t,e){if(!this.adapter)throw new Error("Adapter not found");if(this.adapter.getStrategy()!==ro.CALLBACK)throw new Error("Trying to send callback request on promisified adapter");this.adapter.sendResponse(t,e)}sendError(t,e){if(!this.adapter)throw new Error("Adapter not found");if(this.adapter.getStrategy()!==ro.CALLBACK)throw new Error("Trying to send callback request on promisified adapter");this.adapter.sendError(t,e)}}var dt={},pr={};pr.byteLength=xc,pr.toByteArray=Sc,pr.fromByteArray=Ac;for(var He=[],Fe=[],bc=typeof Uint8Array<"u"?Uint8Array:Array,ci="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Mn=0,vc=ci.length;Mn<vc;++Mn)He[Mn]=ci[Mn],Fe[ci.charCodeAt(Mn)]=Mn;Fe["-".charCodeAt(0)]=62,Fe["_".charCodeAt(0)]=63;function io(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");e===-1&&(e=t);var n=e===t?0:4-e%4;return[e,n]}function xc(r){var t=io(r),e=t[0],n=t[1];return(e+n)*3/4-n}function Ec(r,t,e){return(t+e)*3/4-e}function Sc(r){var t,e=io(r),n=e[0],s=e[1],i=new bc(Ec(r,n,s)),o=0,c=s>0?n-4:n,d;for(d=0;d<c;d+=4)t=Fe[r.charCodeAt(d)]<<18|Fe[r.charCodeAt(d+1)]<<12|Fe[r.charCodeAt(d+2)]<<6|Fe[r.charCodeAt(d+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return s===2&&(t=Fe[r.charCodeAt(d)]<<2|Fe[r.charCodeAt(d+1)]>>4,i[o++]=t&255),s===1&&(t=Fe[r.charCodeAt(d)]<<10|Fe[r.charCodeAt(d+1)]<<4|Fe[r.charCodeAt(d+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function Bc(r){return He[r>>18&63]+He[r>>12&63]+He[r>>6&63]+He[r&63]}function _c(r,t,e){for(var n,s=[],i=t;i<e;i+=3)n=(r[i]<<16&16711680)+(r[i+1]<<8&65280)+(r[i+2]&255),s.push(Bc(n));return s.join("")}function Ac(r){for(var t,e=r.length,n=e%3,s=[],i=16383,o=0,c=e-n;o<c;o+=i)s.push(_c(r,o,o+i>c?c:o+i));return n===1?(t=r[e-1],s.push(He[t>>2]+He[t<<4&63]+"==")):n===2&&(t=(r[e-2]<<8)+r[e-1],s.push(He[t>>10]+He[t>>4&63]+He[t<<2&63]+"=")),s.join("")}var ui={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ui.read=function(r,t,e,n,s){var i,o,c=s*8-n-1,d=(1<<c)-1,w=d>>1,S=-7,_=e?s-1:0,N=e?-1:1,L=r[t+_];for(_+=N,i=L&(1<<-S)-1,L>>=-S,S+=c;S>0;i=i*256+r[t+_],_+=N,S-=8);for(o=i&(1<<-S)-1,i>>=-S,S+=n;S>0;o=o*256+r[t+_],_+=N,S-=8);if(i===0)i=1-w;else{if(i===d)return o?NaN:(L?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-w}return(L?-1:1)*o*Math.pow(2,i-n)},ui.write=function(r,t,e,n,s,i){var o,c,d,w=i*8-s-1,S=(1<<w)-1,_=S>>1,N=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,L=n?0:i-1,R=n?1:-1,I=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,o=S):(o=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-o))<1&&(o--,d*=2),o+_>=1?t+=N/d:t+=N*Math.pow(2,1-_),t*d>=2&&(o++,d/=2),o+_>=S?(c=0,o=S):o+_>=1?(c=(t*d-1)*Math.pow(2,s),o=o+_):(c=t*Math.pow(2,_-1)*Math.pow(2,s),o=0));s>=8;r[e+L]=c&255,L+=R,c/=256,s-=8);for(o=o<<s|c,w+=s;w>0;r[e+L]=o&255,L+=R,o/=256,w-=8);r[e+L-R]|=I*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const t=pr,e=ui,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=c,r.SlowBuffer=z,r.INSPECT_MAX_BYTES=50;const s=2147483647;r.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=i(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const p=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(p,u),p.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function o(p){if(p>s)throw new RangeError('The value "'+p+'" is invalid for option "size"');const u=new Uint8Array(p);return Object.setPrototypeOf(u,c.prototype),u}function c(p,u,h){if(typeof p=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(p)}return d(p,u,h)}c.poolSize=8192;function d(p,u,h){if(typeof p=="string")return N(p,u);if(ArrayBuffer.isView(p))return R(p);if(p==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p);if(Se(p,ArrayBuffer)||p&&Se(p.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Se(p,SharedArrayBuffer)||p&&Se(p.buffer,SharedArrayBuffer)))return I(p,u,h);if(typeof p=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const b=p.valueOf&&p.valueOf();if(b!=null&&b!==p)return c.from(b,u,h);const M=k(p);if(M)return M;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof p[Symbol.toPrimitive]=="function")return c.from(p[Symbol.toPrimitive]("string"),u,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p)}c.from=function(p,u,h){return d(p,u,h)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function w(p){if(typeof p!="number")throw new TypeError('"size" argument must be of type number');if(p<0)throw new RangeError('The value "'+p+'" is invalid for option "size"')}function S(p,u,h){return w(p),p<=0?o(p):u!==void 0?typeof h=="string"?o(p).fill(u,h):o(p).fill(u):o(p)}c.alloc=function(p,u,h){return S(p,u,h)};function _(p){return w(p),o(p<0?0:O(p)|0)}c.allocUnsafe=function(p){return _(p)},c.allocUnsafeSlow=function(p){return _(p)};function N(p,u){if((typeof u!="string"||u==="")&&(u="utf8"),!c.isEncoding(u))throw new TypeError("Unknown encoding: "+u);const h=P(p,u)|0;let b=o(h);const M=b.write(p,u);return M!==h&&(b=b.slice(0,M)),b}function L(p){const u=p.length<0?0:O(p.length)|0,h=o(u);for(let b=0;b<u;b+=1)h[b]=p[b]&255;return h}function R(p){if(Se(p,Uint8Array)){const u=new Uint8Array(p);return I(u.buffer,u.byteOffset,u.byteLength)}return L(p)}function I(p,u,h){if(u<0||p.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(p.byteLength<u+(h||0))throw new RangeError('"length" is outside of buffer bounds');let b;return u===void 0&&h===void 0?b=new Uint8Array(p):h===void 0?b=new Uint8Array(p,u):b=new Uint8Array(p,u,h),Object.setPrototypeOf(b,c.prototype),b}function k(p){if(c.isBuffer(p)){const u=O(p.length)|0,h=o(u);return h.length===0||p.copy(h,0,0,u),h}if(p.length!==void 0)return typeof p.length!="number"||Rt(p.length)?o(0):L(p);if(p.type==="Buffer"&&Array.isArray(p.data))return L(p.data)}function O(p){if(p>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return p|0}function z(p){return+p!=p&&(p=0),c.alloc(+p)}c.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==c.prototype},c.compare=function(u,h){if(Se(u,Uint8Array)&&(u=c.from(u,u.offset,u.byteLength)),Se(h,Uint8Array)&&(h=c.from(h,h.offset,h.byteLength)),!c.isBuffer(u)||!c.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===h)return 0;let b=u.length,M=h.length;for(let T=0,F=Math.min(b,M);T<F;++T)if(u[T]!==h[T]){b=u[T],M=h[T];break}return b<M?-1:M<b?1:0},c.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(u,h){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return c.alloc(0);let b;if(h===void 0)for(h=0,b=0;b<u.length;++b)h+=u[b].length;const M=c.allocUnsafe(h);let T=0;for(b=0;b<u.length;++b){let F=u[b];if(Se(F,Uint8Array))T+F.length>M.length?(c.isBuffer(F)||(F=c.from(F)),F.copy(M,T)):Uint8Array.prototype.set.call(M,F,T);else if(c.isBuffer(F))F.copy(M,T);else throw new TypeError('"list" argument must be an Array of Buffers');T+=F.length}return M};function P(p,u){if(c.isBuffer(p))return p.length;if(ArrayBuffer.isView(p)||Se(p,ArrayBuffer))return p.byteLength;if(typeof p!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof p);const h=p.length,b=arguments.length>2&&arguments[2]===!0;if(!b&&h===0)return 0;let M=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return kt(p).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return Ut(p).length;default:if(M)return b?-1:kt(p).length;u=(""+u).toLowerCase(),M=!0}}c.byteLength=P;function Y(p,u,h){let b=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,u>>>=0,h<=u))return"";for(p||(p="utf8");;)switch(p){case"hex":return v(this,u,h);case"utf8":case"utf-8":return a(this,u,h);case"ascii":return x(this,u,h);case"latin1":case"binary":return y(this,u,h);case"base64":return B(this,u,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,u,h);default:if(b)throw new TypeError("Unknown encoding: "+p);p=(p+"").toLowerCase(),b=!0}}c.prototype._isBuffer=!0;function D(p,u,h){const b=p[u];p[u]=p[h],p[h]=b}c.prototype.swap16=function(){const u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let h=0;h<u;h+=2)D(this,h,h+1);return this},c.prototype.swap32=function(){const u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let h=0;h<u;h+=4)D(this,h,h+3),D(this,h+1,h+2);return this},c.prototype.swap64=function(){const u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let h=0;h<u;h+=8)D(this,h,h+7),D(this,h+1,h+6),D(this,h+2,h+5),D(this,h+3,h+4);return this},c.prototype.toString=function(){const u=this.length;return u===0?"":arguments.length===0?a(this,0,u):Y.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(u){if(!c.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:c.compare(this,u)===0},c.prototype.inspect=function(){let u="";const h=r.INSPECT_MAX_BYTES;return u=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(u+=" ... "),"<Buffer "+u+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(u,h,b,M,T){if(Se(u,Uint8Array)&&(u=c.from(u,u.offset,u.byteLength)),!c.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(h===void 0&&(h=0),b===void 0&&(b=u?u.length:0),M===void 0&&(M=0),T===void 0&&(T=this.length),h<0||b>u.length||M<0||T>this.length)throw new RangeError("out of range index");if(M>=T&&h>=b)return 0;if(M>=T)return-1;if(h>=b)return 1;if(h>>>=0,b>>>=0,M>>>=0,T>>>=0,this===u)return 0;let F=T-M,pt=b-h;const lt=Math.min(F,pt),ft=this.slice(M,T),Ft=u.slice(h,b);for(let ut=0;ut<lt;++ut)if(ft[ut]!==Ft[ut]){F=ft[ut],pt=Ft[ut];break}return F<pt?-1:pt<F?1:0};function $(p,u,h,b,M){if(p.length===0)return-1;if(typeof h=="string"?(b=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,Rt(h)&&(h=M?0:p.length-1),h<0&&(h=p.length+h),h>=p.length){if(M)return-1;h=p.length-1}else if(h<0)if(M)h=0;else return-1;if(typeof u=="string"&&(u=c.from(u,b)),c.isBuffer(u))return u.length===0?-1:X(p,u,h,b,M);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?M?Uint8Array.prototype.indexOf.call(p,u,h):Uint8Array.prototype.lastIndexOf.call(p,u,h):X(p,[u],h,b,M);throw new TypeError("val must be string, number or Buffer")}function X(p,u,h,b,M){let T=1,F=p.length,pt=u.length;if(b!==void 0&&(b=String(b).toLowerCase(),b==="ucs2"||b==="ucs-2"||b==="utf16le"||b==="utf-16le")){if(p.length<2||u.length<2)return-1;T=2,F/=2,pt/=2,h/=2}function lt(Ft,ut){return T===1?Ft[ut]:Ft.readUInt16BE(ut*T)}let ft;if(M){let Ft=-1;for(ft=h;ft<F;ft++)if(lt(p,ft)===lt(u,Ft===-1?0:ft-Ft)){if(Ft===-1&&(Ft=ft),ft-Ft+1===pt)return Ft*T}else Ft!==-1&&(ft-=ft-Ft),Ft=-1}else for(h+pt>F&&(h=F-pt),ft=h;ft>=0;ft--){let Ft=!0;for(let ut=0;ut<pt;ut++)if(lt(p,ft+ut)!==lt(u,ut)){Ft=!1;break}if(Ft)return ft}return-1}c.prototype.includes=function(u,h,b){return this.indexOf(u,h,b)!==-1},c.prototype.indexOf=function(u,h,b){return $(this,u,h,b,!0)},c.prototype.lastIndexOf=function(u,h,b){return $(this,u,h,b,!1)};function tt(p,u,h,b){h=Number(h)||0;const M=p.length-h;b?(b=Number(b),b>M&&(b=M)):b=M;const T=u.length;b>T/2&&(b=T/2);let F;for(F=0;F<b;++F){const pt=parseInt(u.substr(F*2,2),16);if(Rt(pt))return F;p[h+F]=pt}return F}function St(p,u,h,b){return Mt(kt(u,p.length-h),p,h,b)}function wt(p,u,h,b){return Mt(Dt(u),p,h,b)}function J(p,u,h,b){return Mt(Ut(u),p,h,b)}function Bt(p,u,h,b){return Mt(Yn(u,p.length-h),p,h,b)}c.prototype.write=function(u,h,b,M){if(h===void 0)M="utf8",b=this.length,h=0;else if(b===void 0&&typeof h=="string")M=h,b=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(b)?(b=b>>>0,M===void 0&&(M="utf8")):(M=b,b=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const T=this.length-h;if((b===void 0||b>T)&&(b=T),u.length>0&&(b<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");M||(M="utf8");let F=!1;for(;;)switch(M){case"hex":return tt(this,u,h,b);case"utf8":case"utf-8":return St(this,u,h,b);case"ascii":case"latin1":case"binary":return wt(this,u,h,b);case"base64":return J(this,u,h,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Bt(this,u,h,b);default:if(F)throw new TypeError("Unknown encoding: "+M);M=(""+M).toLowerCase(),F=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function B(p,u,h){return u===0&&h===p.length?t.fromByteArray(p):t.fromByteArray(p.slice(u,h))}function a(p,u,h){h=Math.min(p.length,h);const b=[];let M=u;for(;M<h;){const T=p[M];let F=null,pt=T>239?4:T>223?3:T>191?2:1;if(M+pt<=h){let lt,ft,Ft,ut;switch(pt){case 1:T<128&&(F=T);break;case 2:lt=p[M+1],(lt&192)===128&&(ut=(T&31)<<6|lt&63,ut>127&&(F=ut));break;case 3:lt=p[M+1],ft=p[M+2],(lt&192)===128&&(ft&192)===128&&(ut=(T&15)<<12|(lt&63)<<6|ft&63,ut>2047&&(ut<55296||ut>57343)&&(F=ut));break;case 4:lt=p[M+1],ft=p[M+2],Ft=p[M+3],(lt&192)===128&&(ft&192)===128&&(Ft&192)===128&&(ut=(T&15)<<18|(lt&63)<<12|(ft&63)<<6|Ft&63,ut>65535&&ut<1114112&&(F=ut))}}F===null?(F=65533,pt=1):F>65535&&(F-=65536,b.push(F>>>10&1023|55296),F=56320|F&1023),b.push(F),M+=pt}return g(b)}const l=4096;function g(p){const u=p.length;if(u<=l)return String.fromCharCode.apply(String,p);let h="",b=0;for(;b<u;)h+=String.fromCharCode.apply(String,p.slice(b,b+=l));return h}function x(p,u,h){let b="";h=Math.min(p.length,h);for(let M=u;M<h;++M)b+=String.fromCharCode(p[M]&127);return b}function y(p,u,h){let b="";h=Math.min(p.length,h);for(let M=u;M<h;++M)b+=String.fromCharCode(p[M]);return b}function v(p,u,h){const b=p.length;(!u||u<0)&&(u=0),(!h||h<0||h>b)&&(h=b);let M="";for(let T=u;T<h;++T)M+=Tt[p[T]];return M}function A(p,u,h){const b=p.slice(u,h);let M="";for(let T=0;T<b.length-1;T+=2)M+=String.fromCharCode(b[T]+b[T+1]*256);return M}c.prototype.slice=function(u,h){const b=this.length;u=~~u,h=h===void 0?b:~~h,u<0?(u+=b,u<0&&(u=0)):u>b&&(u=b),h<0?(h+=b,h<0&&(h=0)):h>b&&(h=b),h<u&&(h=u);const M=this.subarray(u,h);return Object.setPrototypeOf(M,c.prototype),M};function m(p,u,h){if(p%1!==0||p<0)throw new RangeError("offset is not uint");if(p+u>h)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(u,h,b){u=u>>>0,h=h>>>0,b||m(u,h,this.length);let M=this[u],T=1,F=0;for(;++F<h&&(T*=256);)M+=this[u+F]*T;return M},c.prototype.readUintBE=c.prototype.readUIntBE=function(u,h,b){u=u>>>0,h=h>>>0,b||m(u,h,this.length);let M=this[u+--h],T=1;for(;h>0&&(T*=256);)M+=this[u+--h]*T;return M},c.prototype.readUint8=c.prototype.readUInt8=function(u,h){return u=u>>>0,h||m(u,1,this.length),this[u]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(u,h){return u=u>>>0,h||m(u,2,this.length),this[u]|this[u+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(u,h){return u=u>>>0,h||m(u,2,this.length),this[u]<<8|this[u+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(u,h){return u=u>>>0,h||m(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(u,h){return u=u>>>0,h||m(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},c.prototype.readBigUInt64LE=Me(function(u){u=u>>>0,Lt(u,"offset");const h=this[u],b=this[u+7];(h===void 0||b===void 0)&&vt(u,this.length-8);const M=h+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,T=this[++u]+this[++u]*2**8+this[++u]*2**16+b*2**24;return BigInt(M)+(BigInt(T)<<BigInt(32))}),c.prototype.readBigUInt64BE=Me(function(u){u=u>>>0,Lt(u,"offset");const h=this[u],b=this[u+7];(h===void 0||b===void 0)&&vt(u,this.length-8);const M=h*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],T=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+b;return(BigInt(M)<<BigInt(32))+BigInt(T)}),c.prototype.readIntLE=function(u,h,b){u=u>>>0,h=h>>>0,b||m(u,h,this.length);let M=this[u],T=1,F=0;for(;++F<h&&(T*=256);)M+=this[u+F]*T;return T*=128,M>=T&&(M-=Math.pow(2,8*h)),M},c.prototype.readIntBE=function(u,h,b){u=u>>>0,h=h>>>0,b||m(u,h,this.length);let M=h,T=1,F=this[u+--M];for(;M>0&&(T*=256);)F+=this[u+--M]*T;return T*=128,F>=T&&(F-=Math.pow(2,8*h)),F},c.prototype.readInt8=function(u,h){return u=u>>>0,h||m(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},c.prototype.readInt16LE=function(u,h){u=u>>>0,h||m(u,2,this.length);const b=this[u]|this[u+1]<<8;return b&32768?b|4294901760:b},c.prototype.readInt16BE=function(u,h){u=u>>>0,h||m(u,2,this.length);const b=this[u+1]|this[u]<<8;return b&32768?b|4294901760:b},c.prototype.readInt32LE=function(u,h){return u=u>>>0,h||m(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},c.prototype.readInt32BE=function(u,h){return u=u>>>0,h||m(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},c.prototype.readBigInt64LE=Me(function(u){u=u>>>0,Lt(u,"offset");const h=this[u],b=this[u+7];(h===void 0||b===void 0)&&vt(u,this.length-8);const M=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(b<<24);return(BigInt(M)<<BigInt(32))+BigInt(h+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)}),c.prototype.readBigInt64BE=Me(function(u){u=u>>>0,Lt(u,"offset");const h=this[u],b=this[u+7];(h===void 0||b===void 0)&&vt(u,this.length-8);const M=(h<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(M)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+b)}),c.prototype.readFloatLE=function(u,h){return u=u>>>0,h||m(u,4,this.length),e.read(this,u,!0,23,4)},c.prototype.readFloatBE=function(u,h){return u=u>>>0,h||m(u,4,this.length),e.read(this,u,!1,23,4)},c.prototype.readDoubleLE=function(u,h){return u=u>>>0,h||m(u,8,this.length),e.read(this,u,!0,52,8)},c.prototype.readDoubleBE=function(u,h){return u=u>>>0,h||m(u,8,this.length),e.read(this,u,!1,52,8)};function f(p,u,h,b,M,T){if(!c.isBuffer(p))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>M||u<T)throw new RangeError('"value" argument is out of bounds');if(h+b>p.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(u,h,b,M){if(u=+u,h=h>>>0,b=b>>>0,!M){const pt=Math.pow(2,8*b)-1;f(this,u,h,b,pt,0)}let T=1,F=0;for(this[h]=u&255;++F<b&&(T*=256);)this[h+F]=u/T&255;return h+b},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(u,h,b,M){if(u=+u,h=h>>>0,b=b>>>0,!M){const pt=Math.pow(2,8*b)-1;f(this,u,h,b,pt,0)}let T=b-1,F=1;for(this[h+T]=u&255;--T>=0&&(F*=256);)this[h+T]=u/F&255;return h+b},c.prototype.writeUint8=c.prototype.writeUInt8=function(u,h,b){return u=+u,h=h>>>0,b||f(this,u,h,1,255,0),this[h]=u&255,h+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(u,h,b){return u=+u,h=h>>>0,b||f(this,u,h,2,65535,0),this[h]=u&255,this[h+1]=u>>>8,h+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(u,h,b){return u=+u,h=h>>>0,b||f(this,u,h,2,65535,0),this[h]=u>>>8,this[h+1]=u&255,h+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(u,h,b){return u=+u,h=h>>>0,b||f(this,u,h,4,4294967295,0),this[h+3]=u>>>24,this[h+2]=u>>>16,this[h+1]=u>>>8,this[h]=u&255,h+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(u,h,b){return u=+u,h=h>>>0,b||f(this,u,h,4,4294967295,0),this[h]=u>>>24,this[h+1]=u>>>16,this[h+2]=u>>>8,this[h+3]=u&255,h+4};function E(p,u,h,b,M){ht(u,b,M,p,h,7);let T=Number(u&BigInt(4294967295));p[h++]=T,T=T>>8,p[h++]=T,T=T>>8,p[h++]=T,T=T>>8,p[h++]=T;let F=Number(u>>BigInt(32)&BigInt(4294967295));return p[h++]=F,F=F>>8,p[h++]=F,F=F>>8,p[h++]=F,F=F>>8,p[h++]=F,h}function H(p,u,h,b,M){ht(u,b,M,p,h,7);let T=Number(u&BigInt(4294967295));p[h+7]=T,T=T>>8,p[h+6]=T,T=T>>8,p[h+5]=T,T=T>>8,p[h+4]=T;let F=Number(u>>BigInt(32)&BigInt(4294967295));return p[h+3]=F,F=F>>8,p[h+2]=F,F=F>>8,p[h+1]=F,F=F>>8,p[h]=F,h+8}c.prototype.writeBigUInt64LE=Me(function(u,h=0){return E(this,u,h,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Me(function(u,h=0){return H(this,u,h,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(u,h,b,M){if(u=+u,h=h>>>0,!M){const lt=Math.pow(2,8*b-1);f(this,u,h,b,lt-1,-lt)}let T=0,F=1,pt=0;for(this[h]=u&255;++T<b&&(F*=256);)u<0&&pt===0&&this[h+T-1]!==0&&(pt=1),this[h+T]=(u/F>>0)-pt&255;return h+b},c.prototype.writeIntBE=function(u,h,b,M){if(u=+u,h=h>>>0,!M){const lt=Math.pow(2,8*b-1);f(this,u,h,b,lt-1,-lt)}let T=b-1,F=1,pt=0;for(this[h+T]=u&255;--T>=0&&(F*=256);)u<0&&pt===0&&this[h+T+1]!==0&&(pt=1),this[h+T]=(u/F>>0)-pt&255;return h+b},c.prototype.writeInt8=function(u,h,b){return u=+u,h=h>>>0,b||f(this,u,h,1,127,-128),u<0&&(u=255+u+1),this[h]=u&255,h+1},c.prototype.writeInt16LE=function(u,h,b){return u=+u,h=h>>>0,b||f(this,u,h,2,32767,-32768),this[h]=u&255,this[h+1]=u>>>8,h+2},c.prototype.writeInt16BE=function(u,h,b){return u=+u,h=h>>>0,b||f(this,u,h,2,32767,-32768),this[h]=u>>>8,this[h+1]=u&255,h+2},c.prototype.writeInt32LE=function(u,h,b){return u=+u,h=h>>>0,b||f(this,u,h,4,2147483647,-2147483648),this[h]=u&255,this[h+1]=u>>>8,this[h+2]=u>>>16,this[h+3]=u>>>24,h+4},c.prototype.writeInt32BE=function(u,h,b){return u=+u,h=h>>>0,b||f(this,u,h,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[h]=u>>>24,this[h+1]=u>>>16,this[h+2]=u>>>8,this[h+3]=u&255,h+4},c.prototype.writeBigInt64LE=Me(function(u,h=0){return E(this,u,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Me(function(u,h=0){return H(this,u,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function W(p,u,h,b,M,T){if(h+b>p.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function j(p,u,h,b,M){return u=+u,h=h>>>0,M||W(p,u,h,4),e.write(p,u,h,b,23,4),h+4}c.prototype.writeFloatLE=function(u,h,b){return j(this,u,h,!0,b)},c.prototype.writeFloatBE=function(u,h,b){return j(this,u,h,!1,b)};function it(p,u,h,b,M){return u=+u,h=h>>>0,M||W(p,u,h,8),e.write(p,u,h,b,52,8),h+8}c.prototype.writeDoubleLE=function(u,h,b){return it(this,u,h,!0,b)},c.prototype.writeDoubleBE=function(u,h,b){return it(this,u,h,!1,b)},c.prototype.copy=function(u,h,b,M){if(!c.isBuffer(u))throw new TypeError("argument should be a Buffer");if(b||(b=0),!M&&M!==0&&(M=this.length),h>=u.length&&(h=u.length),h||(h=0),M>0&&M<b&&(M=b),M===b||u.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(b<0||b>=this.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("sourceEnd out of bounds");M>this.length&&(M=this.length),u.length-h<M-b&&(M=u.length-h+b);const T=M-b;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(h,b,M):Uint8Array.prototype.set.call(u,this.subarray(b,M),h),T},c.prototype.fill=function(u,h,b,M){if(typeof u=="string"){if(typeof h=="string"?(M=h,h=0,b=this.length):typeof b=="string"&&(M=b,b=this.length),M!==void 0&&typeof M!="string")throw new TypeError("encoding must be a string");if(typeof M=="string"&&!c.isEncoding(M))throw new TypeError("Unknown encoding: "+M);if(u.length===1){const F=u.charCodeAt(0);(M==="utf8"&&F<128||M==="latin1")&&(u=F)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(h<0||this.length<h||this.length<b)throw new RangeError("Out of range index");if(b<=h)return this;h=h>>>0,b=b===void 0?this.length:b>>>0,u||(u=0);let T;if(typeof u=="number")for(T=h;T<b;++T)this[T]=u;else{const F=c.isBuffer(u)?u:c.from(u,M),pt=F.length;if(pt===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(T=0;T<b-h;++T)this[T+h]=F[T%pt]}return this};const rt={};function st(p,u,h){rt[p]=class extends h{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${p}]`,this.stack,delete this.name}get code(){return p}set code(M){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:M,writable:!0})}toString(){return`${this.name} [${p}]: ${this.message}`}}}st("ERR_BUFFER_OUT_OF_BOUNDS",function(p){return p?`${p} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),st("ERR_INVALID_ARG_TYPE",function(p,u){return`The "${p}" argument must be of type number. Received type ${typeof u}`},TypeError),st("ERR_OUT_OF_RANGE",function(p,u,h){let b=`The value of "${p}" is out of range.`,M=h;return Number.isInteger(h)&&Math.abs(h)>2**32?M=Ht(String(h)):typeof h=="bigint"&&(M=String(h),(h>BigInt(2)**BigInt(32)||h<-(BigInt(2)**BigInt(32)))&&(M=Ht(M)),M+="n"),b+=` It must be ${u}. Received ${M}`,b},RangeError);function Ht(p){let u="",h=p.length;const b=p[0]==="-"?1:0;for(;h>=b+4;h-=3)u=`_${p.slice(h-3,h)}${u}`;return`${p.slice(0,h)}${u}`}function yt(p,u,h){Lt(u,"offset"),(p[u]===void 0||p[u+h]===void 0)&&vt(u,p.length-(h+1))}function ht(p,u,h,b,M,T){if(p>h||p<u){const F=typeof u=="bigint"?"n":"";let pt;throw T>3?u===0||u===BigInt(0)?pt=`>= 0${F} and < 2${F} ** ${(T+1)*8}${F}`:pt=`>= -(2${F} ** ${(T+1)*8-1}${F}) and < 2 ** ${(T+1)*8-1}${F}`:pt=`>= ${u}${F} and <= ${h}${F}`,new rt.ERR_OUT_OF_RANGE("value",pt,p)}yt(b,M,T)}function Lt(p,u){if(typeof p!="number")throw new rt.ERR_INVALID_ARG_TYPE(u,"number",p)}function vt(p,u,h){throw Math.floor(p)!==p?(Lt(p,h),new rt.ERR_OUT_OF_RANGE(h||"offset","an integer",p)):u<0?new rt.ERR_BUFFER_OUT_OF_BOUNDS:new rt.ERR_OUT_OF_RANGE(h||"offset",`>= ${h?1:0} and <= ${u}`,p)}const _t=/[^+/0-9A-Za-z-_]/g;function Ze(p){if(p=p.split("=")[0],p=p.trim().replace(_t,""),p.length<2)return"";for(;p.length%4!==0;)p=p+"=";return p}function kt(p,u){u=u||1/0;let h;const b=p.length;let M=null;const T=[];for(let F=0;F<b;++F){if(h=p.charCodeAt(F),h>55295&&h<57344){if(!M){if(h>56319){(u-=3)>-1&&T.push(239,191,189);continue}else if(F+1===b){(u-=3)>-1&&T.push(239,191,189);continue}M=h;continue}if(h<56320){(u-=3)>-1&&T.push(239,191,189),M=h;continue}h=(M-55296<<10|h-56320)+65536}else M&&(u-=3)>-1&&T.push(239,191,189);if(M=null,h<128){if((u-=1)<0)break;T.push(h)}else if(h<2048){if((u-=2)<0)break;T.push(h>>6|192,h&63|128)}else if(h<65536){if((u-=3)<0)break;T.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((u-=4)<0)break;T.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return T}function Dt(p){const u=[];for(let h=0;h<p.length;++h)u.push(p.charCodeAt(h)&255);return u}function Yn(p,u){let h,b,M;const T=[];for(let F=0;F<p.length&&!((u-=2)<0);++F)h=p.charCodeAt(F),b=h>>8,M=h%256,T.push(M),T.push(b);return T}function Ut(p){return t.toByteArray(Ze(p))}function Mt(p,u,h,b){let M;for(M=0;M<b&&!(M+h>=u.length||M>=p.length);++M)u[M+h]=p[M];return M}function Se(p,u){return p instanceof u||p!=null&&p.constructor!=null&&p.constructor.name!=null&&p.constructor.name===u.name}function Rt(p){return p!==p}const Tt=function(){const p="0123456789abcdef",u=new Array(256);for(let h=0;h<16;++h){const b=h*16;for(let M=0;M<16;++M)u[b+M]=p[h]+p[M]}return u}();function Me(p){return typeof BigInt>"u"?Nt:p}function Nt(){throw new Error("BigInt not supported")}})(dt);function so(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`positive integer expected, not ${r}`)}function Ic(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function gr(r,...t){if(!Ic(r))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(r.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${r.length}`)}function kc(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");so(r.outputLen),so(r.blockLen)}function mr(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function Mc(r,t){gr(r);const e=t.outputLen;if(r.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const fi=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hi=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),Ke=(r,t)=>r<<32-t|r>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function oo(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function li(r){return typeof r=="string"&&(r=oo(r)),gr(r),r}function ao(...r){let t=0;for(let n=0;n<r.length;n++){const s=r[n];gr(s),t+=s.length}const e=new Uint8Array(t);for(let n=0,s=0;n<r.length;n++){const i=r[n];e.set(i,s),s+=i.length}return e}class co{clone(){return this._cloneInto()}}function uo(r){const t=n=>r().update(li(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function fo(r=32){if(fi&&typeof fi.getRandomValues=="function")return fi.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}function Rc(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),c=Number(e&i),d=n?4:0,w=n?0:4;r.setUint32(t+d,o,n),r.setUint32(t+w,c,n)}const Lc=(r,t,e)=>r&t^~r&e,Tc=(r,t,e)=>r&t^r&e^t&e;class ho extends co{constructor(t,e,n,s){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=hi(this.buffer)}update(t){mr(this);const{view:e,buffer:n,blockLen:s}=this;t=li(t);const i=t.length;for(let o=0;o<i;){const c=Math.min(s-this.pos,i-o);if(c===s){const d=hi(t);for(;s<=i-o;o+=s)this.process(d,o);continue}n.set(t.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){mr(this),Mc(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let _=o;_<s;_++)e[_]=0;Rc(n,s-8,BigInt(this.length*8),i),this.process(n,0);const c=hi(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const w=d/4,S=this.get();if(w>S.length)throw new Error("_sha2: outputLen bigger than state");for(let _=0;_<w;_++)c.setUint32(4*_,S[_],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:s,finished:i,destroyed:o,pos:c}=this;return t.length=s,t.pos=c,t.finished=i,t.destroyed=o,s%e&&t.buffer.set(n),t}}const yr=BigInt(2**32-1),di=BigInt(32);function lo(r,t=!1){return t?{h:Number(r&yr),l:Number(r>>di&yr)}:{h:Number(r>>di&yr)|0,l:Number(r&yr)|0}}function Cc(r,t=!1){let e=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let s=0;s<r.length;s++){const{h:i,l:o}=lo(r[s],t);[e[s],n[s]]=[i,o]}return[e,n]}const Uc=(r,t)=>BigInt(r>>>0)<<di|BigInt(t>>>0),Nc=(r,t,e)=>r>>>e,Fc=(r,t,e)=>r<<32-e|t>>>e,Oc=(r,t,e)=>r>>>e|t<<32-e,Pc=(r,t,e)=>r<<32-e|t>>>e,qc=(r,t,e)=>r<<64-e|t>>>e-32,Dc=(r,t,e)=>r>>>e-32|t<<64-e,zc=(r,t)=>t,$c=(r,t)=>r,Hc=(r,t,e)=>r<<e|t>>>32-e,Kc=(r,t,e)=>t<<e|r>>>32-e,Wc=(r,t,e)=>t<<e-32|r>>>64-e,jc=(r,t,e)=>r<<e-32|t>>>64-e;function Gc(r,t,e,n){const s=(t>>>0)+(n>>>0);return{h:r+e+(s/2**32|0)|0,l:s|0}}const gt={fromBig:lo,split:Cc,toBig:Uc,shrSH:Nc,shrSL:Fc,rotrSH:Oc,rotrSL:Pc,rotrBH:qc,rotrBL:Dc,rotr32H:zc,rotr32L:$c,rotlSH:Hc,rotlSL:Kc,rotlBH:Wc,rotlBL:jc,add:Gc,add3L:(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),add3H:(r,t,e,n)=>t+e+n+(r/2**32|0)|0,add4L:(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),add4H:(r,t,e,n,s)=>t+e+n+s+(r/2**32|0)|0,add5H:(r,t,e,n,s,i)=>t+e+n+s+i+(r/2**32|0)|0,add5L:(r,t,e,n,s)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0)},[Vc,Zc]=(()=>gt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))))(),nn=new Uint32Array(80),rn=new Uint32Array(80);class Yc extends ho{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:s,Ch:i,Cl:o,Dh:c,Dl:d,Eh:w,El:S,Fh:_,Fl:N,Gh:L,Gl:R,Hh:I,Hl:k}=this;return[t,e,n,s,i,o,c,d,w,S,_,N,L,R,I,k]}set(t,e,n,s,i,o,c,d,w,S,_,N,L,R,I,k){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=c|0,this.Dl=d|0,this.Eh=w|0,this.El=S|0,this.Fh=_|0,this.Fl=N|0,this.Gh=L|0,this.Gl=R|0,this.Hh=I|0,this.Hl=k|0}process(t,e){for(let P=0;P<16;P++,e+=4)nn[P]=t.getUint32(e),rn[P]=t.getUint32(e+=4);for(let P=16;P<80;P++){const Y=nn[P-15]|0,D=rn[P-15]|0,$=gt.rotrSH(Y,D,1)^gt.rotrSH(Y,D,8)^gt.shrSH(Y,D,7),X=gt.rotrSL(Y,D,1)^gt.rotrSL(Y,D,8)^gt.shrSL(Y,D,7),tt=nn[P-2]|0,St=rn[P-2]|0,wt=gt.rotrSH(tt,St,19)^gt.rotrBH(tt,St,61)^gt.shrSH(tt,St,6),J=gt.rotrSL(tt,St,19)^gt.rotrBL(tt,St,61)^gt.shrSL(tt,St,6),Bt=gt.add4L(X,J,rn[P-7],rn[P-16]),B=gt.add4H(Bt,$,wt,nn[P-7],nn[P-16]);nn[P]=B|0,rn[P]=Bt|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:c,Cl:d,Dh:w,Dl:S,Eh:_,El:N,Fh:L,Fl:R,Gh:I,Gl:k,Hh:O,Hl:z}=this;for(let P=0;P<80;P++){const Y=gt.rotrSH(_,N,14)^gt.rotrSH(_,N,18)^gt.rotrBH(_,N,41),D=gt.rotrSL(_,N,14)^gt.rotrSL(_,N,18)^gt.rotrBL(_,N,41),$=_&L^~_&I,X=N&R^~N&k,tt=gt.add5L(z,D,X,Zc[P],rn[P]),St=gt.add5H(tt,O,Y,$,Vc[P],nn[P]),wt=tt|0,J=gt.rotrSH(n,s,28)^gt.rotrBH(n,s,34)^gt.rotrBH(n,s,39),Bt=gt.rotrSL(n,s,28)^gt.rotrBL(n,s,34)^gt.rotrBL(n,s,39),B=n&i^n&c^i&c,a=s&o^s&d^o&d;O=I|0,z=k|0,I=L|0,k=R|0,L=_|0,R=N|0,{h:_,l:N}=gt.add(w|0,S|0,St|0,wt|0),w=c|0,S=d|0,c=i|0,d=o|0,i=n|0,o=s|0;const l=gt.add3L(wt,Bt,a);n=gt.add3H(l,St,J,B),s=l|0}({h:n,l:s}=gt.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=gt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:c,l:d}=gt.add(this.Ch|0,this.Cl|0,c|0,d|0),{h:w,l:S}=gt.add(this.Dh|0,this.Dl|0,w|0,S|0),{h:_,l:N}=gt.add(this.Eh|0,this.El|0,_|0,N|0),{h:L,l:R}=gt.add(this.Fh|0,this.Fl|0,L|0,R|0),{h:I,l:k}=gt.add(this.Gh|0,this.Gl|0,I|0,k|0),{h:O,l:z}=gt.add(this.Hh|0,this.Hl|0,O|0,z|0),this.set(n,s,i,o,c,d,w,S,_,N,L,R,I,k,O,z)}roundClean(){nn.fill(0),rn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const po=uo(()=>new Yc);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const go=BigInt(0),wr=BigInt(1),Xc=BigInt(2);function dn(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function Xn(r){if(!dn(r))throw new Error("Uint8Array expected")}const Jc=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function pn(r){Xn(r);let t="";for(let e=0;e<r.length;e++)t+=Jc[r[e]];return t}function mo(r){const t=r.toString(16);return t.length&1?`0${t}`:t}function pi(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}const Ye={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function yo(r){if(r>=Ye._0&&r<=Ye._9)return r-Ye._0;if(r>=Ye._A&&r<=Ye._F)return r-(Ye._A-10);if(r>=Ye._a&&r<=Ye._f)return r-(Ye._a-10)}function Rn(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const t=r.length,e=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const o=yo(r.charCodeAt(i)),c=yo(r.charCodeAt(i+1));if(o===void 0||c===void 0){const d=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+i)}n[s]=o*16+c}return n}function gn(r){return pi(pn(r))}function Ln(r){return Xn(r),pi(pn(Uint8Array.from(r).reverse()))}function Tn(r,t){return Rn(r.toString(16).padStart(t*2,"0"))}function Jn(r,t){return Tn(r,t).reverse()}function Qc(r){return Rn(mo(r))}function he(r,t,e){let n;if(typeof t=="string")try{n=Rn(t)}catch(i){throw new Error(`${r} must be valid hex string, got "${t}". Cause: ${i}`)}else if(dn(t))n=Uint8Array.from(t);else throw new Error(`${r} must be hex string or Uint8Array`);const s=n.length;if(typeof e=="number"&&s!==e)throw new Error(`${r} expected ${e} bytes, got ${s}`);return n}function mn(...r){let t=0;for(let n=0;n<r.length;n++){const s=r[n];Xn(s),t+=s.length}const e=new Uint8Array(t);for(let n=0,s=0;n<r.length;n++){const i=r[n];e.set(i,s),s+=i.length}return e}function tu(r,t){if(r.length!==t.length)return!1;let e=0;for(let n=0;n<r.length;n++)e|=r[n]^t[n];return e===0}function eu(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function nu(r){let t;for(t=0;r>go;r>>=wr,t+=1);return t}function ru(r,t){return r>>BigInt(t)&wr}function iu(r,t,e){return r|(e?wr:go)<<BigInt(t)}const gi=r=>(Xc<<BigInt(r-1))-wr,mi=r=>new Uint8Array(r),wo=r=>Uint8Array.from(r);function bo(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let n=mi(r),s=mi(r),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},c=(..._)=>e(s,n,..._),d=(_=mi())=>{s=c(wo([0]),_),n=c(),_.length!==0&&(s=c(wo([1]),_),n=c())},w=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let _=0;const N=[];for(;_<t;){n=c();const L=n.slice();N.push(L),_+=n.length}return mn(...N)};return(_,N)=>{o(),d(_);let L;for(;!(L=N(w()));)d();return o(),L}}const su={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||dn(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,t)=>t.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Cn(r,t,e={}){const n=(s,i,o)=>{const c=su[i];if(typeof c!="function")throw new Error(`Invalid validator "${i}", expected function`);const d=r[s];if(!(o&&d===void 0)&&!c(d,r))throw new Error(`Invalid param ${String(s)}=${d} (${typeof d}), expected ${i}`)};for(const[s,i]of Object.entries(t))n(s,i,!1);for(const[s,i]of Object.entries(e))n(s,i,!0);return r}var ou=Object.freeze({__proto__:null,isBytes:dn,abytes:Xn,bytesToHex:pn,numberToHexUnpadded:mo,hexToNumber:pi,hexToBytes:Rn,bytesToNumberBE:gn,bytesToNumberLE:Ln,numberToBytesBE:Tn,numberToBytesLE:Jn,numberToVarBytesBE:Qc,ensureBytes:he,concatBytes:mn,equalBytes:tu,utf8ToBytes:eu,bitLen:nu,bitGet:ru,bitSet:iu,bitMask:gi,createHmacDrbg:bo,validateObject:Cn});/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const le=BigInt(0),zt=BigInt(1),yn=BigInt(2),au=BigInt(3),yi=BigInt(4),vo=BigInt(5),xo=BigInt(8);BigInt(9),BigInt(16);function Ot(r,t){const e=r%t;return e>=le?e:t+e}function cu(r,t,e){if(e<=le||t<le)throw new Error("Expected power/modulo > 0");if(e===zt)return le;let n=zt;for(;t>le;)t&zt&&(n=n*r%e),r=r*r%e,t>>=zt;return n}function Kt(r,t,e){let n=r;for(;t-- >le;)n*=n,n%=e;return n}function wi(r,t){if(r===le||t<=le)throw new Error(`invert: expected positive integers, got n=${r} mod=${t}`);let e=Ot(r,t),n=t,s=le,i=zt;for(;e!==le;){const c=n/e,d=n%e,w=s-i*c;n=e,e=d,s=i,i=w}if(n!==zt)throw new Error("invert: does not exist");return Ot(s,t)}function uu(r){const t=(r-zt)/yn;let e,n,s;for(e=r-zt,n=0;e%yn===le;e/=yn,n++);for(s=yn;s<r&&cu(s,t,r)!==r-zt;s++);if(n===1){const o=(r+zt)/yi;return function(d,w){const S=d.pow(w,o);if(!d.eql(d.sqr(S),w))throw new Error("Cannot find square root");return S}}const i=(e+zt)/yn;return function(c,d){if(c.pow(d,t)===c.neg(c.ONE))throw new Error("Cannot find square root");let w=n,S=c.pow(c.mul(c.ONE,s),e),_=c.pow(d,i),N=c.pow(d,e);for(;!c.eql(N,c.ONE);){if(c.eql(N,c.ZERO))return c.ZERO;let L=1;for(let I=c.sqr(N);L<w&&!c.eql(I,c.ONE);L++)I=c.sqr(I);const R=c.pow(S,zt<<BigInt(w-L-1));S=c.sqr(R),_=c.mul(_,R),N=c.mul(N,S),w=L}return _}}function fu(r){if(r%yi===au){const t=(r+zt)/yi;return function(n,s){const i=n.pow(s,t);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(r%xo===vo){const t=(r-vo)/xo;return function(n,s){const i=n.mul(s,yn),o=n.pow(i,t),c=n.mul(s,o),d=n.mul(n.mul(c,yn),o),w=n.mul(c,n.sub(d,n.ONE));if(!n.eql(n.sqr(w),s))throw new Error("Cannot find square root");return w}}return uu(r)}const hu=(r,t)=>(Ot(r,t)&zt)===zt,lu=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function du(r){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=lu.reduce((n,s)=>(n[s]="function",n),t);return Cn(r,e)}function pu(r,t,e){if(e<le)throw new Error("Expected power > 0");if(e===le)return r.ONE;if(e===zt)return t;let n=r.ONE,s=t;for(;e>le;)e&zt&&(n=r.mul(n,s)),s=r.sqr(s),e>>=zt;return n}function gu(r,t){const e=new Array(t.length),n=t.reduce((i,o,c)=>r.is0(o)?i:(e[c]=i,r.mul(i,o)),r.ONE),s=r.inv(n);return t.reduceRight((i,o,c)=>r.is0(o)?i:(e[c]=r.mul(i,e[c]),r.mul(i,o)),s),e}function Eo(r,t){const e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function So(r,t,e=!1,n={}){if(r<=le)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:s,nByteLength:i}=Eo(r,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=fu(r),c=Object.freeze({ORDER:r,BITS:s,BYTES:i,MASK:gi(s),ZERO:le,ONE:zt,create:d=>Ot(d,r),isValid:d=>{if(typeof d!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof d}`);return le<=d&&d<r},is0:d=>d===le,isOdd:d=>(d&zt)===zt,neg:d=>Ot(-d,r),eql:(d,w)=>d===w,sqr:d=>Ot(d*d,r),add:(d,w)=>Ot(d+w,r),sub:(d,w)=>Ot(d-w,r),mul:(d,w)=>Ot(d*w,r),pow:(d,w)=>pu(c,d,w),div:(d,w)=>Ot(d*wi(w,r),r),sqrN:d=>d*d,addN:(d,w)=>d+w,subN:(d,w)=>d-w,mulN:(d,w)=>d*w,inv:d=>wi(d,r),sqrt:n.sqrt||(d=>o(c,d)),invertBatch:d=>gu(c,d),cmov:(d,w,S)=>S?w:d,toBytes:d=>e?Jn(d,i):Tn(d,i),fromBytes:d=>{if(d.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${d.length}`);return e?Ln(d):gn(d)}});return Object.freeze(c)}function mu(r,t){if(!r.isOdd)throw new Error("Field doesn't have isOdd");const e=r.sqrt(t);return r.isOdd(e)?r.neg(e):e}function Bo(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const t=r.toString(2).length;return Math.ceil(t/8)}function _o(r){const t=Bo(r);return t+Math.ceil(t/2)}function yu(r,t,e=!1){const n=r.length,s=Bo(t),i=_o(t);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const o=e?gn(r):Ln(r),c=Ot(o,t-zt)+zt;return e?Jn(c,s):Tn(c,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wu=BigInt(0),bi=BigInt(1);function Ao(r,t){const e=(s,i)=>{const o=i.negate();return s?o:i},n=s=>{const i=Math.ceil(t/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:e,unsafeLadder(s,i){let o=r.ZERO,c=s;for(;i>wu;)i&bi&&(o=o.add(c)),c=c.double(),i>>=bi;return o},precomputeWindow(s,i){const{windows:o,windowSize:c}=n(i),d=[];let w=s,S=w;for(let _=0;_<o;_++){S=w,d.push(S);for(let N=1;N<c;N++)S=S.add(w),d.push(S);w=S.double()}return d},wNAF(s,i,o){const{windows:c,windowSize:d}=n(s);let w=r.ZERO,S=r.BASE;const _=BigInt(2**s-1),N=2**s,L=BigInt(s);for(let R=0;R<c;R++){const I=R*d;let k=Number(o&_);o>>=L,k>d&&(k-=N,o+=bi);const O=I,z=I+Math.abs(k)-1,P=R%2!==0,Y=k<0;k===0?S=S.add(e(P,i[O])):w=w.add(e(Y,i[z]))}return{p:w,f:S}},wNAFCached(s,i,o,c){const d=s._WINDOW_SIZE||1;let w=i.get(s);return w||(w=this.precomputeWindow(s,d),d!==1&&i.set(s,c(w))),this.wNAF(d,w,o)}}}function vi(r){return du(r.Fp),Cn(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Eo(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const De=BigInt(0),Re=BigInt(1),br=BigInt(2),bu=BigInt(8),vu={zip215:!0};function xu(r){const t=vi(r);return Cn(r,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function xi(r){const t=xu(r),{Fp:e,n,prehash:s,hash:i,randomBytes:o,nByteLength:c,h:d}=t,w=br<<BigInt(c*8)-Re,S=e.create,_=t.uvRatio||((y,v)=>{try{return{isValid:!0,value:e.sqrt(y*e.inv(v))}}catch{return{isValid:!1,value:De}}}),N=t.adjustScalarBytes||(y=>y),L=t.domain||((y,v,A)=>{if(v.length||A)throw new Error("Contexts/pre-hash are not supported");return y}),R=y=>typeof y=="bigint"&&De<y,I=(y,v)=>R(y)&&R(v)&&y<v,k=y=>y===De||I(y,w);function O(y,v){if(I(y,v))return y;throw new Error(`Expected valid scalar < ${v}, got ${typeof y} ${y}`)}function z(y){return y===De?y:O(y,n)}const P=new Map;function Y(y){if(!(y instanceof D))throw new Error("ExtendedPoint expected")}class D{constructor(v,A,m,f){if(this.ex=v,this.ey=A,this.ez=m,this.et=f,!k(v))throw new Error("x required");if(!k(A))throw new Error("y required");if(!k(m))throw new Error("z required");if(!k(f))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(v){if(v instanceof D)throw new Error("extended point not allowed");const{x:A,y:m}=v||{};if(!k(A)||!k(m))throw new Error("invalid affine point");return new D(A,m,Re,S(A*m))}static normalizeZ(v){const A=e.invertBatch(v.map(m=>m.ez));return v.map((m,f)=>m.toAffine(A[f])).map(D.fromAffine)}_setWindowSize(v){this._WINDOW_SIZE=v,P.delete(this)}assertValidity(){const{a:v,d:A}=t;if(this.is0())throw new Error("bad point: ZERO");const{ex:m,ey:f,ez:E,et:H}=this,W=S(m*m),j=S(f*f),it=S(E*E),rt=S(it*it),st=S(W*v),Ht=S(it*S(st+j)),yt=S(rt+S(A*S(W*j)));if(Ht!==yt)throw new Error("bad point: equation left != right (1)");const ht=S(m*f),Lt=S(E*H);if(ht!==Lt)throw new Error("bad point: equation left != right (2)")}equals(v){Y(v);const{ex:A,ey:m,ez:f}=this,{ex:E,ey:H,ez:W}=v,j=S(A*W),it=S(E*f),rt=S(m*W),st=S(H*f);return j===it&&rt===st}is0(){return this.equals(D.ZERO)}negate(){return new D(S(-this.ex),this.ey,this.ez,S(-this.et))}double(){const{a:v}=t,{ex:A,ey:m,ez:f}=this,E=S(A*A),H=S(m*m),W=S(br*S(f*f)),j=S(v*E),it=A+m,rt=S(S(it*it)-E-H),st=j+H,Ht=st-W,yt=j-H,ht=S(rt*Ht),Lt=S(st*yt),vt=S(rt*yt),_t=S(Ht*st);return new D(ht,Lt,_t,vt)}add(v){Y(v);const{a:A,d:m}=t,{ex:f,ey:E,ez:H,et:W}=this,{ex:j,ey:it,ez:rt,et:st}=v;if(A===BigInt(-1)){const Se=S((E-f)*(it+j)),Rt=S((E+f)*(it-j)),Tt=S(Rt-Se);if(Tt===De)return this.double();const Me=S(H*br*st),Nt=S(W*br*rt),p=Nt+Me,u=Rt+Se,h=Nt-Me,b=S(p*Tt),M=S(u*h),T=S(p*h),F=S(Tt*u);return new D(b,M,F,T)}const Ht=S(f*j),yt=S(E*it),ht=S(W*m*st),Lt=S(H*rt),vt=S((f+E)*(j+it)-Ht-yt),_t=Lt-ht,Ze=Lt+ht,kt=S(yt-A*Ht),Dt=S(vt*_t),Yn=S(Ze*kt),Ut=S(vt*kt),Mt=S(_t*Ze);return new D(Dt,Yn,Mt,Ut)}subtract(v){return this.add(v.negate())}wNAF(v){return tt.wNAFCached(this,P,v,D.normalizeZ)}multiply(v){const{p:A,f:m}=this.wNAF(O(v,n));return D.normalizeZ([A,m])[0]}multiplyUnsafe(v){let A=z(v);return A===De?X:this.equals(X)||A===Re?this:this.equals($)?this.wNAF(A).p:tt.unsafeLadder(this,A)}isSmallOrder(){return this.multiplyUnsafe(d).is0()}isTorsionFree(){return tt.unsafeLadder(this,n).is0()}toAffine(v){const{ex:A,ey:m,ez:f}=this,E=this.is0();v==null&&(v=E?bu:e.inv(f));const H=S(A*v),W=S(m*v),j=S(f*v);if(E)return{x:De,y:Re};if(j!==Re)throw new Error("invZ was invalid");return{x:H,y:W}}clearCofactor(){const{h:v}=t;return v===Re?this:this.multiplyUnsafe(v)}static fromHex(v,A=!1){const{d:m,a:f}=t,E=e.BYTES;v=he("pointHex",v,E);const H=v.slice(),W=v[E-1];H[E-1]=W&-129;const j=Ln(H);j===De||(A?O(j,w):O(j,e.ORDER));const it=S(j*j),rt=S(it-Re),st=S(m*it-f);let{isValid:Ht,value:yt}=_(rt,st);if(!Ht)throw new Error("Point.fromHex: invalid y coordinate");const ht=(yt&Re)===Re,Lt=(W&128)!==0;if(!A&&yt===De&&Lt)throw new Error("Point.fromHex: x=0 and x_0=1");return Lt!==ht&&(yt=S(-yt)),D.fromAffine({x:yt,y:j})}static fromPrivateKey(v){return J(v).point}toRawBytes(){const{x:v,y:A}=this.toAffine(),m=Jn(A,e.BYTES);return m[m.length-1]|=v&Re?128:0,m}toHex(){return pn(this.toRawBytes())}}D.BASE=new D(t.Gx,t.Gy,Re,S(t.Gx*t.Gy)),D.ZERO=new D(De,Re,Re,De);const{BASE:$,ZERO:X}=D,tt=Ao(D,c*8);function St(y){return Ot(y,n)}function wt(y){return St(Ln(y))}function J(y){const v=c;y=he("private key",y,v);const A=he("hashed private key",i(y),2*v),m=N(A.slice(0,v)),f=A.slice(v,2*v),E=wt(m),H=$.multiply(E),W=H.toRawBytes();return{head:m,prefix:f,scalar:E,point:H,pointBytes:W}}function Bt(y){return J(y).pointBytes}function B(y=new Uint8Array,...v){const A=mn(...v);return wt(i(L(A,he("context",y),!!s)))}function a(y,v,A={}){y=he("message",y),s&&(y=s(y));const{prefix:m,scalar:f,pointBytes:E}=J(v),H=B(A.context,m,y),W=$.multiply(H).toRawBytes(),j=B(A.context,W,E,y),it=St(H+j*f);z(it);const rt=mn(W,Jn(it,e.BYTES));return he("result",rt,c*2)}const l=vu;function g(y,v,A,m=l){const{context:f,zip215:E}=m,H=e.BYTES;y=he("signature",y,2*H),v=he("message",v),s&&(v=s(v));const W=Ln(y.slice(H,2*H));let j,it,rt;try{j=D.fromHex(A,E),it=D.fromHex(y.slice(0,H),E),rt=$.multiplyUnsafe(W)}catch{return!1}if(!E&&j.isSmallOrder())return!1;const st=B(f,it.toRawBytes(),j.toRawBytes(),v);return it.add(j.multiplyUnsafe(st)).subtract(rt).clearCofactor().equals(D.ZERO)}return $._setWindowSize(8),{CURVE:t,getPublicKey:Bt,sign:a,verify:g,ExtendedPoint:D,utils:{getExtendedPublicKey:J,randomPrivateKey:()=>o(e.BYTES),precompute(y=8,v=D.BASE){return v._setWindowSize(y),v.multiply(BigInt(3)),v}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0),BigInt(1);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ei=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Io=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Eu=BigInt(1),Si=BigInt(2),Su=BigInt(5),ko=BigInt(10),Bu=BigInt(20),_u=BigInt(40),Mo=BigInt(80);function Au(r){const t=Ei,n=r*r%t*r%t,s=Kt(n,Si,t)*n%t,i=Kt(s,Eu,t)*r%t,o=Kt(i,Su,t)*i%t,c=Kt(o,ko,t)*o%t,d=Kt(c,Bu,t)*c%t,w=Kt(d,_u,t)*d%t,S=Kt(w,Mo,t)*w%t,_=Kt(S,Mo,t)*w%t,N=Kt(_,ko,t)*o%t;return{pow_p_5_8:Kt(N,Si,t)*r%t,b2:n}}function Iu(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function ku(r,t){const e=Ei,n=Ot(t*t*t,e),s=Ot(n*n*t,e),i=Au(r*s).pow_p_5_8;let o=Ot(r*n*i,e);const c=Ot(t*o*o,e),d=o,w=Ot(o*Io,e),S=c===r,_=c===Ot(-r,e),N=c===Ot(-r*Io,e);return S&&(o=d),(_||N)&&(o=w),hu(o,e)&&(o=Ot(-o,e)),{isValid:S||_,value:o}}const Xe=So(Ei,void 0,!0),Bi={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Xe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:po,randomBytes:fo,adjustScalarBytes:Iu,uvRatio:ku},vr=xi(Bi);function Ro(r,t,e){if(t.length>255)throw new Error("Context is too big");return ao(oo("SigEd25519 no Ed25519 collisions"),new Uint8Array([e?1:0,t.length]),t,r)}({...Bi},{...Bi});const Mu=(Xe.ORDER+BigInt(3))/BigInt(8);Xe.pow(Si,Mu),Xe.sqrt(Xe.neg(Xe.ONE)),(Xe.ORDER-BigInt(5))/BigInt(8),BigInt(486662),mu(Xe,Xe.neg(BigInt(486664))),BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var _i={exports:{}},Ru={},Lu=Object.freeze({__proto__:null,default:Ru}),Tu=oi(Lu);(function(r){(function(t,e){function n(B,a){if(!B)throw new Error(a||"Assertion failed")}function s(B,a){B.super_=a;var l=function(){};l.prototype=a.prototype,B.prototype=new l,B.prototype.constructor=B}function i(B,a,l){if(i.isBN(B))return B;this.negative=0,this.words=null,this.length=0,this.red=null,B!==null&&((a==="le"||a==="be")&&(l=a,a=10),this._init(B||0,a||10,l||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Tu.Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,l){return a.cmp(l)>0?a:l},i.min=function(a,l){return a.cmp(l)<0?a:l},i.prototype._init=function(a,l,g){if(typeof a=="number")return this._initNumber(a,l,g);if(typeof a=="object")return this._initArray(a,l,g);l==="hex"&&(l=16),n(l===(l|0)&&l>=2&&l<=36),a=a.toString().replace(/\s+/g,"");var x=0;a[0]==="-"&&(x++,this.negative=1),x<a.length&&(l===16?this._parseHex(a,x,g):(this._parseBase(a,l,x),g==="le"&&this._initArray(this.toArray(),l,g)))},i.prototype._initNumber=function(a,l,g){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),l,g)},i.prototype._initArray=function(a,l,g){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var y,v,A=0;if(g==="be")for(x=a.length-1,y=0;x>=0;x-=3)v=a[x]|a[x-1]<<8|a[x-2]<<16,this.words[y]|=v<<A&67108863,this.words[y+1]=v>>>26-A&67108863,A+=24,A>=26&&(A-=26,y++);else if(g==="le")for(x=0,y=0;x<a.length;x+=3)v=a[x]|a[x+1]<<8|a[x+2]<<16,this.words[y]|=v<<A&67108863,this.words[y+1]=v>>>26-A&67108863,A+=24,A>=26&&(A-=26,y++);return this._strip()};function c(B,a){var l=B.charCodeAt(a);if(l>=48&&l<=57)return l-48;if(l>=65&&l<=70)return l-55;if(l>=97&&l<=102)return l-87;n(!1,"Invalid character in "+B)}function d(B,a,l){var g=c(B,l);return l-1>=a&&(g|=c(B,l-1)<<4),g}i.prototype._parseHex=function(a,l,g){this.length=Math.ceil((a.length-l)/6),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var y=0,v=0,A;if(g==="be")for(x=a.length-1;x>=l;x-=2)A=d(a,l,x)<<y,this.words[v]|=A&67108863,y>=18?(y-=18,v+=1,this.words[v]|=A>>>26):y+=8;else{var m=a.length-l;for(x=m%2===0?l+1:l;x<a.length;x+=2)A=d(a,l,x)<<y,this.words[v]|=A&67108863,y>=18?(y-=18,v+=1,this.words[v]|=A>>>26):y+=8}this._strip()};function w(B,a,l,g){for(var x=0,y=0,v=Math.min(B.length,l),A=a;A<v;A++){var m=B.charCodeAt(A)-48;x*=g,m>=49?y=m-49+10:m>=17?y=m-17+10:y=m,n(m>=0&&y<g,"Invalid character"),x+=y}return x}i.prototype._parseBase=function(a,l,g){this.words=[0],this.length=1;for(var x=0,y=1;y<=67108863;y*=l)x++;x--,y=y/l|0;for(var v=a.length-g,A=v%x,m=Math.min(v,v-A)+g,f=0,E=g;E<m;E+=x)f=w(a,E,E+x,l),this.imuln(y),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(A!==0){var H=1;for(f=w(a,E,a.length,l),E=0;E<A;E++)H*=l;this.imuln(H),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this._strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var l=0;l<this.length;l++)a.words[l]=this.words[l];a.length=this.length,a.negative=this.negative,a.red=this.red};function S(B,a){B.words=a.words,B.length=a.length,B.negative=a.negative,B.red=a.red}if(i.prototype._move=function(a){S(a,this)},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=_}catch{i.prototype.inspect=_}else i.prototype.inspect=_;function _(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var N=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],L=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],R=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,l){a=a||10,l=l|0||1;var g;if(a===16||a==="hex"){g="";for(var x=0,y=0,v=0;v<this.length;v++){var A=this.words[v],m=((A<<x|y)&16777215).toString(16);y=A>>>24-x&16777215,x+=2,x>=26&&(x-=26,v--),y!==0||v!==this.length-1?g=N[6-m.length]+m+g:g=m+g}for(y!==0&&(g=y.toString(16)+g);g.length%l!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(a===(a|0)&&a>=2&&a<=36){var f=L[a],E=R[a];g="";var H=this.clone();for(H.negative=0;!H.isZero();){var W=H.modrn(E).toString(a);H=H.idivn(E),H.isZero()?g=W+g:g=N[f-W.length]+W+g}for(this.isZero()&&(g="0"+g);g.length%l!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(a,l){return this.toArrayLike(o,a,l)}),i.prototype.toArray=function(a,l){return this.toArrayLike(Array,a,l)};var I=function(a,l){return a.allocUnsafe?a.allocUnsafe(l):new a(l)};i.prototype.toArrayLike=function(a,l,g){this._strip();var x=this.byteLength(),y=g||Math.max(1,x);n(x<=y,"byte array longer than desired length"),n(y>0,"Requested array length <= 0");var v=I(a,y),A=l==="le"?"LE":"BE";return this["_toArrayLike"+A](v,x),v},i.prototype._toArrayLikeLE=function(a,l){for(var g=0,x=0,y=0,v=0;y<this.length;y++){var A=this.words[y]<<v|x;a[g++]=A&255,g<a.length&&(a[g++]=A>>8&255),g<a.length&&(a[g++]=A>>16&255),v===6?(g<a.length&&(a[g++]=A>>24&255),x=0,v=0):(x=A>>>24,v+=2)}if(g<a.length)for(a[g++]=x;g<a.length;)a[g++]=0},i.prototype._toArrayLikeBE=function(a,l){for(var g=a.length-1,x=0,y=0,v=0;y<this.length;y++){var A=this.words[y]<<v|x;a[g--]=A&255,g>=0&&(a[g--]=A>>8&255),g>=0&&(a[g--]=A>>16&255),v===6?(g>=0&&(a[g--]=A>>24&255),x=0,v=0):(x=A>>>24,v+=2)}if(g>=0)for(a[g--]=x;g>=0;)a[g--]=0},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var l=a,g=0;return l>=4096&&(g+=13,l>>>=13),l>=64&&(g+=7,l>>>=7),l>=8&&(g+=4,l>>>=4),l>=2&&(g+=2,l>>>=2),g+l},i.prototype._zeroBits=function(a){if(a===0)return 26;var l=a,g=0;return l&8191||(g+=13,l>>>=13),l&127||(g+=7,l>>>=7),l&15||(g+=4,l>>>=4),l&3||(g+=2,l>>>=2),l&1||g++,g},i.prototype.bitLength=function(){var a=this.words[this.length-1],l=this._countBits(a);return(this.length-1)*26+l};function k(B){for(var a=new Array(B.bitLength()),l=0;l<a.length;l++){var g=l/26|0,x=l%26;a[l]=B.words[g]>>>x&1}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,l=0;l<this.length;l++){var g=this._zeroBits(this.words[l]);if(a+=g,g!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var l=0;l<a.length;l++)this.words[l]=this.words[l]|a.words[l];return this._strip()},i.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var l;this.length>a.length?l=a:l=this;for(var g=0;g<l.length;g++)this.words[g]=this.words[g]&a.words[g];return this.length=l.length,this._strip()},i.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var l,g;this.length>a.length?(l=this,g=a):(l=a,g=this);for(var x=0;x<g.length;x++)this.words[x]=l.words[x]^g.words[x];if(this!==l)for(;x<l.length;x++)this.words[x]=l.words[x];return this.length=l.length,this._strip()},i.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var l=Math.ceil(a/26)|0,g=a%26;this._expand(l),g>0&&l--;for(var x=0;x<l;x++)this.words[x]=~this.words[x]&67108863;return g>0&&(this.words[x]=~this.words[x]&67108863>>26-g),this._strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,l){n(typeof a=="number"&&a>=0);var g=a/26|0,x=a%26;return this._expand(g+1),l?this.words[g]=this.words[g]|1<<x:this.words[g]=this.words[g]&~(1<<x),this._strip()},i.prototype.iadd=function(a){var l;if(this.negative!==0&&a.negative===0)return this.negative=0,l=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,l=this.isub(a),a.negative=1,l._normSign();var g,x;this.length>a.length?(g=this,x=a):(g=a,x=this);for(var y=0,v=0;v<x.length;v++)l=(g.words[v]|0)+(x.words[v]|0)+y,this.words[v]=l&67108863,y=l>>>26;for(;y!==0&&v<g.length;v++)l=(g.words[v]|0)+y,this.words[v]=l&67108863,y=l>>>26;if(this.length=g.length,y!==0)this.words[this.length]=y,this.length++;else if(g!==this)for(;v<g.length;v++)this.words[v]=g.words[v];return this},i.prototype.add=function(a){var l;return a.negative!==0&&this.negative===0?(a.negative=0,l=this.sub(a),a.negative^=1,l):a.negative===0&&this.negative!==0?(this.negative=0,l=a.sub(this),this.negative=1,l):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var l=this.iadd(a);return a.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var g=this.cmp(a);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var x,y;g>0?(x=this,y=a):(x=a,y=this);for(var v=0,A=0;A<y.length;A++)l=(x.words[A]|0)-(y.words[A]|0)+v,v=l>>26,this.words[A]=l&67108863;for(;v!==0&&A<x.length;A++)l=(x.words[A]|0)+v,v=l>>26,this.words[A]=l&67108863;if(v===0&&A<x.length&&x!==this)for(;A<x.length;A++)this.words[A]=x.words[A];return this.length=Math.max(this.length,A),x!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function O(B,a,l){l.negative=a.negative^B.negative;var g=B.length+a.length|0;l.length=g,g=g-1|0;var x=B.words[0]|0,y=a.words[0]|0,v=x*y,A=v&67108863,m=v/67108864|0;l.words[0]=A;for(var f=1;f<g;f++){for(var E=m>>>26,H=m&67108863,W=Math.min(f,a.length-1),j=Math.max(0,f-B.length+1);j<=W;j++){var it=f-j|0;x=B.words[it]|0,y=a.words[j]|0,v=x*y+H,E+=v/67108864|0,H=v&67108863}l.words[f]=H|0,m=E|0}return m!==0?l.words[f]=m|0:l.length--,l._strip()}var z=function(a,l,g){var x=a.words,y=l.words,v=g.words,A=0,m,f,E,H=x[0]|0,W=H&8191,j=H>>>13,it=x[1]|0,rt=it&8191,st=it>>>13,Ht=x[2]|0,yt=Ht&8191,ht=Ht>>>13,Lt=x[3]|0,vt=Lt&8191,_t=Lt>>>13,Ze=x[4]|0,kt=Ze&8191,Dt=Ze>>>13,Yn=x[5]|0,Ut=Yn&8191,Mt=Yn>>>13,Se=x[6]|0,Rt=Se&8191,Tt=Se>>>13,Me=x[7]|0,Nt=Me&8191,p=Me>>>13,u=x[8]|0,h=u&8191,b=u>>>13,M=x[9]|0,T=M&8191,F=M>>>13,pt=y[0]|0,lt=pt&8191,ft=pt>>>13,Ft=y[1]|0,ut=Ft&8191,Vt=Ft>>>13,ic=y[2]|0,Zt=ic&8191,Yt=ic>>>13,sc=y[3]|0,Xt=sc&8191,Jt=sc>>>13,oc=y[4]|0,Qt=oc&8191,te=oc>>>13,ac=y[5]|0,ee=ac&8191,ne=ac>>>13,cc=y[6]|0,re=cc&8191,ie=cc>>>13,uc=y[7]|0,se=uc&8191,oe=uc>>>13,fc=y[8]|0,ae=fc&8191,ce=fc>>>13,hc=y[9]|0,ue=hc&8191,fe=hc>>>13;g.negative=a.negative^l.negative,g.length=19,m=Math.imul(W,lt),f=Math.imul(W,ft),f=f+Math.imul(j,lt)|0,E=Math.imul(j,ft);var ks=(A+m|0)+((f&8191)<<13)|0;A=(E+(f>>>13)|0)+(ks>>>26)|0,ks&=67108863,m=Math.imul(rt,lt),f=Math.imul(rt,ft),f=f+Math.imul(st,lt)|0,E=Math.imul(st,ft),m=m+Math.imul(W,ut)|0,f=f+Math.imul(W,Vt)|0,f=f+Math.imul(j,ut)|0,E=E+Math.imul(j,Vt)|0;var Ms=(A+m|0)+((f&8191)<<13)|0;A=(E+(f>>>13)|0)+(Ms>>>26)|0,Ms&=67108863,m=Math.imul(yt,lt),f=Math.imul(yt,ft),f=f+Math.imul(ht,lt)|0,E=Math.imul(ht,ft),m=m+Math.imul(rt,ut)|0,f=f+Math.imul(rt,Vt)|0,f=f+Math.imul(st,ut)|0,E=E+Math.imul(st,Vt)|0,m=m+Math.imul(W,Zt)|0,f=f+Math.imul(W,Yt)|0,f=f+Math.imul(j,Zt)|0,E=E+Math.imul(j,Yt)|0;var Rs=(A+m|0)+((f&8191)<<13)|0;A=(E+(f>>>13)|0)+(Rs>>>26)|0,Rs&=67108863,m=Math.imul(vt,lt),f=Math.imul(vt,ft),f=f+Math.imul(_t,lt)|0,E=Math.imul(_t,ft),m=m+Math.imul(yt,ut)|0,f=f+Math.imul(yt,Vt)|0,f=f+Math.imul(ht,ut)|0,E=E+Math.imul(ht,Vt)|0,m=m+Math.imul(rt,Zt)|0,f=f+Math.imul(rt,Yt)|0,f=f+Math.imul(st,Zt)|0,E=E+Math.imul(st,Yt)|0,m=m+Math.imul(W,Xt)|0,f=f+Math.imul(W,Jt)|0,f=f+Math.imul(j,Xt)|0,E=E+Math.imul(j,Jt)|0;var Ls=(A+m|0)+((f&8191)<<13)|0;A=(E+(f>>>13)|0)+(Ls>>>26)|0,Ls&=67108863,m=Math.imul(kt,lt),f=Math.imul(kt,ft),f=f+Math.imul(Dt,lt)|0,E=Math.imul(Dt,ft),m=m+Math.imul(vt,ut)|0,f=f+Math.imul(vt,Vt)|0,f=f+Math.imul(_t,ut)|0,E=E+Math.imul(_t,Vt)|0,m=m+Math.imul(yt,Zt)|0,f=f+Math.imul(yt,Yt)|0,f=f+Math.imul(ht,Zt)|0,E=E+Math.imul(ht,Yt)|0,m=m+Math.imul(rt,Xt)|0,f=f+Math.imul(rt,Jt)|0,f=f+Math.imul(st,Xt)|0,E=E+Math.imul(st,Jt)|0,m=m+Math.imul(W,Qt)|0,f=f+Math.imul(W,te)|0,f=f+Math.imul(j,Qt)|0,E=E+Math.imul(j,te)|0;var Ts=(A+m|0)+((f&8191)<<13)|0;A=(E+(f>>>13)|0)+(Ts>>>26)|0,Ts&=67108863,m=Math.imul(Ut,lt),f=Math.imul(Ut,ft),f=f+Math.imul(Mt,lt)|0,E=Math.imul(Mt,ft),m=m+Math.imul(kt,ut)|0,f=f+Math.imul(kt,Vt)|0,f=f+Math.imul(Dt,ut)|0,E=E+Math.imul(Dt,Vt)|0,m=m+Math.imul(vt,Zt)|0,f=f+Math.imul(vt,Yt)|0,f=f+Math.imul(_t,Zt)|0,E=E+Math.imul(_t,Yt)|0,m=m+Math.imul(yt,Xt)|0,f=f+Math.imul(yt,Jt)|0,f=f+Math.imul(ht,Xt)|0,E=E+Math.imul(ht,Jt)|0,m=m+Math.imul(rt,Qt)|0,f=f+Math.imul(rt,te)|0,f=f+Math.imul(st,Qt)|0,E=E+Math.imul(st,te)|0,m=m+Math.imul(W,ee)|0,f=f+Math.imul(W,ne)|0,f=f+Math.imul(j,ee)|0,E=E+Math.imul(j,ne)|0;var Cs=(A+m|0)+((f&8191)<<13)|0;A=(E+(f>>>13)|0)+(Cs>>>26)|0,Cs&=67108863,m=Math.imul(Rt,lt),f=Math.imul(Rt,ft),f=f+Math.imul(Tt,lt)|0,E=Math.imul(Tt,ft),m=m+Math.imul(Ut,ut)|0,f=f+Math.imul(Ut,Vt)|0,f=f+Math.imul(Mt,ut)|0,E=E+Math.imul(Mt,Vt)|0,m=m+Math.imul(kt,Zt)|0,f=f+Math.imul(kt,Yt)|0,f=f+Math.imul(Dt,Zt)|0,E=E+Math.imul(Dt,Yt)|0,m=m+Math.imul(vt,Xt)|0,f=f+Math.imul(vt,Jt)|0,f=f+Math.imul(_t,Xt)|0,E=E+Math.imul(_t,Jt)|0,m=m+Math.imul(yt,Qt)|0,f=f+Math.imul(yt,te)|0,f=f+Math.imul(ht,Qt)|0,E=E+Math.imul(ht,te)|0,m=m+Math.imul(rt,ee)|0,f=f+Math.imul(rt,ne)|0,f=f+Math.imul(st,ee)|0,E=E+Math.imul(st,ne)|0,m=m+Math.imul(W,re)|0,f=f+Math.imul(W,ie)|0,f=f+Math.imul(j,re)|0,E=E+Math.imul(j,ie)|0;var Us=(A+m|0)+((f&8191)<<13)|0;A=(E+(f>>>13)|0)+(Us>>>26)|0,Us&=67108863,m=Math.imul(Nt,lt),f=Math.imul(Nt,ft),f=f+Math.imul(p,lt)|0,E=Math.imul(p,ft),m=m+Math.imul(Rt,ut)|0,f=f+Math.imul(Rt,Vt)|0,f=f+Math.imul(Tt,ut)|0,E=E+Math.imul(Tt,Vt)|0,m=m+Math.imul(Ut,Zt)|0,f=f+Math.imul(Ut,Yt)|0,f=f+Math.imul(Mt,Zt)|0,E=E+Math.imul(Mt,Yt)|0,m=m+Math.imul(kt,Xt)|0,f=f+Math.imul(kt,Jt)|0,f=f+Math.imul(Dt,Xt)|0,E=E+Math.imul(Dt,Jt)|0,m=m+Math.imul(vt,Qt)|0,f=f+Math.imul(vt,te)|0,f=f+Math.imul(_t,Qt)|0,E=E+Math.imul(_t,te)|0,m=m+Math.imul(yt,ee)|0,f=f+Math.imul(yt,ne)|0,f=f+Math.imul(ht,ee)|0,E=E+Math.imul(ht,ne)|0,m=m+Math.imul(rt,re)|0,f=f+Math.imul(rt,ie)|0,f=f+Math.imul(st,re)|0,E=E+Math.imul(st,ie)|0,m=m+Math.imul(W,se)|0,f=f+Math.imul(W,oe)|0,f=f+Math.imul(j,se)|0,E=E+Math.imul(j,oe)|0;var Ns=(A+m|0)+((f&8191)<<13)|0;A=(E+(f>>>13)|0)+(Ns>>>26)|0,Ns&=67108863,m=Math.imul(h,lt),f=Math.imul(h,ft),f=f+Math.imul(b,lt)|0,E=Math.imul(b,ft),m=m+Math.imul(Nt,ut)|0,f=f+Math.imul(Nt,Vt)|0,f=f+Math.imul(p,ut)|0,E=E+Math.imul(p,Vt)|0,m=m+Math.imul(Rt,Zt)|0,f=f+Math.imul(Rt,Yt)|0,f=f+Math.imul(Tt,Zt)|0,E=E+Math.imul(Tt,Yt)|0,m=m+Math.imul(Ut,Xt)|0,f=f+Math.imul(Ut,Jt)|0,f=f+Math.imul(Mt,Xt)|0,E=E+Math.imul(Mt,Jt)|0,m=m+Math.imul(kt,Qt)|0,f=f+Math.imul(kt,te)|0,f=f+Math.imul(Dt,Qt)|0,E=E+Math.imul(Dt,te)|0,m=m+Math.imul(vt,ee)|0,f=f+Math.imul(vt,ne)|0,f=f+Math.imul(_t,ee)|0,E=E+Math.imul(_t,ne)|0,m=m+Math.imul(yt,re)|0,f=f+Math.imul(yt,ie)|0,f=f+Math.imul(ht,re)|0,E=E+Math.imul(ht,ie)|0,m=m+Math.imul(rt,se)|0,f=f+Math.imul(rt,oe)|0,f=f+Math.imul(st,se)|0,E=E+Math.imul(st,oe)|0,m=m+Math.imul(W,ae)|0,f=f+Math.imul(W,ce)|0,f=f+Math.imul(j,ae)|0,E=E+Math.imul(j,ce)|0;var Fs=(A+m|0)+((f&8191)<<13)|0;A=(E+(f>>>13)|0)+(Fs>>>26)|0,Fs&=67108863,m=Math.imul(T,lt),f=Math.imul(T,ft),f=f+Math.imul(F,lt)|0,E=Math.imul(F,ft),m=m+Math.imul(h,ut)|0,f=f+Math.imul(h,Vt)|0,f=f+Math.imul(b,ut)|0,E=E+Math.imul(b,Vt)|0,m=m+Math.imul(Nt,Zt)|0,f=f+Math.imul(Nt,Yt)|0,f=f+Math.imul(p,Zt)|0,E=E+Math.imul(p,Yt)|0,m=m+Math.imul(Rt,Xt)|0,f=f+Math.imul(Rt,Jt)|0,f=f+Math.imul(Tt,Xt)|0,E=E+Math.imul(Tt,Jt)|0,m=m+Math.imul(Ut,Qt)|0,f=f+Math.imul(Ut,te)|0,f=f+Math.imul(Mt,Qt)|0,E=E+Math.imul(Mt,te)|0,m=m+Math.imul(kt,ee)|0,f=f+Math.imul(kt,ne)|0,f=f+Math.imul(Dt,ee)|0,E=E+Math.imul(Dt,ne)|0,m=m+Math.imul(vt,re)|0,f=f+Math.imul(vt,ie)|0,f=f+Math.imul(_t,re)|0,E=E+Math.imul(_t,ie)|0,m=m+Math.imul(yt,se)|0,f=f+Math.imul(yt,oe)|0,f=f+Math.imul(ht,se)|0,E=E+Math.imul(ht,oe)|0,m=m+Math.imul(rt,ae)|0,f=f+Math.imul(rt,ce)|0,f=f+Math.imul(st,ae)|0,E=E+Math.imul(st,ce)|0,m=m+Math.imul(W,ue)|0,f=f+Math.imul(W,fe)|0,f=f+Math.imul(j,ue)|0,E=E+Math.imul(j,fe)|0;var Os=(A+m|0)+((f&8191)<<13)|0;A=(E+(f>>>13)|0)+(Os>>>26)|0,Os&=67108863,m=Math.imul(T,ut),f=Math.imul(T,Vt),f=f+Math.imul(F,ut)|0,E=Math.imul(F,Vt),m=m+Math.imul(h,Zt)|0,f=f+Math.imul(h,Yt)|0,f=f+Math.imul(b,Zt)|0,E=E+Math.imul(b,Yt)|0,m=m+Math.imul(Nt,Xt)|0,f=f+Math.imul(Nt,Jt)|0,f=f+Math.imul(p,Xt)|0,E=E+Math.imul(p,Jt)|0,m=m+Math.imul(Rt,Qt)|0,f=f+Math.imul(Rt,te)|0,f=f+Math.imul(Tt,Qt)|0,E=E+Math.imul(Tt,te)|0,m=m+Math.imul(Ut,ee)|0,f=f+Math.imul(Ut,ne)|0,f=f+Math.imul(Mt,ee)|0,E=E+Math.imul(Mt,ne)|0,m=m+Math.imul(kt,re)|0,f=f+Math.imul(kt,ie)|0,f=f+Math.imul(Dt,re)|0,E=E+Math.imul(Dt,ie)|0,m=m+Math.imul(vt,se)|0,f=f+Math.imul(vt,oe)|0,f=f+Math.imul(_t,se)|0,E=E+Math.imul(_t,oe)|0,m=m+Math.imul(yt,ae)|0,f=f+Math.imul(yt,ce)|0,f=f+Math.imul(ht,ae)|0,E=E+Math.imul(ht,ce)|0,m=m+Math.imul(rt,ue)|0,f=f+Math.imul(rt,fe)|0,f=f+Math.imul(st,ue)|0,E=E+Math.imul(st,fe)|0;var Ps=(A+m|0)+((f&8191)<<13)|0;A=(E+(f>>>13)|0)+(Ps>>>26)|0,Ps&=67108863,m=Math.imul(T,Zt),f=Math.imul(T,Yt),f=f+Math.imul(F,Zt)|0,E=Math.imul(F,Yt),m=m+Math.imul(h,Xt)|0,f=f+Math.imul(h,Jt)|0,f=f+Math.imul(b,Xt)|0,E=E+Math.imul(b,Jt)|0,m=m+Math.imul(Nt,Qt)|0,f=f+Math.imul(Nt,te)|0,f=f+Math.imul(p,Qt)|0,E=E+Math.imul(p,te)|0,m=m+Math.imul(Rt,ee)|0,f=f+Math.imul(Rt,ne)|0,f=f+Math.imul(Tt,ee)|0,E=E+Math.imul(Tt,ne)|0,m=m+Math.imul(Ut,re)|0,f=f+Math.imul(Ut,ie)|0,f=f+Math.imul(Mt,re)|0,E=E+Math.imul(Mt,ie)|0,m=m+Math.imul(kt,se)|0,f=f+Math.imul(kt,oe)|0,f=f+Math.imul(Dt,se)|0,E=E+Math.imul(Dt,oe)|0,m=m+Math.imul(vt,ae)|0,f=f+Math.imul(vt,ce)|0,f=f+Math.imul(_t,ae)|0,E=E+Math.imul(_t,ce)|0,m=m+Math.imul(yt,ue)|0,f=f+Math.imul(yt,fe)|0,f=f+Math.imul(ht,ue)|0,E=E+Math.imul(ht,fe)|0;var qs=(A+m|0)+((f&8191)<<13)|0;A=(E+(f>>>13)|0)+(qs>>>26)|0,qs&=67108863,m=Math.imul(T,Xt),f=Math.imul(T,Jt),f=f+Math.imul(F,Xt)|0,E=Math.imul(F,Jt),m=m+Math.imul(h,Qt)|0,f=f+Math.imul(h,te)|0,f=f+Math.imul(b,Qt)|0,E=E+Math.imul(b,te)|0,m=m+Math.imul(Nt,ee)|0,f=f+Math.imul(Nt,ne)|0,f=f+Math.imul(p,ee)|0,E=E+Math.imul(p,ne)|0,m=m+Math.imul(Rt,re)|0,f=f+Math.imul(Rt,ie)|0,f=f+Math.imul(Tt,re)|0,E=E+Math.imul(Tt,ie)|0,m=m+Math.imul(Ut,se)|0,f=f+Math.imul(Ut,oe)|0,f=f+Math.imul(Mt,se)|0,E=E+Math.imul(Mt,oe)|0,m=m+Math.imul(kt,ae)|0,f=f+Math.imul(kt,ce)|0,f=f+Math.imul(Dt,ae)|0,E=E+Math.imul(Dt,ce)|0,m=m+Math.imul(vt,ue)|0,f=f+Math.imul(vt,fe)|0,f=f+Math.imul(_t,ue)|0,E=E+Math.imul(_t,fe)|0;var Ds=(A+m|0)+((f&8191)<<13)|0;A=(E+(f>>>13)|0)+(Ds>>>26)|0,Ds&=67108863,m=Math.imul(T,Qt),f=Math.imul(T,te),f=f+Math.imul(F,Qt)|0,E=Math.imul(F,te),m=m+Math.imul(h,ee)|0,f=f+Math.imul(h,ne)|0,f=f+Math.imul(b,ee)|0,E=E+Math.imul(b,ne)|0,m=m+Math.imul(Nt,re)|0,f=f+Math.imul(Nt,ie)|0,f=f+Math.imul(p,re)|0,E=E+Math.imul(p,ie)|0,m=m+Math.imul(Rt,se)|0,f=f+Math.imul(Rt,oe)|0,f=f+Math.imul(Tt,se)|0,E=E+Math.imul(Tt,oe)|0,m=m+Math.imul(Ut,ae)|0,f=f+Math.imul(Ut,ce)|0,f=f+Math.imul(Mt,ae)|0,E=E+Math.imul(Mt,ce)|0,m=m+Math.imul(kt,ue)|0,f=f+Math.imul(kt,fe)|0,f=f+Math.imul(Dt,ue)|0,E=E+Math.imul(Dt,fe)|0;var zs=(A+m|0)+((f&8191)<<13)|0;A=(E+(f>>>13)|0)+(zs>>>26)|0,zs&=67108863,m=Math.imul(T,ee),f=Math.imul(T,ne),f=f+Math.imul(F,ee)|0,E=Math.imul(F,ne),m=m+Math.imul(h,re)|0,f=f+Math.imul(h,ie)|0,f=f+Math.imul(b,re)|0,E=E+Math.imul(b,ie)|0,m=m+Math.imul(Nt,se)|0,f=f+Math.imul(Nt,oe)|0,f=f+Math.imul(p,se)|0,E=E+Math.imul(p,oe)|0,m=m+Math.imul(Rt,ae)|0,f=f+Math.imul(Rt,ce)|0,f=f+Math.imul(Tt,ae)|0,E=E+Math.imul(Tt,ce)|0,m=m+Math.imul(Ut,ue)|0,f=f+Math.imul(Ut,fe)|0,f=f+Math.imul(Mt,ue)|0,E=E+Math.imul(Mt,fe)|0;var $s=(A+m|0)+((f&8191)<<13)|0;A=(E+(f>>>13)|0)+($s>>>26)|0,$s&=67108863,m=Math.imul(T,re),f=Math.imul(T,ie),f=f+Math.imul(F,re)|0,E=Math.imul(F,ie),m=m+Math.imul(h,se)|0,f=f+Math.imul(h,oe)|0,f=f+Math.imul(b,se)|0,E=E+Math.imul(b,oe)|0,m=m+Math.imul(Nt,ae)|0,f=f+Math.imul(Nt,ce)|0,f=f+Math.imul(p,ae)|0,E=E+Math.imul(p,ce)|0,m=m+Math.imul(Rt,ue)|0,f=f+Math.imul(Rt,fe)|0,f=f+Math.imul(Tt,ue)|0,E=E+Math.imul(Tt,fe)|0;var Hs=(A+m|0)+((f&8191)<<13)|0;A=(E+(f>>>13)|0)+(Hs>>>26)|0,Hs&=67108863,m=Math.imul(T,se),f=Math.imul(T,oe),f=f+Math.imul(F,se)|0,E=Math.imul(F,oe),m=m+Math.imul(h,ae)|0,f=f+Math.imul(h,ce)|0,f=f+Math.imul(b,ae)|0,E=E+Math.imul(b,ce)|0,m=m+Math.imul(Nt,ue)|0,f=f+Math.imul(Nt,fe)|0,f=f+Math.imul(p,ue)|0,E=E+Math.imul(p,fe)|0;var Ks=(A+m|0)+((f&8191)<<13)|0;A=(E+(f>>>13)|0)+(Ks>>>26)|0,Ks&=67108863,m=Math.imul(T,ae),f=Math.imul(T,ce),f=f+Math.imul(F,ae)|0,E=Math.imul(F,ce),m=m+Math.imul(h,ue)|0,f=f+Math.imul(h,fe)|0,f=f+Math.imul(b,ue)|0,E=E+Math.imul(b,fe)|0;var Ws=(A+m|0)+((f&8191)<<13)|0;A=(E+(f>>>13)|0)+(Ws>>>26)|0,Ws&=67108863,m=Math.imul(T,ue),f=Math.imul(T,fe),f=f+Math.imul(F,ue)|0,E=Math.imul(F,fe);var js=(A+m|0)+((f&8191)<<13)|0;return A=(E+(f>>>13)|0)+(js>>>26)|0,js&=67108863,v[0]=ks,v[1]=Ms,v[2]=Rs,v[3]=Ls,v[4]=Ts,v[5]=Cs,v[6]=Us,v[7]=Ns,v[8]=Fs,v[9]=Os,v[10]=Ps,v[11]=qs,v[12]=Ds,v[13]=zs,v[14]=$s,v[15]=Hs,v[16]=Ks,v[17]=Ws,v[18]=js,A!==0&&(v[19]=A,g.length++),g};Math.imul||(z=O);function P(B,a,l){l.negative=a.negative^B.negative,l.length=B.length+a.length;for(var g=0,x=0,y=0;y<l.length-1;y++){var v=x;x=0;for(var A=g&67108863,m=Math.min(y,a.length-1),f=Math.max(0,y-B.length+1);f<=m;f++){var E=y-f,H=B.words[E]|0,W=a.words[f]|0,j=H*W,it=j&67108863;v=v+(j/67108864|0)|0,it=it+A|0,A=it&67108863,v=v+(it>>>26)|0,x+=v>>>26,v&=67108863}l.words[y]=A,g=v,v=x}return g!==0?l.words[y]=g:l.length--,l._strip()}function Y(B,a,l){return P(B,a,l)}i.prototype.mulTo=function(a,l){var g,x=this.length+a.length;return this.length===10&&a.length===10?g=z(this,a,l):x<63?g=O(this,a,l):x<1024?g=P(this,a,l):g=Y(this,a,l),g},i.prototype.mul=function(a){var l=new i(null);return l.words=new Array(this.length+a.length),this.mulTo(a,l)},i.prototype.mulf=function(a){var l=new i(null);return l.words=new Array(this.length+a.length),Y(this,a,l)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){var l=a<0;l&&(a=-a),n(typeof a=="number"),n(a<67108864);for(var g=0,x=0;x<this.length;x++){var y=(this.words[x]|0)*a,v=(y&67108863)+(g&67108863);g>>=26,g+=y/67108864|0,g+=v>>>26,this.words[x]=v&67108863}return g!==0&&(this.words[x]=g,this.length++),l?this.ineg():this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var l=k(a);if(l.length===0)return new i(1);for(var g=this,x=0;x<l.length&&l[x]===0;x++,g=g.sqr());if(++x<l.length)for(var y=g.sqr();x<l.length;x++,y=y.sqr())l[x]!==0&&(g=g.mul(y));return g},i.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var l=a%26,g=(a-l)/26,x=67108863>>>26-l<<26-l,y;if(l!==0){var v=0;for(y=0;y<this.length;y++){var A=this.words[y]&x,m=(this.words[y]|0)-A<<l;this.words[y]=m|v,v=A>>>26-l}v&&(this.words[y]=v,this.length++)}if(g!==0){for(y=this.length-1;y>=0;y--)this.words[y+g]=this.words[y];for(y=0;y<g;y++)this.words[y]=0;this.length+=g}return this._strip()},i.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,l,g){n(typeof a=="number"&&a>=0);var x;l?x=(l-l%26)/26:x=0;var y=a%26,v=Math.min((a-y)/26,this.length),A=67108863^67108863>>>y<<y,m=g;if(x-=v,x=Math.max(0,x),m){for(var f=0;f<v;f++)m.words[f]=this.words[f];m.length=v}if(v!==0)if(this.length>v)for(this.length-=v,f=0;f<this.length;f++)this.words[f]=this.words[f+v];else this.words[0]=0,this.length=1;var E=0;for(f=this.length-1;f>=0&&(E!==0||f>=x);f--){var H=this.words[f]|0;this.words[f]=E<<26-y|H>>>y,E=H&A}return m&&E!==0&&(m.words[m.length++]=E),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(a,l,g){return n(this.negative===0),this.iushrn(a,l,g)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var l=a%26,g=(a-l)/26,x=1<<l;if(this.length<=g)return!1;var y=this.words[g];return!!(y&x)},i.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var l=a%26,g=(a-l)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(l!==0&&g++,this.length=Math.min(g,this.length),l!==0){var x=67108863^67108863>>>l<<l;this.words[this.length-1]&=x}return this._strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this._strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,l,g){var x=a.length+g,y;this._expand(x);var v,A=0;for(y=0;y<a.length;y++){v=(this.words[y+g]|0)+A;var m=(a.words[y]|0)*l;v-=m&67108863,A=(v>>26)-(m/67108864|0),this.words[y+g]=v&67108863}for(;y<this.length-g;y++)v=(this.words[y+g]|0)+A,A=v>>26,this.words[y+g]=v&67108863;if(A===0)return this._strip();for(n(A===-1),A=0,y=0;y<this.length;y++)v=-(this.words[y]|0)+A,A=v>>26,this.words[y]=v&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(a,l){var g=this.length-a.length,x=this.clone(),y=a,v=y.words[y.length-1]|0,A=this._countBits(v);g=26-A,g!==0&&(y=y.ushln(g),x.iushln(g),v=y.words[y.length-1]|0);var m=x.length-y.length,f;if(l!=="mod"){f=new i(null),f.length=m+1,f.words=new Array(f.length);for(var E=0;E<f.length;E++)f.words[E]=0}var H=x.clone()._ishlnsubmul(y,1,m);H.negative===0&&(x=H,f&&(f.words[m]=1));for(var W=m-1;W>=0;W--){var j=(x.words[y.length+W]|0)*67108864+(x.words[y.length+W-1]|0);for(j=Math.min(j/v|0,67108863),x._ishlnsubmul(y,j,W);x.negative!==0;)j--,x.negative=0,x._ishlnsubmul(y,1,W),x.isZero()||(x.negative^=1);f&&(f.words[W]=j)}return f&&f._strip(),x._strip(),l!=="div"&&g!==0&&x.iushrn(g),{div:f||null,mod:x}},i.prototype.divmod=function(a,l,g){if(n(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var x,y,v;return this.negative!==0&&a.negative===0?(v=this.neg().divmod(a,l),l!=="mod"&&(x=v.div.neg()),l!=="div"&&(y=v.mod.neg(),g&&y.negative!==0&&y.iadd(a)),{div:x,mod:y}):this.negative===0&&a.negative!==0?(v=this.divmod(a.neg(),l),l!=="mod"&&(x=v.div.neg()),{div:x,mod:v.mod}):this.negative&a.negative?(v=this.neg().divmod(a.neg(),l),l!=="div"&&(y=v.mod.neg(),g&&y.negative!==0&&y.isub(a)),{div:v.div,mod:y}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?l==="div"?{div:this.divn(a.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modrn(a.words[0]))}:this._wordDiv(a,l)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var l=this.divmod(a);if(l.mod.isZero())return l.div;var g=l.div.negative!==0?l.mod.isub(a):l.mod,x=a.ushrn(1),y=a.andln(1),v=g.cmp(x);return v<0||y===1&&v===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modrn=function(a){var l=a<0;l&&(a=-a),n(a<=67108863);for(var g=(1<<26)%a,x=0,y=this.length-1;y>=0;y--)x=(g*x+(this.words[y]|0))%a;return l?-x:x},i.prototype.modn=function(a){return this.modrn(a)},i.prototype.idivn=function(a){var l=a<0;l&&(a=-a),n(a<=67108863);for(var g=0,x=this.length-1;x>=0;x--){var y=(this.words[x]|0)+g*67108864;this.words[x]=y/a|0,g=y%a}return this._strip(),l?this.ineg():this},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var l=this,g=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var x=new i(1),y=new i(0),v=new i(0),A=new i(1),m=0;l.isEven()&&g.isEven();)l.iushrn(1),g.iushrn(1),++m;for(var f=g.clone(),E=l.clone();!l.isZero();){for(var H=0,W=1;!(l.words[0]&W)&&H<26;++H,W<<=1);if(H>0)for(l.iushrn(H);H-- >0;)(x.isOdd()||y.isOdd())&&(x.iadd(f),y.isub(E)),x.iushrn(1),y.iushrn(1);for(var j=0,it=1;!(g.words[0]&it)&&j<26;++j,it<<=1);if(j>0)for(g.iushrn(j);j-- >0;)(v.isOdd()||A.isOdd())&&(v.iadd(f),A.isub(E)),v.iushrn(1),A.iushrn(1);l.cmp(g)>=0?(l.isub(g),x.isub(v),y.isub(A)):(g.isub(l),v.isub(x),A.isub(y))}return{a:v,b:A,gcd:g.iushln(m)}},i.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var l=this,g=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var x=new i(1),y=new i(0),v=g.clone();l.cmpn(1)>0&&g.cmpn(1)>0;){for(var A=0,m=1;!(l.words[0]&m)&&A<26;++A,m<<=1);if(A>0)for(l.iushrn(A);A-- >0;)x.isOdd()&&x.iadd(v),x.iushrn(1);for(var f=0,E=1;!(g.words[0]&E)&&f<26;++f,E<<=1);if(f>0)for(g.iushrn(f);f-- >0;)y.isOdd()&&y.iadd(v),y.iushrn(1);l.cmp(g)>=0?(l.isub(g),x.isub(y)):(g.isub(l),y.isub(x))}var H;return l.cmpn(1)===0?H=x:H=y,H.cmpn(0)<0&&H.iadd(a),H},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var l=this.clone(),g=a.clone();l.negative=0,g.negative=0;for(var x=0;l.isEven()&&g.isEven();x++)l.iushrn(1),g.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;g.isEven();)g.iushrn(1);var y=l.cmp(g);if(y<0){var v=l;l=g,g=v}else if(y===0||g.cmpn(1)===0)break;l.isub(g)}while(!0);return g.iushln(x)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){n(typeof a=="number");var l=a%26,g=(a-l)/26,x=1<<l;if(this.length<=g)return this._expand(g+1),this.words[g]|=x,this;for(var y=x,v=g;y!==0&&v<this.length;v++){var A=this.words[v]|0;A+=y,y=A>>>26,A&=67108863,this.words[v]=A}return y!==0&&(this.words[v]=y,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var l=a<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this._strip();var g;if(this.length>1)g=1;else{l&&(a=-a),n(a<=67108863,"Number is too big");var x=this.words[0]|0;g=x===a?0:x<a?-1:1}return this.negative!==0?-g|0:g},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var l=this.ucmp(a);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var l=0,g=this.length-1;g>=0;g--){var x=this.words[g]|0,y=a.words[g]|0;if(x!==y){x<y?l=-1:x>y&&(l=1);break}}return l},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new J(a)},i.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var D={k256:null,p224:null,p192:null,p25519:null};function $(B,a){this.name=B,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}$.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},$.prototype.ireduce=function(a){var l=a,g;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),g=l.bitLength();while(g>this.n);var x=g<this.n?-1:l.ucmp(this.p);return x===0?(l.words[0]=0,l.length=1):x>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},$.prototype.split=function(a,l){a.iushrn(this.n,0,l)},$.prototype.imulK=function(a){return a.imul(this.k)};function X(){$.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(X,$),X.prototype.split=function(a,l){for(var g=4194303,x=Math.min(a.length,9),y=0;y<x;y++)l.words[y]=a.words[y];if(l.length=x,a.length<=9){a.words[0]=0,a.length=1;return}var v=a.words[9];for(l.words[l.length++]=v&g,y=10;y<a.length;y++){var A=a.words[y]|0;a.words[y-10]=(A&g)<<4|v>>>22,v=A}v>>>=22,a.words[y-10]=v,v===0&&a.length>10?a.length-=10:a.length-=9},X.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var l=0,g=0;g<a.length;g++){var x=a.words[g]|0;l+=x*977,a.words[g]=l&67108863,l=x*64+(l/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function tt(){$.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(tt,$);function St(){$.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(St,$);function wt(){$.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(wt,$),wt.prototype.imulK=function(a){for(var l=0,g=0;g<a.length;g++){var x=(a.words[g]|0)*19+l,y=x&67108863;x>>>=26,a.words[g]=y,l=x}return l!==0&&(a.words[a.length++]=l),a},i._prime=function(a){if(D[a])return D[a];var l;if(a==="k256")l=new X;else if(a==="p224")l=new tt;else if(a==="p192")l=new St;else if(a==="p25519")l=new wt;else throw new Error("Unknown prime "+a);return D[a]=l,l};function J(B){if(typeof B=="string"){var a=i._prime(B);this.m=a.p,this.prime=a}else n(B.gtn(1),"modulus must be greater than 1"),this.m=B,this.prime=null}J.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},J.prototype._verify2=function(a,l){n((a.negative|l.negative)===0,"red works only with positives"),n(a.red&&a.red===l.red,"red works only with red numbers")},J.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(S(a,a.umod(this.m)._forceRed(this)),a)},J.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},J.prototype.add=function(a,l){this._verify2(a,l);var g=a.add(l);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},J.prototype.iadd=function(a,l){this._verify2(a,l);var g=a.iadd(l);return g.cmp(this.m)>=0&&g.isub(this.m),g},J.prototype.sub=function(a,l){this._verify2(a,l);var g=a.sub(l);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},J.prototype.isub=function(a,l){this._verify2(a,l);var g=a.isub(l);return g.cmpn(0)<0&&g.iadd(this.m),g},J.prototype.shl=function(a,l){return this._verify1(a),this.imod(a.ushln(l))},J.prototype.imul=function(a,l){return this._verify2(a,l),this.imod(a.imul(l))},J.prototype.mul=function(a,l){return this._verify2(a,l),this.imod(a.mul(l))},J.prototype.isqr=function(a){return this.imul(a,a.clone())},J.prototype.sqr=function(a){return this.mul(a,a)},J.prototype.sqrt=function(a){if(a.isZero())return a.clone();var l=this.m.andln(3);if(n(l%2===1),l===3){var g=this.m.add(new i(1)).iushrn(2);return this.pow(a,g)}for(var x=this.m.subn(1),y=0;!x.isZero()&&x.andln(1)===0;)y++,x.iushrn(1);n(!x.isZero());var v=new i(1).toRed(this),A=v.redNeg(),m=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);this.pow(f,m).cmp(A)!==0;)f.redIAdd(A);for(var E=this.pow(f,x),H=this.pow(a,x.addn(1).iushrn(1)),W=this.pow(a,x),j=y;W.cmp(v)!==0;){for(var it=W,rt=0;it.cmp(v)!==0;rt++)it=it.redSqr();n(rt<j);var st=this.pow(E,new i(1).iushln(j-rt-1));H=H.redMul(st),E=st.redSqr(),W=W.redMul(E),j=rt}return H},J.prototype.invm=function(a){var l=a._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},J.prototype.pow=function(a,l){if(l.isZero())return new i(1).toRed(this);if(l.cmpn(1)===0)return a.clone();var g=4,x=new Array(1<<g);x[0]=new i(1).toRed(this),x[1]=a;for(var y=2;y<x.length;y++)x[y]=this.mul(x[y-1],a);var v=x[0],A=0,m=0,f=l.bitLength()%26;for(f===0&&(f=26),y=l.length-1;y>=0;y--){for(var E=l.words[y],H=f-1;H>=0;H--){var W=E>>H&1;if(v!==x[0]&&(v=this.sqr(v)),W===0&&A===0){m=0;continue}A<<=1,A|=W,m++,!(m!==g&&(y!==0||H!==0))&&(v=this.mul(v,x[A]),m=0,A=0)}f=26}return v},J.prototype.convertTo=function(a){var l=a.umod(this.m);return l===a?l.clone():l},J.prototype.convertFrom=function(a){var l=a.clone();return l.red=null,l},i.mont=function(a){return new Bt(a)};function Bt(B){J.call(this,B),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(Bt,J),Bt.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},Bt.prototype.convertFrom=function(a){var l=this.imod(a.mul(this.rinv));return l.red=null,l},Bt.prototype.imul=function(a,l){if(a.isZero()||l.isZero())return a.words[0]=0,a.length=1,a;var g=a.imul(l),x=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=g.isub(x).iushrn(this.shift),v=y;return y.cmp(this.m)>=0?v=y.isub(this.m):y.cmpn(0)<0&&(v=y.iadd(this.m)),v._forceRed(this)},Bt.prototype.mul=function(a,l){if(a.isZero()||l.isZero())return new i(0)._forceRed(this);var g=a.mul(l),x=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=g.isub(x).iushrn(this.shift),v=y;return y.cmp(this.m)>=0?v=y.isub(this.m):y.cmpn(0)<0&&(v=y.iadd(this.m)),v._forceRed(this)},Bt.prototype.invm=function(a){var l=this.imod(a._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(r,Be)})(_i);var Lo=_i.exports,Ai={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(r,t){var e=dt,n=e.Buffer;function s(o,c){for(var d in o)c[d]=o[d]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=e:(s(e,t),t.Buffer=i);function i(o,c,d){return n(o,c,d)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,c,d){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,c,d)},i.alloc=function(o,c,d){if(typeof o!="number")throw new TypeError("Argument must be a number");var w=n(o);return c!==void 0?typeof d=="string"?w.fill(c,d):w.fill(c):w.fill(0),w},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}})(Ai,Ai.exports);var xr=Ai.exports.Buffer;function Cu(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var s=r.charAt(n),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=n}var o=r.length,c=r.charAt(0),d=Math.log(o)/Math.log(256),w=Math.log(256)/Math.log(o);function S(L){if((Array.isArray(L)||L instanceof Uint8Array)&&(L=xr.from(L)),!xr.isBuffer(L))throw new TypeError("Expected Buffer");if(L.length===0)return"";for(var R=0,I=0,k=0,O=L.length;k!==O&&L[k]===0;)k++,R++;for(var z=(O-k)*w+1>>>0,P=new Uint8Array(z);k!==O;){for(var Y=L[k],D=0,$=z-1;(Y!==0||D<I)&&$!==-1;$--,D++)Y+=256*P[$]>>>0,P[$]=Y%o>>>0,Y=Y/o>>>0;if(Y!==0)throw new Error("Non-zero carry");I=D,k++}for(var X=z-I;X!==z&&P[X]===0;)X++;for(var tt=c.repeat(R);X<z;++X)tt+=r.charAt(P[X]);return tt}function _(L){if(typeof L!="string")throw new TypeError("Expected String");if(L.length===0)return xr.alloc(0);for(var R=0,I=0,k=0;L[R]===c;)I++,R++;for(var O=(L.length-R)*d+1>>>0,z=new Uint8Array(O);L[R];){var P=t[L.charCodeAt(R)];if(P===255)return;for(var Y=0,D=O-1;(P!==0||Y<k)&&D!==-1;D--,Y++)P+=o*z[D]>>>0,z[D]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");k=Y,R++}for(var $=O-k;$!==O&&z[$]===0;)$++;var X=xr.allocUnsafe(I+(O-$));X.fill(0,0,I);for(var tt=I;$!==O;)X[tt++]=z[$++];return X}function N(L){var R=_(L);if(R)return R;throw new Error("Non-base"+o+" character")}return{encode:S,decodeUnsafe:_,decode:N}}var Uu=Cu,Nu=Uu,Fu="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",jt=Nu(Fu);const Ou=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),sn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),on=new Uint32Array(64);class Pu extends ho{constructor(){super(64,32,8,!1),this.A=sn[0]|0,this.B=sn[1]|0,this.C=sn[2]|0,this.D=sn[3]|0,this.E=sn[4]|0,this.F=sn[5]|0,this.G=sn[6]|0,this.H=sn[7]|0}get(){const{A:t,B:e,C:n,D:s,E:i,F:o,G:c,H:d}=this;return[t,e,n,s,i,o,c,d]}set(t,e,n,s,i,o,c,d){this.A=t|0,this.B=e|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=c|0,this.H=d|0}process(t,e){for(let _=0;_<16;_++,e+=4)on[_]=t.getUint32(e,!1);for(let _=16;_<64;_++){const N=on[_-15],L=on[_-2],R=Ke(N,7)^Ke(N,18)^N>>>3,I=Ke(L,17)^Ke(L,19)^L>>>10;on[_]=I+on[_-7]+R+on[_-16]|0}let{A:n,B:s,C:i,D:o,E:c,F:d,G:w,H:S}=this;for(let _=0;_<64;_++){const N=Ke(c,6)^Ke(c,11)^Ke(c,25),L=S+N+Lc(c,d,w)+Ou[_]+on[_]|0,I=(Ke(n,2)^Ke(n,13)^Ke(n,22))+Tc(n,s,i)|0;S=w,w=d,d=c,c=o+L|0,o=i,i=s,s=n,n=L+I|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,c=c+this.E|0,d=d+this.F|0,w=w+this.G|0,S=S+this.H|0,this.set(n,s,i,o,c,d,w,S)}roundClean(){on.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ii=uo(()=>new Pu);var pe={};function Je(r,t,e){return t<=r&&r<=e}function Er(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function qu(r){for(var t=String(r),e=t.length,n=0,s=[];n<e;){var i=t.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===e-1)s.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var c=i&1023,d=o&1023;s.push(65536+(c<<10)+d),n+=1}else s.push(65533)}n+=1}return s}function Du(r){for(var t="",e=0;e<r.length;++e){var n=r[e];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var Sr=-1;function ki(r){this.tokens=[].slice.call(r)}ki.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Sr},prepend:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.push(t.shift());else this.tokens.push(r)}};var Un=-1;function Mi(r,t){if(r)throw TypeError("Decoder error");return t||65533}var Br="utf-8";function _r(r,t){if(!(this instanceof _r))return new _r(r,t);if(r=r!==void 0?String(r).toLowerCase():Br,r!==Br)throw new Error("Encoding not supported. Only utf-8 is supported");t=Er(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}_r.prototype={decode:function(t,e){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),e=Er(e),this._streaming||(this._decoder=new zu({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new ki(n),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==Un);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===Un)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),Du(i)}};function Ar(r,t){if(!(this instanceof Ar))return new Ar(r,t);if(r=r!==void 0?String(r).toLowerCase():Br,r!==Br)throw new Error("Encoding not supported. Only utf-8 is supported");t=Er(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Ar.prototype={encode:function(t,e){t=t?String(t):"",e=Er(e),this._streaming||(this._encoder=new $u(this._options)),this._streaming=!!e.stream;for(var n=[],s=new ki(qu(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Un);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Un;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function zu(r){var t=r.fatal,e=0,n=0,s=0,i=128,o=191;this.handler=function(c,d){if(d===Sr&&s!==0)return s=0,Mi(t);if(d===Sr)return Un;if(s===0){if(Je(d,0,127))return d;if(Je(d,194,223))s=1,e=d-192;else if(Je(d,224,239))d===224&&(i=160),d===237&&(o=159),s=2,e=d-224;else if(Je(d,240,244))d===240&&(i=144),d===244&&(o=143),s=3,e=d-240;else return Mi(t);return e=e<<6*s,null}if(!Je(d,i,o))return e=s=n=0,i=128,o=191,c.prepend(d),Mi(t);if(i=128,o=191,n+=1,e+=d-128<<6*(s-n),n!==s)return null;var w=e;return e=s=n=0,w}}function $u(r){r.fatal,this.handler=function(t,e){if(e===Sr)return Un;if(Je(e,0,127))return e;var n,s;Je(e,128,2047)?(n=1,s=192):Je(e,2048,65535)?(n=2,s=224):Je(e,65536,1114111)&&(n=3,s=240);for(var i=[(e>>6*n)+s];n>0;){var o=e>>6*(n-1);i.push(128|o&63),n-=1}return i}}var Hu=Object.freeze({__proto__:null,TextEncoder:Ar,TextDecoder:_r}),Ku=oi(Hu),Wu=Be&&Be.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),ju=Be&&Be.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),We=Be&&Be.__decorate||function(r,t,e,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,n);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(i=(s<3?o(i):s>3?o(t,e,i):o(t,e))||i);return s>3&&i&&Object.defineProperty(t,e,i),i},Gu=Be&&Be.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.hasOwnProperty.call(r,e)&&Wu(t,r,e);return ju(t,r),t},To=Be&&Be.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pe,"__esModule",{value:!0});var Co=pe.deserializeUnchecked=qo=pe.deserialize=Po=pe.serialize=pe.BinaryReader=pe.BinaryWriter=pe.BorshError=pe.baseDecode=pe.baseEncode=void 0;const an=To(_i.exports),Uo=To(jt),Vu=Gu(Ku),Zu=typeof TextDecoder!="function"?Vu.TextDecoder:TextDecoder,Yu=new Zu("utf-8",{fatal:!0});function Xu(r){return typeof r=="string"&&(r=Buffer.from(r,"utf8")),Uo.default.encode(Buffer.from(r))}pe.baseEncode=Xu;function Ju(r){return Buffer.from(Uo.default.decode(r))}pe.baseDecode=Ju;const Ri=1024;class _e extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}pe.BorshError=_e;class No{constructor(){this.buf=Buffer.alloc(Ri),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(Ri)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new an.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new an.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new an.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new an.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(Ri)]),this.length+=t.length}writeString(t){this.maybeResize();const e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const n of t)this.maybeResize(),e(n)}toArray(){return this.buf.subarray(0,this.length)}}pe.BinaryWriter=No;function je(r,t,e){const n=e.value;e.value=function(...s){try{return n.apply(this,s)}catch(i){if(i instanceof RangeError){const o=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new _e("Reached the end of buffer when deserializing")}throw i}}}class Le{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new an.default(t,"le")}readU128(){const t=this.readBuffer(16);return new an.default(t,"le")}readU256(){const t=this.readBuffer(32);return new an.default(t,"le")}readU512(){const t=this.readBuffer(64);return new an.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new _e(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return Yu.decode(e)}catch(n){throw new _e(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),n=Array();for(let s=0;s<e;++s)n.push(t());return n}}We([je],Le.prototype,"readU8",null),We([je],Le.prototype,"readU16",null),We([je],Le.prototype,"readU32",null),We([je],Le.prototype,"readU64",null),We([je],Le.prototype,"readU128",null),We([je],Le.prototype,"readU256",null),We([je],Le.prototype,"readU512",null),We([je],Le.prototype,"readString",null),We([je],Le.prototype,"readFixedArray",null),We([je],Le.prototype,"readArray",null),pe.BinaryReader=Le;function Fo(r){return r.charAt(0).toUpperCase()+r.slice(1)}function wn(r,t,e,n,s){try{if(typeof n=="string")s[`write${Fo(n)}`](e);else if(n instanceof Array)if(typeof n[0]=="number"){if(e.length!==n[0])throw new _e(`Expecting byte array of length ${n[0]}, but got ${e.length} bytes`);s.writeFixedArray(e)}else if(n.length===2&&typeof n[1]=="number"){if(e.length!==n[1])throw new _e(`Expecting byte array of length ${n[1]}, but got ${e.length} bytes`);for(let i=0;i<n[1];i++)wn(r,null,e[i],n[0],s)}else s.writeArray(e,i=>{wn(r,t,i,n[0],s)});else if(n.kind!==void 0)switch(n.kind){case"option":{e==null?s.writeU8(0):(s.writeU8(1),wn(r,t,e,n.type,s));break}case"map":{s.writeU32(e.size),e.forEach((i,o)=>{wn(r,t,o,n.key,s),wn(r,t,i,n.value,s)});break}default:throw new _e(`FieldType ${n} unrecognized`)}else Oo(r,e,s)}catch(i){throw i instanceof _e&&i.addToFieldPath(t),i}}function Oo(r,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const n=r.get(t.constructor);if(!n)throw new _e(`Class ${t.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([s,i])=>{wn(r,s,t[s],i,e)});else if(n.kind==="enum"){const s=t[n.field];for(let i=0;i<n.values.length;++i){const[o,c]=n.values[i];if(o===s){e.writeU8(i),wn(r,o,t[o],c,e);break}}}else throw new _e(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function Qu(r,t,e=No){const n=new e;return Oo(r,t,n),n.toArray()}var Po=pe.serialize=Qu;function bn(r,t,e,n){try{if(typeof e=="string")return n[`read${Fo(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return n.readFixedArray(e[0]);if(typeof e[1]=="number"){const s=[];for(let i=0;i<e[1];i++)s.push(bn(r,null,e[0],n));return s}else return n.readArray(()=>bn(r,t,e[0],n))}if(e.kind==="option")return n.readU8()?bn(r,t,e.type,n):void 0;if(e.kind==="map"){let s=new Map;const i=n.readU32();for(let o=0;o<i;o++){const c=bn(r,t,e.key,n),d=bn(r,t,e.value,n);s.set(c,d)}return s}return Li(r,e,n)}catch(s){throw s instanceof _e&&s.addToFieldPath(t),s}}function Li(r,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const n=r.get(t);if(!n)throw new _e(`Class ${t.name} is missing in schema`);if(n.kind==="struct"){const s={};for(const[i,o]of r.get(t).fields)s[i]=bn(r,i,o,e);return new t(s)}if(n.kind==="enum"){const s=e.readU8();if(s>=n.values.length)throw new _e(`Enum index: ${s} is out of range`);const[i,o]=n.values[s],c=bn(r,i,o,e);return new t({[i]:c})}throw new _e(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function tf(r,t,e,n=Le){const s=new n(e),i=Li(r,t,s);if(s.offset<e.length)throw new _e(`Unexpected ${e.length-s.offset} bytes after deserialized data`);return i}var qo=pe.deserialize=tf;function ef(r,t,e,n=Le){const s=new n(e);return Li(r,t,s)}Co=pe.deserializeUnchecked=ef;var U={};Object.defineProperty(U,"__esModule",{value:!0}),U.s16=U.s8=U.nu64be=U.u48be=U.u40be=U.u32be=U.u24be=U.u16be=ge=U.nu64=U.u48=U.u40=nt=U.u32=U.u24=Pe=U.u16=Et=U.u8=xn=U.offset=U.greedy=U.Constant=U.UTF8=U.CString=U.Blob=U.Boolean=U.BitField=U.BitStructure=U.VariantLayout=U.Union=U.UnionLayoutDiscriminator=U.UnionDiscriminator=U.Structure=U.Sequence=U.DoubleBE=U.Double=U.FloatBE=U.Float=U.NearInt64BE=U.NearInt64=U.NearUInt64BE=U.NearUInt64=U.IntBE=U.Int=U.UIntBE=U.UInt=U.OffsetLayout=U.GreedyCount=U.ExternalLayout=U.bindConstructorLayout=U.nameWithProperty=U.Layout=U.uint8ArrayToBuffer=U.checkUint8Array=void 0,U.constant=U.utf8=U.cstr=Ct=U.blob=U.unionLayoutDiscriminator=U.union=ye=U.seq=U.bits=Q=U.struct=U.f64be=U.f64=U.f32be=U.f32=U.ns64be=U.s48be=U.s40be=U.s32be=U.s24be=U.s16be=Te=U.ns64=U.s48=U.s40=U.s32=U.s24=void 0;const Ti=dt;function Nn(r){if(!(r instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}U.checkUint8Array=Nn;function xt(r){return Nn(r),Ti.Buffer.from(r.buffer,r.byteOffset,r.length)}U.uint8ArrayToBuffer=xt;class At{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}U.Layout=At;function Ci(r,t){return t.property?r+"["+t.property+"]":r}U.nameWithProperty=Ci;function nf(r,t){if(typeof r!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(r,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof At))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");r.layout_=t,t.boundConstructor_=r,t.makeDestinationObject=()=>new r,Object.defineProperty(r.prototype,"encode",{value(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(r,"decode",{value(e,n){return t.decode(e,n)},writable:!0})}U.bindConstructorLayout=nf;class Ie extends At{isCount(){throw new Error("ExternalLayout is abstract")}}U.ExternalLayout=Ie;class Do extends Ie{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){Nn(t);const n=t.length-e;return Math.floor(n/this.elementSpan)}encode(t,e,n){return 0}}U.GreedyCount=Do;class Ui extends Ie{constructor(t,e=0,n){if(!(t instanceof At))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Oe||this.layout instanceof ze}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,n=0){return this.layout.encode(t,e,n+this.offset)}}U.OffsetLayout=Ui;class Oe extends At{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return xt(t).readUIntLE(e,this.span)}encode(t,e,n=0){return xt(e).writeUIntLE(t,n,this.span),this.span}}U.UInt=Oe;class ze extends At{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return xt(t).readUIntBE(e,this.span)}encode(t,e,n=0){return xt(e).writeUIntBE(t,n,this.span),this.span}}U.UIntBE=ze;class vn extends At{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return xt(t).readIntLE(e,this.span)}encode(t,e,n=0){return xt(e).writeIntLE(t,n,this.span),this.span}}U.Int=vn;class Fn extends At{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return xt(t).readIntBE(e,this.span)}encode(t,e,n=0){return xt(e).writeIntBE(t,n,this.span),this.span}}U.IntBE=Fn;const Ni=Math.pow(2,32);function Ir(r){const t=Math.floor(r/Ni),e=r-t*Ni;return{hi32:t,lo32:e}}function kr(r,t){return r*Ni+t}class zo extends At{constructor(t){super(8,t)}decode(t,e=0){const n=xt(t),s=n.readUInt32LE(e),i=n.readUInt32LE(e+4);return kr(i,s)}encode(t,e,n=0){const s=Ir(t),i=xt(e);return i.writeUInt32LE(s.lo32,n),i.writeUInt32LE(s.hi32,n+4),8}}U.NearUInt64=zo;class $o extends At{constructor(t){super(8,t)}decode(t,e=0){const n=xt(t),s=n.readUInt32BE(e),i=n.readUInt32BE(e+4);return kr(s,i)}encode(t,e,n=0){const s=Ir(t),i=xt(e);return i.writeUInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}}U.NearUInt64BE=$o;class Ho extends At{constructor(t){super(8,t)}decode(t,e=0){const n=xt(t),s=n.readUInt32LE(e),i=n.readInt32LE(e+4);return kr(i,s)}encode(t,e,n=0){const s=Ir(t),i=xt(e);return i.writeUInt32LE(s.lo32,n),i.writeInt32LE(s.hi32,n+4),8}}U.NearInt64=Ho;class Ko extends At{constructor(t){super(8,t)}decode(t,e=0){const n=xt(t),s=n.readInt32BE(e),i=n.readUInt32BE(e+4);return kr(s,i)}encode(t,e,n=0){const s=Ir(t),i=xt(e);return i.writeInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}}U.NearInt64BE=Ko;class Wo extends At{constructor(t){super(4,t)}decode(t,e=0){return xt(t).readFloatLE(e)}encode(t,e,n=0){return xt(e).writeFloatLE(t,n),4}}U.Float=Wo;class jo extends At{constructor(t){super(4,t)}decode(t,e=0){return xt(t).readFloatBE(e)}encode(t,e,n=0){return xt(e).writeFloatBE(t,n),4}}U.FloatBE=jo;class Go extends At{constructor(t){super(8,t)}decode(t,e=0){return xt(t).readDoubleLE(e)}encode(t,e,n=0){return xt(e).writeDoubleLE(t,n),8}}U.Double=Go;class Vo extends At{constructor(t){super(8,t)}decode(t,e=0){return xt(t).readDoubleBE(e)}encode(t,e,n=0){return xt(e).writeDoubleBE(t,n),8}}U.DoubleBE=Vo;class Zo extends At{constructor(t,e,n){if(!(t instanceof At))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof Ie&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(e instanceof Ie)&&0<t.span&&(s=e*t.span),super(s,n),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0,s=this.count;if(s instanceof Ie&&(s=s.decode(t,e)),0<this.elementLayout.span)n=s*this.elementLayout.span;else{let i=0;for(;i<s;)n+=this.elementLayout.getSpan(t,e+n),++i}return n}decode(t,e=0){const n=[];let s=0,i=this.count;for(i instanceof Ie&&(i=i.decode(t,e));s<i;)n.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),s+=1;return n}encode(t,e,n=0){const s=this.elementLayout,i=t.reduce((o,c)=>o+s.encode(c,e,n+o),0);return this.count instanceof Ie&&this.count.encode(t.length,e,n),i}}U.Sequence=Zo;class Yo extends At{constructor(t,e,n){if(!(Array.isArray(t)&&t.reduce((i,o)=>i&&o instanceof At,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&n===void 0&&(n=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=t.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,e),this.fields=t,this.decodePrefixes=!!n}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((s,i)=>{const o=i.getSpan(t,e);return e+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return n}decode(t,e=0){Nn(t);const n=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(n[s.property]=s.decode(t,e)),e+=s.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return n}encode(t,e,n=0){const s=n;let i=0,o=0;for(const c of this.fields){let d=c.span;if(o=0<d?d:0,c.property!==void 0){const w=t[c.property];w!==void 0&&(o=c.encode(w,e,n),0>d&&(d=c.getSpan(e,n)))}i=n,n+=d}return i+o-s}fromArray(t){const e=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<t.length&&(e[n.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const n of this.fields){if(n.property===t)return e;0>n.span?e=-1:0<=e&&(e+=n.span)}}}U.Structure=Yo;class Fi{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,n){throw new Error("UnionDiscriminator is abstract")}}U.UnionDiscriminator=Fi;class Mr extends Fi{constructor(t,e){if(!(t instanceof Ie&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,n){return this.layout.encode(t,e,n)}}U.UnionLayoutDiscriminator=Mr;class Oi extends At{constructor(t,e,n){let s;if(t instanceof Oe||t instanceof ze)s=new Mr(new Ui(t));else if(t instanceof Ie&&t.isCount())s=new Mr(t);else if(t instanceof Fi)s=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof At))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof Oe||t instanceof ze)&&(i+=s.layout.span)),super(i,n),this.discriminator=s,this.usesPrefixDiscriminator=t instanceof Oe||t instanceof ze,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(c){return o(c)},this.configGetSourceVariant=function(c){o=c.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const n=this.getVariant(t,e);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const n=this.registry[e];if(n.property&&Object.prototype.hasOwnProperty.call(t,n.property))return n}throw new Error("unable to infer src variant")}decode(t,e=0){let n;const s=this.discriminator,i=s.decode(t,e),o=this.registry[i];if(o===void 0){const c=this.defaultLayout;let d=0;this.usesPrefixDiscriminator&&(d=s.layout.span),n=this.makeDestinationObject(),n[s.property]=i,n[c.property]=c.decode(t,e+d)}else n=o.decode(t,e);return n}encode(t,e,n=0){const s=this.getSourceVariant(t);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let c=0;return this.usesPrefixDiscriminator&&(c=i.layout.span),i.encode(t[i.property],e,n),c+o.encode(t[o.property],e,n+c)}return s.encode(t,e,n)}addVariant(t,e,n){const s=new Xo(this,t,e,n);return this.registry[t]=s,s}getVariant(t,e=0){let n;return t instanceof Uint8Array?n=this.discriminator.decode(t,e):n=t,this.registry[n]}}U.Union=Oi;class Xo extends At{constructor(t,e,n,s){if(!(t instanceof Oi))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&s===void 0&&(s=n,n=null),n){if(!(n instanceof At))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=n?n.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,s),this.union=t,this.variant=e,this.layout=n||null}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(t,e+n)),n+s}decode(t,e=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,e+s):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,e,n=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,n);let i=s;if(this.layout&&(this.layout.encode(t[this.property],e,n+s),i+=this.layout.getSpan(e,n+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}U.VariantLayout=Xo;function On(r){return 0>r&&(r+=4294967296),r}class Pi extends At{constructor(t,e,n){if(!(t instanceof Oe||t instanceof ze))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&n===void 0&&(n=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,n),this.word=t,this.msb=!!e,this.fields=[];let s=0;this._packedSetValue=function(i){return s=On(i),this},this._packedGetValue=function(){return s}}decode(t,e=0){const n=this.makeDestinationObject(),s=this.word.decode(t,e);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(n[i.property]=i.decode(t));return n}encode(t,e,n=0){const s=this.word.decode(e,n);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const o=t[i.property];o!==void 0&&i.encode(o)}return this.word.encode(this._packedGetValue(),e,n)}addField(t,e){const n=new qi(this,t,e);return this.fields.push(n),n}addBoolean(t){const e=new Jo(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}U.BitStructure=Pi;class qi{constructor(t,e,n){if(!(t instanceof Pi))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const s=8*t.span,i=t.fields.reduce((o,c)=>o+c.bits,0);if(e+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-e),this.wordMask=On(this.valueMask<<this.start),this.property=n}decode(t,e){const n=this.container._packedGetValue();return On(n&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==On(t&this.valueMask))throw new TypeError(Ci("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),n=On(t<<this.start);this.container._packedSetValue(On(e&~this.wordMask)|n)}}U.BitField=qi;class Jo extends qi{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}}U.Boolean=Jo;class Qo extends At{constructor(t,e){if(!(t instanceof Ie&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof Ie||(n=t),super(n,e),this.length=t}getSpan(t,e){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),n}decode(t,e=0){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),xt(t).slice(e,e+n)}encode(t,e,n){let s=this.length;if(this.length instanceof Ie&&(s=t.length),!(t instanceof Uint8Array&&s===t.length))throw new TypeError(Ci("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(n+s>e.length)throw new RangeError("encoding overruns Uint8Array");const i=xt(t);return xt(e).write(i.toString("hex"),n,s,"hex"),this.length instanceof Ie&&this.length.encode(s,e,n),s}}U.Blob=Qo;class ta extends At{constructor(t){super(-1,t)}getSpan(t,e=0){Nn(t);let n=e;for(;n<t.length&&t[n]!==0;)n+=1;return 1+n-e}decode(t,e=0){const n=this.getSpan(t,e);return xt(t).slice(e,e+n-1).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));const s=Ti.Buffer.from(t,"utf8"),i=s.length;if(n+i>e.length)throw new RangeError("encoding overruns Buffer");const o=xt(e);return s.copy(o,n),o[n+i]=0,i+1}}U.CString=ta;class ea extends At{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return Nn(t),t.length-e}decode(t,e=0){const n=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return xt(t).slice(e,e+n).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));const s=Ti.Buffer.from(t,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>e.length)throw new RangeError("encoding overruns Buffer");return s.copy(xt(e),n),i}}U.UTF8=ea;class na extends At{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,n){return 0}}U.Constant=na,U.greedy=(r,t)=>new Do(r,t);var xn=U.offset=(r,t,e)=>new Ui(r,t,e),Et=U.u8=r=>new Oe(1,r),Pe=U.u16=r=>new Oe(2,r);U.u24=r=>new Oe(3,r);var nt=U.u32=r=>new Oe(4,r);U.u40=r=>new Oe(5,r),U.u48=r=>new Oe(6,r);var ge=U.nu64=r=>new zo(r);U.u16be=r=>new ze(2,r),U.u24be=r=>new ze(3,r),U.u32be=r=>new ze(4,r),U.u40be=r=>new ze(5,r),U.u48be=r=>new ze(6,r),U.nu64be=r=>new $o(r),U.s8=r=>new vn(1,r),U.s16=r=>new vn(2,r),U.s24=r=>new vn(3,r),U.s32=r=>new vn(4,r),U.s40=r=>new vn(5,r),U.s48=r=>new vn(6,r);var Te=U.ns64=r=>new Ho(r);U.s16be=r=>new Fn(2,r),U.s24be=r=>new Fn(3,r),U.s32be=r=>new Fn(4,r),U.s40be=r=>new Fn(5,r),U.s48be=r=>new Fn(6,r),U.ns64be=r=>new Ko(r),U.f32=r=>new Wo(r),U.f32be=r=>new jo(r),U.f64=r=>new Go(r),U.f64be=r=>new Vo(r);var Q=U.struct=(r,t,e)=>new Yo(r,t,e);U.bits=(r,t,e)=>new Pi(r,t,e);var ye=U.seq=(r,t,e)=>new Zo(r,t,e);U.union=(r,t,e)=>new Oi(r,t,e),U.unionLayoutDiscriminator=(r,t)=>new Mr(r,t);var Ct=U.blob=(r,t)=>new Qo(r,t);U.cstr=r=>new ta(r),U.utf8=(r,t)=>new ea(r,t),U.constant=(r,t)=>new na(r,t);var Qn={};Object.defineProperty(Qn,"__esModule",{value:!0});function rf(r){{const t=Buffer.from(r);t.reverse();const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}var sf=Qn.toBigIntLE=rf;function of(r){{const t=r.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}Qn.toBigIntBE=of;function af(r,t){{const e=r.toString(16),n=Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return n.reverse(),n}}var cf=Qn.toBufferLE=af;function uf(r,t){{const e=r.toString(16);return Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}}Qn.toBufferBE=uf;class ff extends TypeError{constructor(t,e){let n;const{message:s,...i}=t,{path:o}=t,c=o.length===0?s:"At path: "+o.join(".")+" -- "+s;super(c),Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var d;return(d=n)!=null?d:n=[t,...e()]}}}function hf(r){return cn(r)&&typeof r[Symbol.iterator]=="function"}function cn(r){return typeof r=="object"&&r!=null}function $e(r){return typeof r=="string"?JSON.stringify(r):""+r}function lf(r){const{done:t,value:e}=r.next();return t?void 0:e}function df(r,t,e,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:s,branch:i}=t,{type:o}=e,{refinement:c,message:d="Expected a value of type `"+o+"`"+(c?" with refinement `"+c+"`":"")+", but received: `"+$e(n)+"`"}=r;return{value:n,type:o,refinement:c,key:s[s.length-1],path:s,branch:i,...r,message:d}}function*ra(r,t,e,n){hf(r)||(r=[r]);for(const s of r){const i=df(s,t,e,n);i&&(yield i)}}function*Di(r,t,e={}){const{path:n=[],branch:s=[r],coerce:i=!1,mask:o=!1}=e,c={path:n,branch:s};if(i&&(r=t.coercer(r,c),o&&t.type!=="type"&&cn(t.schema)&&cn(r)&&!Array.isArray(r)))for(const w in r)t.schema[w]===void 0&&delete r[w];let d=!0;for(const w of t.validator(r,c))d=!1,yield[w,void 0];for(let[w,S,_]of t.entries(r,c)){const N=Di(S,_,{path:w===void 0?n:[...n,w],branch:w===void 0?s:[...s,S],coerce:i,mask:o});for(const L of N)L[0]?(d=!1,yield[L[0],void 0]):i&&(S=L[1],w===void 0?r=S:r instanceof Map?r.set(w,S):r instanceof Set?r.add(S):cn(r)&&(r[w]=S))}if(d)for(const w of t.refiner(r,c))d=!1,yield[w,void 0];d&&(yield[void 0,r])}class Ge{constructor(t){const{type:e,schema:n,validator:s,refiner:i,coercer:o=d=>d,entries:c=function*(){}}=t;this.type=e,this.schema=n,this.entries=c,this.coercer=o,s?this.validator=(d,w)=>{const S=s(d,w);return ra(S,w,this,d)}:this.validator=()=>[],i?this.refiner=(d,w)=>{const S=i(d,w);return ra(S,w,this,d)}:this.refiner=()=>[]}assert(t){return pf(t,this)}create(t){return G(t,this)}is(t){return ia(t,this)}mask(t){return gf(t,this)}validate(t,e={}){return tr(t,this,e)}}function pf(r,t){const e=tr(r,t);if(e[0])throw e[0]}function G(r,t){const e=tr(r,t,{coerce:!0});if(e[0])throw e[0];return e[1]}function gf(r,t){const e=tr(r,t,{coerce:!0,mask:!0});if(e[0])throw e[0];return e[1]}function ia(r,t){return!tr(r,t)[0]}function tr(r,t,e={}){const n=Di(r,t,e),s=lf(n);return s[0]?[new ff(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function En(r,t){return new Ge({type:r,schema:null,validator:t})}function mf(){return En("any",()=>!0)}function Z(r){return new Ge({type:"array",schema:r,*entries(t){if(r&&Array.isArray(t))for(const[e,n]of t.entries())yield[e,n,r]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+$e(t)}})}function Ve(){return En("boolean",r=>typeof r=="boolean")}function zi(r){return En("instance",t=>t instanceof r||"Expected a `"+r.name+"` instance, but received: "+$e(t))}function $t(r){const t=$e(r),e=typeof r;return new Ge({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?r:null,validator(n){return n===r||"Expected the literal `"+t+"`, but received: "+$e(n)}})}function yf(){return En("never",()=>!1)}function V(r){return new Ge({...r,validator:(t,e)=>t===null||r.validator(t,e),refiner:(t,e)=>t===null||r.refiner(t,e)})}function C(){return En("number",r=>typeof r=="number"&&!isNaN(r)||"Expected a number, but received: "+$e(r))}function ot(r){return new Ge({...r,validator:(t,e)=>t===void 0||r.validator(t,e),refiner:(t,e)=>t===void 0||r.refiner(t,e)})}function sa(r,t){return new Ge({type:"record",schema:null,*entries(e){if(cn(e))for(const n in e){const s=e[n];yield[n,n,r],yield[n,s,t]}},validator(e){return cn(e)||"Expected an object, but received: "+$e(e)}})}function K(){return En("string",r=>typeof r=="string"||"Expected a string, but received: "+$e(r))}function $i(r){const t=yf();return new Ge({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const n=Math.max(r.length,e.length);for(let s=0;s<n;s++)yield[s,e[s],r[s]||t]}},validator(e){return Array.isArray(e)||"Expected an array, but received: "+$e(e)}})}function q(r){const t=Object.keys(r);return new Ge({type:"type",schema:r,*entries(e){if(cn(e))for(const n of t)yield[n,e[n],r[n]]},validator(e){return cn(e)||"Expected an object, but received: "+$e(e)}})}function ke(r){const t=r.map(e=>e.type).join(" | ");return new Ge({type:"union",schema:null,validator(e,n){const s=[];for(const i of r){const[...o]=Di(e,i,n),[c]=o;if(c[0])for(const[d]of o)d&&s.push(d);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+$e(e),...s]}})}function er(){return En("unknown",()=>!0)}function nr(r,t,e){return new Ge({...r,coercer:(n,s)=>ia(n,t)?r.coercer(e(n,s),s):r.coercer(n,s)})}var Rr,wf=new Uint8Array(16);function oa(){if(!Rr&&(Rr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Rr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Rr(wf)}var bf=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Lr(r){return typeof r=="string"&&bf.test(r)}for(var me=[],Hi=0;Hi<256;++Hi)me.push((Hi+256).toString(16).substr(1));function Tr(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(me[r[t+0]]+me[r[t+1]]+me[r[t+2]]+me[r[t+3]]+"-"+me[r[t+4]]+me[r[t+5]]+"-"+me[r[t+6]]+me[r[t+7]]+"-"+me[r[t+8]]+me[r[t+9]]+"-"+me[r[t+10]]+me[r[t+11]]+me[r[t+12]]+me[r[t+13]]+me[r[t+14]]+me[r[t+15]]).toLowerCase();if(!Lr(e))throw TypeError("Stringified UUID is invalid");return e}var aa,Ki,Wi=0,ji=0;function vf(r,t,e){var n=t&&e||0,s=t||new Array(16);r=r||{};var i=r.node||aa,o=r.clockseq!==void 0?r.clockseq:Ki;if(i==null||o==null){var c=r.random||(r.rng||oa)();i==null&&(i=aa=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),o==null&&(o=Ki=(c[6]<<8|c[7])&16383)}var d=r.msecs!==void 0?r.msecs:Date.now(),w=r.nsecs!==void 0?r.nsecs:ji+1,S=d-Wi+(w-ji)/1e4;if(S<0&&r.clockseq===void 0&&(o=o+1&16383),(S<0||d>Wi)&&r.nsecs===void 0&&(w=0),w>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Wi=d,ji=w,Ki=o,d+=122192928e5;var _=((d&268435455)*1e4+w)%4294967296;s[n++]=_>>>24&255,s[n++]=_>>>16&255,s[n++]=_>>>8&255,s[n++]=_&255;var N=d/4294967296*1e4&268435455;s[n++]=N>>>8&255,s[n++]=N&255,s[n++]=N>>>24&15|16,s[n++]=N>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(var L=0;L<6;++L)s[n+L]=i[L];return t||Tr(s)}function ca(r){if(!Lr(r))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(r.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(r.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(r.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(r.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function xf(r){r=unescape(encodeURIComponent(r));for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e));return t}var Ef="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Sf="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function ua(r,t,e){function n(s,i,o,c){if(typeof s=="string"&&(s=xf(s)),typeof i=="string"&&(i=ca(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var d=new Uint8Array(16+s.length);if(d.set(i),d.set(s,i.length),d=e(d),d[6]=d[6]&15|t,d[8]=d[8]&63|128,o){c=c||0;for(var w=0;w<16;++w)o[c+w]=d[w];return o}return Tr(d)}try{n.name=r}catch{}return n.DNS=Ef,n.URL=Sf,n}function Bf(r){if(typeof r=="string"){var t=unescape(encodeURIComponent(r));r=new Uint8Array(t.length);for(var e=0;e<t.length;++e)r[e]=t.charCodeAt(e)}return _f(Af(If(r),r.length*8))}function _f(r){for(var t=[],e=r.length*32,n="0123456789abcdef",s=0;s<e;s+=8){var i=r[s>>5]>>>s%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);t.push(o)}return t}function fa(r){return(r+64>>>9<<4)+14+1}function Af(r,t){r[t>>5]|=128<<t%32,r[fa(t)-1]=t;for(var e=1732584193,n=-271733879,s=-1732584194,i=271733878,o=0;o<r.length;o+=16){var c=e,d=n,w=s,S=i;e=we(e,n,s,i,r[o],7,-680876936),i=we(i,e,n,s,r[o+1],12,-389564586),s=we(s,i,e,n,r[o+2],17,606105819),n=we(n,s,i,e,r[o+3],22,-1044525330),e=we(e,n,s,i,r[o+4],7,-176418897),i=we(i,e,n,s,r[o+5],12,1200080426),s=we(s,i,e,n,r[o+6],17,-1473231341),n=we(n,s,i,e,r[o+7],22,-45705983),e=we(e,n,s,i,r[o+8],7,1770035416),i=we(i,e,n,s,r[o+9],12,-1958414417),s=we(s,i,e,n,r[o+10],17,-42063),n=we(n,s,i,e,r[o+11],22,-1990404162),e=we(e,n,s,i,r[o+12],7,1804603682),i=we(i,e,n,s,r[o+13],12,-40341101),s=we(s,i,e,n,r[o+14],17,-1502002290),n=we(n,s,i,e,r[o+15],22,1236535329),e=be(e,n,s,i,r[o+1],5,-165796510),i=be(i,e,n,s,r[o+6],9,-1069501632),s=be(s,i,e,n,r[o+11],14,643717713),n=be(n,s,i,e,r[o],20,-373897302),e=be(e,n,s,i,r[o+5],5,-701558691),i=be(i,e,n,s,r[o+10],9,38016083),s=be(s,i,e,n,r[o+15],14,-660478335),n=be(n,s,i,e,r[o+4],20,-405537848),e=be(e,n,s,i,r[o+9],5,568446438),i=be(i,e,n,s,r[o+14],9,-1019803690),s=be(s,i,e,n,r[o+3],14,-187363961),n=be(n,s,i,e,r[o+8],20,1163531501),e=be(e,n,s,i,r[o+13],5,-1444681467),i=be(i,e,n,s,r[o+2],9,-51403784),s=be(s,i,e,n,r[o+7],14,1735328473),n=be(n,s,i,e,r[o+12],20,-1926607734),e=ve(e,n,s,i,r[o+5],4,-378558),i=ve(i,e,n,s,r[o+8],11,-2022574463),s=ve(s,i,e,n,r[o+11],16,1839030562),n=ve(n,s,i,e,r[o+14],23,-35309556),e=ve(e,n,s,i,r[o+1],4,-1530992060),i=ve(i,e,n,s,r[o+4],11,1272893353),s=ve(s,i,e,n,r[o+7],16,-155497632),n=ve(n,s,i,e,r[o+10],23,-1094730640),e=ve(e,n,s,i,r[o+13],4,681279174),i=ve(i,e,n,s,r[o],11,-358537222),s=ve(s,i,e,n,r[o+3],16,-722521979),n=ve(n,s,i,e,r[o+6],23,76029189),e=ve(e,n,s,i,r[o+9],4,-640364487),i=ve(i,e,n,s,r[o+12],11,-421815835),s=ve(s,i,e,n,r[o+15],16,530742520),n=ve(n,s,i,e,r[o+2],23,-995338651),e=xe(e,n,s,i,r[o],6,-198630844),i=xe(i,e,n,s,r[o+7],10,1126891415),s=xe(s,i,e,n,r[o+14],15,-1416354905),n=xe(n,s,i,e,r[o+5],21,-57434055),e=xe(e,n,s,i,r[o+12],6,1700485571),i=xe(i,e,n,s,r[o+3],10,-1894986606),s=xe(s,i,e,n,r[o+10],15,-1051523),n=xe(n,s,i,e,r[o+1],21,-2054922799),e=xe(e,n,s,i,r[o+8],6,1873313359),i=xe(i,e,n,s,r[o+15],10,-30611744),s=xe(s,i,e,n,r[o+6],15,-1560198380),n=xe(n,s,i,e,r[o+13],21,1309151649),e=xe(e,n,s,i,r[o+4],6,-145523070),i=xe(i,e,n,s,r[o+11],10,-1120210379),s=xe(s,i,e,n,r[o+2],15,718787259),n=xe(n,s,i,e,r[o+9],21,-343485551),e=un(e,c),n=un(n,d),s=un(s,w),i=un(i,S)}return[e,n,s,i]}function If(r){if(r.length===0)return[];for(var t=r.length*8,e=new Uint32Array(fa(t)),n=0;n<t;n+=8)e[n>>5]|=(r[n/8]&255)<<n%32;return e}function un(r,t){var e=(r&65535)+(t&65535),n=(r>>16)+(t>>16)+(e>>16);return n<<16|e&65535}function kf(r,t){return r<<t|r>>>32-t}function Cr(r,t,e,n,s,i){return un(kf(un(un(t,r),un(n,i)),s),e)}function we(r,t,e,n,s,i,o){return Cr(t&e|~t&n,r,t,s,i,o)}function be(r,t,e,n,s,i,o){return Cr(t&n|e&~n,r,t,s,i,o)}function ve(r,t,e,n,s,i,o){return Cr(t^e^n,r,t,s,i,o)}function xe(r,t,e,n,s,i,o){return Cr(e^(t|~n),r,t,s,i,o)}var Mf=ua("v3",48,Bf),Rf=Mf;function Lf(r,t,e){r=r||{};var n=r.random||(r.rng||oa)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=n[s];return t}return Tr(n)}function Tf(r,t,e,n){switch(r){case 0:return t&e^~t&n;case 1:return t^e^n;case 2:return t&e^t&n^e&n;case 3:return t^e^n}}function Gi(r,t){return r<<t|r>>>32-t}function Cf(r){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var s=0;s<n.length;++s)r.push(n.charCodeAt(s))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var i=r.length/4+2,o=Math.ceil(i/16),c=new Array(o),d=0;d<o;++d){for(var w=new Uint32Array(16),S=0;S<16;++S)w[S]=r[d*64+S*4]<<24|r[d*64+S*4+1]<<16|r[d*64+S*4+2]<<8|r[d*64+S*4+3];c[d]=w}c[o-1][14]=(r.length-1)*8/Math.pow(2,32),c[o-1][14]=Math.floor(c[o-1][14]),c[o-1][15]=(r.length-1)*8&4294967295;for(var _=0;_<o;++_){for(var N=new Uint32Array(80),L=0;L<16;++L)N[L]=c[_][L];for(var R=16;R<80;++R)N[R]=Gi(N[R-3]^N[R-8]^N[R-14]^N[R-16],1);for(var I=e[0],k=e[1],O=e[2],z=e[3],P=e[4],Y=0;Y<80;++Y){var D=Math.floor(Y/20),$=Gi(I,5)+Tf(D,k,O,z)+P+t[D]+N[Y]>>>0;P=z,z=O,O=Gi(k,30)>>>0,k=I,I=$}e[0]=e[0]+I>>>0,e[1]=e[1]+k>>>0,e[2]=e[2]+O>>>0,e[3]=e[3]+z>>>0,e[4]=e[4]+P>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Uf=ua("v5",80,Cf),Nf=Uf,Ff="00000000-0000-0000-0000-000000000000";function Of(r){if(!Lr(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}var Pf=Object.freeze({__proto__:null,v1:vf,v3:Rf,v4:Lf,v5:Nf,NIL:Ff,version:Of,validate:Lr,stringify:Tr,parse:ca}),ha=oi(Pf);const qf=ha.v4;var Df=function(r,t,e,n){if(typeof r!="string")throw new TypeError(r+" must be a string");n=n||{};const s=typeof n.version=="number"?n.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:r};if(s===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof e>"u"){const o=typeof n.generator=="function"?n.generator:function(){return qf()};i.id=o(i,n)}else s===2&&e===null?n.notificationIdNull&&(i.id=null):i.id=e;return i};const zf=ha.v4,$f=Df,rr=function(r,t){if(!(this instanceof rr))return new rr(r,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return zf()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=r};var Hf=rr;rr.prototype.request=function(r,t,e,n){const s=this;let i=null;const o=Array.isArray(r)&&typeof t=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&r&&typeof r=="object"&&typeof t=="function")n=t,i=r;else{typeof e=="function"&&(n=e,e=void 0);const w=typeof n=="function";try{i=$f(r,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(S){if(w)return n(S);throw S}if(!w)return i}let d;try{d=JSON.stringify(i,this.options.replacer)}catch(w){return n(w)}return this.callServer(d,function(w,S){s._parseResponse(w,S,n)}),i},rr.prototype._parseResponse=function(r,t,e){if(r){e(r);return}if(!t)return e();let n;try{n=JSON.parse(t,this.options.reviver)}catch(s){return e(s)}if(e.length===3)if(Array.isArray(n)){const s=function(o){return typeof o.error<"u"},i=function(o){return!s(o)};return e(null,n.filter(s),n.filter(i))}else return e(null,n.error,n.result);e(null,n)};var la={},Vi={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function s(d,w,S){this.fn=d,this.context=w,this.once=S||!1}function i(d,w,S,_,N){if(typeof S!="function")throw new TypeError("The listener must be a function");var L=new s(S,_||d,N),R=e?e+w:w;return d._events[R]?d._events[R].fn?d._events[R]=[d._events[R],L]:d._events[R].push(L):(d._events[R]=L,d._eventsCount++),d}function o(d,w){--d._eventsCount===0?d._events=new n:delete d._events[w]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var w=[],S,_;if(this._eventsCount===0)return w;for(_ in S=this._events)t.call(S,_)&&w.push(e?_.slice(1):_);return Object.getOwnPropertySymbols?w.concat(Object.getOwnPropertySymbols(S)):w},c.prototype.listeners=function(w){var S=e?e+w:w,_=this._events[S];if(!_)return[];if(_.fn)return[_.fn];for(var N=0,L=_.length,R=new Array(L);N<L;N++)R[N]=_[N].fn;return R},c.prototype.listenerCount=function(w){var S=e?e+w:w,_=this._events[S];return _?_.fn?1:_.length:0},c.prototype.emit=function(w,S,_,N,L,R){var I=e?e+w:w;if(!this._events[I])return!1;var k=this._events[I],O=arguments.length,z,P;if(k.fn){switch(k.once&&this.removeListener(w,k.fn,void 0,!0),O){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,S),!0;case 3:return k.fn.call(k.context,S,_),!0;case 4:return k.fn.call(k.context,S,_,N),!0;case 5:return k.fn.call(k.context,S,_,N,L),!0;case 6:return k.fn.call(k.context,S,_,N,L,R),!0}for(P=1,z=new Array(O-1);P<O;P++)z[P-1]=arguments[P];k.fn.apply(k.context,z)}else{var Y=k.length,D;for(P=0;P<Y;P++)switch(k[P].once&&this.removeListener(w,k[P].fn,void 0,!0),O){case 1:k[P].fn.call(k[P].context);break;case 2:k[P].fn.call(k[P].context,S);break;case 3:k[P].fn.call(k[P].context,S,_);break;case 4:k[P].fn.call(k[P].context,S,_,N);break;default:if(!z)for(D=1,z=new Array(O-1);D<O;D++)z[D-1]=arguments[D];k[P].fn.apply(k[P].context,z)}}return!0},c.prototype.on=function(w,S,_){return i(this,w,S,_,!1)},c.prototype.once=function(w,S,_){return i(this,w,S,_,!0)},c.prototype.removeListener=function(w,S,_,N){var L=e?e+w:w;if(!this._events[L])return this;if(!S)return o(this,L),this;var R=this._events[L];if(R.fn)R.fn===S&&(!N||R.once)&&(!_||R.context===_)&&o(this,L);else{for(var I=0,k=[],O=R.length;I<O;I++)(R[I].fn!==S||N&&!R[I].once||_&&R[I].context!==_)&&k.push(R[I]);k.length?this._events[L]=k.length===1?k[0]:k:o(this,L)}return this},c.prototype.removeAllListeners=function(w){var S;return w?(S=e?e+w:w,this._events[S]&&o(this,S)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=e,c.EventEmitter=c,r.exports=c})(Vi);var Pn={};Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.createError=Pn.DefaultDataPack=void 0;const Kf=new Map([[-32e3,"Event not provided"],[-32600,"Invalid Request"],[-32601,"Method not found"],[-32602,"Invalid params"],[-32603,"Internal error"],[-32604,"Params not found"],[-32605,"Method forbidden"],[-32606,"Event forbidden"],[-32700,"Parse error"]]);class Wf{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}}Pn.DefaultDataPack=Wf;function jf(r,t){const e={code:r,message:Kf.get(r)||"Internal Server Error"};return t&&(e.data=t),e}Pn.createError=jf,Object.defineProperty(la,"__esModule",{value:!0});const Gf=Vi.exports,Vf=Pn;class Zf extends Gf.EventEmitter{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(t,e="ws://localhost:8080",{autoconnect:n=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...c}={},d,w){super(),this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=n,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=c,this.current_reconnects=0,this.generate_request_id=d||(()=>++this.rpc_id),w?this.dataPack=w:this.dataPack=new Vf.DefaultDataPack,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,n,s){return!s&&typeof n=="object"&&(s=n,n=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const c=this.generate_request_id(t,e),d={jsonrpc:"2.0",method:t,params:e||void 0,id:c};this.socket.send(this.dataPack.encode(d),s,w=>{if(w)return o(w);this.queue[c]={promise:[i,o]},n&&(this.queue[c].timeout=setTimeout(()=>{delete this.queue[c],o(new Error("reply timeout"))},n))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((n,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),o=>{if(o)return s(o);n()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const s=[n.notification];if(n.params.constructor===Object)s.push(n.params);else for(let i=0;i<n.params.length;i++)s.push(n.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n?.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",n,s),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}}var Yf=la.default=Zf,da={};Object.defineProperty(da,"__esModule",{value:!0});const Xf=Vi.exports;class Jf extends Xf.EventEmitter{socket;constructor(t,e,n){super(),this.socket=new window.WebSocket(t,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(t,e,n){const s=n||e;try{this.socket.send(t),s()}catch(i){s(i)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,n){this.socket.addEventListener(t,e,n)}}function Qf(r,t){return new Jf(r,t)}var th=da.default=Qf;const eh=[],nh=BigInt(0),ir=BigInt(1),rh=BigInt(2),ih=BigInt(7),sh=BigInt(256),oh=BigInt(113);for(let r=0,t=ir,e=1,n=0;r<24;r++){[e,n]=[n,(2*e+3*n)%5];let s=nh;for(let i=0;i<7;i++)t=(t<<ir^(t>>ih)*oh)%sh,t&rh&&(s^=ir<<(ir<<BigInt(i))-ir);eh.push(s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ah(r){const t=vi(r);Cn(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:n,a:s}=t;if(e){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:ch,hexToBytes:uh}=ou,Sn={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(r){const{Err:t}=Sn;if(r.length<2||r[0]!==2)throw new t("Invalid signature integer tag");const e=r[1],n=r.subarray(2,e+2);if(!e||n.length!==e)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:ch(n),l:r.subarray(e+2)}},toSig(r){const{Err:t}=Sn,e=typeof r=="string"?uh(r):r;Xn(e);let n=e.length;if(n<2||e[0]!=48)throw new t("Invalid signature tag");if(e[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:s,l:i}=Sn._parseInt(e.subarray(2)),{d:o,l:c}=Sn._parseInt(i);if(c.length)throw new t("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(r){const t=w=>Number.parseInt(w[0],16)&8?"00"+w:w,e=w=>{const S=w.toString(16);return S.length&1?`0${S}`:S},n=t(e(r.s)),s=t(e(r.r)),i=n.length/2,o=s.length/2,c=e(i),d=e(o);return`30${e(o+i+4)}02${d}${s}02${c}${n}`}},Qe=BigInt(0),qe=BigInt(1);BigInt(2);const pa=BigInt(3);BigInt(4);function fh(r){const t=ah(r),{Fp:e}=t,n=t.toBytes||((R,I,k)=>{const O=I.toAffine();return mn(Uint8Array.from([4]),e.toBytes(O.x),e.toBytes(O.y))}),s=t.fromBytes||(R=>{const I=R.subarray(1),k=e.fromBytes(I.subarray(0,e.BYTES)),O=e.fromBytes(I.subarray(e.BYTES,2*e.BYTES));return{x:k,y:O}});function i(R){const{a:I,b:k}=t,O=e.sqr(R),z=e.mul(O,R);return e.add(e.add(z,e.mul(R,I)),k)}if(!e.eql(e.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function o(R){return typeof R=="bigint"&&Qe<R&&R<t.n}function c(R){if(!o(R))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function d(R){const{allowedPrivateKeyLengths:I,nByteLength:k,wrapPrivateKey:O,n:z}=t;if(I&&typeof R!="bigint"){if(dn(R)&&(R=pn(R)),typeof R!="string"||!I.includes(R.length))throw new Error("Invalid key");R=R.padStart(k*2,"0")}let P;try{P=typeof R=="bigint"?R:gn(he("private key",R,k))}catch{throw new Error(`private key must be ${k} bytes, hex or bigint, not ${typeof R}`)}return O&&(P=Ot(P,z)),c(P),P}const w=new Map;function S(R){if(!(R instanceof _))throw new Error("ProjectivePoint expected")}class _{constructor(I,k,O){if(this.px=I,this.py=k,this.pz=O,I==null||!e.isValid(I))throw new Error("x required");if(k==null||!e.isValid(k))throw new Error("y required");if(O==null||!e.isValid(O))throw new Error("z required")}static fromAffine(I){const{x:k,y:O}=I||{};if(!I||!e.isValid(k)||!e.isValid(O))throw new Error("invalid affine point");if(I instanceof _)throw new Error("projective point not allowed");const z=P=>e.eql(P,e.ZERO);return z(k)&&z(O)?_.ZERO:new _(k,O,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){const k=e.invertBatch(I.map(O=>O.pz));return I.map((O,z)=>O.toAffine(k[z])).map(_.fromAffine)}static fromHex(I){const k=_.fromAffine(s(he("pointHex",I)));return k.assertValidity(),k}static fromPrivateKey(I){return _.BASE.multiply(d(I))}_setWindowSize(I){this._WINDOW_SIZE=I,w.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:I,y:k}=this.toAffine();if(!e.isValid(I)||!e.isValid(k))throw new Error("bad point: x or y not FE");const O=e.sqr(k),z=i(I);if(!e.eql(O,z))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:I}=this.toAffine();if(e.isOdd)return!e.isOdd(I);throw new Error("Field doesn't support isOdd")}equals(I){S(I);const{px:k,py:O,pz:z}=this,{px:P,py:Y,pz:D}=I,$=e.eql(e.mul(k,D),e.mul(P,z)),X=e.eql(e.mul(O,D),e.mul(Y,z));return $&&X}negate(){return new _(this.px,e.neg(this.py),this.pz)}double(){const{a:I,b:k}=t,O=e.mul(k,pa),{px:z,py:P,pz:Y}=this;let D=e.ZERO,$=e.ZERO,X=e.ZERO,tt=e.mul(z,z),St=e.mul(P,P),wt=e.mul(Y,Y),J=e.mul(z,P);return J=e.add(J,J),X=e.mul(z,Y),X=e.add(X,X),D=e.mul(I,X),$=e.mul(O,wt),$=e.add(D,$),D=e.sub(St,$),$=e.add(St,$),$=e.mul(D,$),D=e.mul(J,D),X=e.mul(O,X),wt=e.mul(I,wt),J=e.sub(tt,wt),J=e.mul(I,J),J=e.add(J,X),X=e.add(tt,tt),tt=e.add(X,tt),tt=e.add(tt,wt),tt=e.mul(tt,J),$=e.add($,tt),wt=e.mul(P,Y),wt=e.add(wt,wt),tt=e.mul(wt,J),D=e.sub(D,tt),X=e.mul(wt,St),X=e.add(X,X),X=e.add(X,X),new _(D,$,X)}add(I){S(I);const{px:k,py:O,pz:z}=this,{px:P,py:Y,pz:D}=I;let $=e.ZERO,X=e.ZERO,tt=e.ZERO;const St=t.a,wt=e.mul(t.b,pa);let J=e.mul(k,P),Bt=e.mul(O,Y),B=e.mul(z,D),a=e.add(k,O),l=e.add(P,Y);a=e.mul(a,l),l=e.add(J,Bt),a=e.sub(a,l),l=e.add(k,z);let g=e.add(P,D);return l=e.mul(l,g),g=e.add(J,B),l=e.sub(l,g),g=e.add(O,z),$=e.add(Y,D),g=e.mul(g,$),$=e.add(Bt,B),g=e.sub(g,$),tt=e.mul(St,l),$=e.mul(wt,B),tt=e.add($,tt),$=e.sub(Bt,tt),tt=e.add(Bt,tt),X=e.mul($,tt),Bt=e.add(J,J),Bt=e.add(Bt,J),B=e.mul(St,B),l=e.mul(wt,l),Bt=e.add(Bt,B),B=e.sub(J,B),B=e.mul(St,B),l=e.add(l,B),J=e.mul(Bt,l),X=e.add(X,J),J=e.mul(g,l),$=e.mul(a,$),$=e.sub($,J),J=e.mul(a,Bt),tt=e.mul(g,tt),tt=e.add(tt,J),new _($,X,tt)}subtract(I){return this.add(I.negate())}is0(){return this.equals(_.ZERO)}wNAF(I){return L.wNAFCached(this,w,I,k=>{const O=e.invertBatch(k.map(z=>z.pz));return k.map((z,P)=>z.toAffine(O[P])).map(_.fromAffine)})}multiplyUnsafe(I){const k=_.ZERO;if(I===Qe)return k;if(c(I),I===qe)return this;const{endo:O}=t;if(!O)return L.unsafeLadder(this,I);let{k1neg:z,k1:P,k2neg:Y,k2:D}=O.splitScalar(I),$=k,X=k,tt=this;for(;P>Qe||D>Qe;)P&qe&&($=$.add(tt)),D&qe&&(X=X.add(tt)),tt=tt.double(),P>>=qe,D>>=qe;return z&&($=$.negate()),Y&&(X=X.negate()),X=new _(e.mul(X.px,O.beta),X.py,X.pz),$.add(X)}multiply(I){c(I);let k=I,O,z;const{endo:P}=t;if(P){const{k1neg:Y,k1:D,k2neg:$,k2:X}=P.splitScalar(k);let{p:tt,f:St}=this.wNAF(D),{p:wt,f:J}=this.wNAF(X);tt=L.constTimeNegate(Y,tt),wt=L.constTimeNegate($,wt),wt=new _(e.mul(wt.px,P.beta),wt.py,wt.pz),O=tt.add(wt),z=St.add(J)}else{const{p:Y,f:D}=this.wNAF(k);O=Y,z=D}return _.normalizeZ([O,z])[0]}multiplyAndAddUnsafe(I,k,O){const z=_.BASE,P=(D,$)=>$===Qe||$===qe||!D.equals(z)?D.multiplyUnsafe($):D.multiply($),Y=P(this,k).add(P(I,O));return Y.is0()?void 0:Y}toAffine(I){const{px:k,py:O,pz:z}=this,P=this.is0();I==null&&(I=P?e.ONE:e.inv(z));const Y=e.mul(k,I),D=e.mul(O,I),$=e.mul(z,I);if(P)return{x:e.ZERO,y:e.ZERO};if(!e.eql($,e.ONE))throw new Error("invZ was invalid");return{x:Y,y:D}}isTorsionFree(){const{h:I,isTorsionFree:k}=t;if(I===qe)return!0;if(k)return k(_,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:I,clearCofactor:k}=t;return I===qe?this:k?k(_,this):this.multiplyUnsafe(t.h)}toRawBytes(I=!0){return this.assertValidity(),n(_,this,I)}toHex(I=!0){return pn(this.toRawBytes(I))}}_.BASE=new _(t.Gx,t.Gy,e.ONE),_.ZERO=new _(e.ZERO,e.ONE,e.ZERO);const N=t.nBitLength,L=Ao(_,t.endo?Math.ceil(N/2):N);return{CURVE:t,ProjectivePoint:_,normPrivateKeyToScalar:d,weierstrassEquation:i,isWithinCurveOrder:o}}function hh(r){const t=vi(r);return Cn(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function lh(r){const t=hh(r),{Fp:e,n}=t,s=e.BYTES+1,i=2*e.BYTES+1;function o(l){return Qe<l&&l<e.ORDER}function c(l){return Ot(l,n)}function d(l){return wi(l,n)}const{ProjectivePoint:w,normPrivateKeyToScalar:S,weierstrassEquation:_,isWithinCurveOrder:N}=fh({...t,toBytes(l,g,x){const y=g.toAffine(),v=e.toBytes(y.x),A=mn;return x?A(Uint8Array.from([g.hasEvenY()?2:3]),v):A(Uint8Array.from([4]),v,e.toBytes(y.y))},fromBytes(l){const g=l.length,x=l[0],y=l.subarray(1);if(g===s&&(x===2||x===3)){const v=gn(y);if(!o(v))throw new Error("Point is not on curve");const A=_(v);let m;try{m=e.sqrt(A)}catch(H){const W=H instanceof Error?": "+H.message:"";throw new Error("Point is not on curve"+W)}const f=(m&qe)===qe;return(x&1)===1!==f&&(m=e.neg(m)),{x:v,y:m}}else if(g===i&&x===4){const v=e.fromBytes(y.subarray(0,e.BYTES)),A=e.fromBytes(y.subarray(e.BYTES,2*e.BYTES));return{x:v,y:A}}else throw new Error(`Point of length ${g} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),L=l=>pn(Tn(l,t.nByteLength));function R(l){const g=n>>qe;return l>g}function I(l){return R(l)?c(-l):l}const k=(l,g,x)=>gn(l.slice(g,x));class O{constructor(g,x,y){this.r=g,this.s=x,this.recovery=y,this.assertValidity()}static fromCompact(g){const x=t.nByteLength;return g=he("compactSignature",g,x*2),new O(k(g,0,x),k(g,x,2*x))}static fromDER(g){const{r:x,s:y}=Sn.toSig(he("DER",g));return new O(x,y)}assertValidity(){if(!N(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!N(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(g){return new O(this.r,this.s,g)}recoverPublicKey(g){const{r:x,s:y,recovery:v}=this,A=X(he("msgHash",g));if(v==null||![0,1,2,3].includes(v))throw new Error("recovery id invalid");const m=v===2||v===3?x+t.n:x;if(m>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const f=v&1?"03":"02",E=w.fromHex(f+L(m)),H=d(m),W=c(-A*H),j=c(y*H),it=w.BASE.multiplyAndAddUnsafe(E,W,j);if(!it)throw new Error("point at infinify");return it.assertValidity(),it}hasHighS(){return R(this.s)}normalizeS(){return this.hasHighS()?new O(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return Rn(this.toDERHex())}toDERHex(){return Sn.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Rn(this.toCompactHex())}toCompactHex(){return L(this.r)+L(this.s)}}const z={isValidPrivateKey(l){try{return S(l),!0}catch{return!1}},normPrivateKeyToScalar:S,randomPrivateKey:()=>{const l=_o(t.n);return yu(t.randomBytes(l),t.n)},precompute(l=8,g=w.BASE){return g._setWindowSize(l),g.multiply(BigInt(3)),g}};function P(l,g=!0){return w.fromPrivateKey(l).toRawBytes(g)}function Y(l){const g=dn(l),x=typeof l=="string",y=(g||x)&&l.length;return g?y===s||y===i:x?y===2*s||y===2*i:l instanceof w}function D(l,g,x=!0){if(Y(l))throw new Error("first arg must be private key");if(!Y(g))throw new Error("second arg must be public key");return w.fromHex(g).multiply(S(l)).toRawBytes(x)}const $=t.bits2int||function(l){const g=gn(l),x=l.length*8-t.nBitLength;return x>0?g>>BigInt(x):g},X=t.bits2int_modN||function(l){return c($(l))},tt=gi(t.nBitLength);function St(l){if(typeof l!="bigint")throw new Error("bigint expected");if(!(Qe<=l&&l<tt))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Tn(l,t.nByteLength)}function wt(l,g,x=J){if(["recovered","canonical"].some(st=>st in x))throw new Error("sign() legacy options not supported");const{hash:y,randomBytes:v}=t;let{lowS:A,prehash:m,extraEntropy:f}=x;A==null&&(A=!0),l=he("msgHash",l),m&&(l=he("prehashed msgHash",y(l)));const E=X(l),H=S(g),W=[St(H),St(E)];if(f!=null&&f!==!1){const st=f===!0?v(e.BYTES):f;W.push(he("extraEntropy",st))}const j=mn(...W),it=E;function rt(st){const Ht=$(st);if(!N(Ht))return;const yt=d(Ht),ht=w.BASE.multiply(Ht).toAffine(),Lt=c(ht.x);if(Lt===Qe)return;const vt=c(yt*c(it+Lt*H));if(vt===Qe)return;let _t=(ht.x===Lt?0:2)|Number(ht.y&qe),Ze=vt;return A&&R(vt)&&(Ze=I(vt),_t^=1),new O(Lt,Ze,_t)}return{seed:j,k2sig:rt}}const J={lowS:t.lowS,prehash:!1},Bt={lowS:t.lowS,prehash:!1};function B(l,g,x=J){const{seed:y,k2sig:v}=wt(l,g,x),A=t;return bo(A.hash.outputLen,A.nByteLength,A.hmac)(y,v)}w.BASE._setWindowSize(8);function a(l,g,x,y=Bt){const v=l;if(g=he("msgHash",g),x=he("publicKey",x),"strict"in y)throw new Error("options.strict was renamed to lowS");const{lowS:A,prehash:m}=y;let f,E;try{if(typeof v=="string"||dn(v))try{f=O.fromDER(v)}catch(ht){if(!(ht instanceof Sn.Err))throw ht;f=O.fromCompact(v)}else if(typeof v=="object"&&typeof v.r=="bigint"&&typeof v.s=="bigint"){const{r:ht,s:Lt}=v;f=new O(ht,Lt)}else throw new Error("PARSE");E=w.fromHex(x)}catch(ht){if(ht.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(A&&f.hasHighS())return!1;m&&(g=t.hash(g));const{r:H,s:W}=f,j=X(g),it=d(W),rt=c(j*it),st=c(H*it),Ht=w.BASE.multiplyAndAddUnsafe(E,rt,st)?.toAffine();return Ht?c(Ht.x)===H:!1}return{CURVE:t,getPublicKey:P,getSharedSecret:D,sign:B,verify:a,ProjectivePoint:w,Signature:O,utils:z}}class ga extends co{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,kc(t);const n=li(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?t.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return mr(this),this.iHash.update(t),this}digestInto(t){mr(this),gr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:c}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=c,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ma=(r,t,e)=>new ga(r,t).update(e).digest();ma.create=(r,t)=>new ga(r,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function dh(r){return{hash:r,hmac:(t,...e)=>ma(r,t,ao(...e)),randomBytes:fo}}function ph(r,t){const e=n=>lh({...r,...dh(n)});return Object.freeze({...e(t),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ya=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),wa=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),gh=BigInt(1),Zi=BigInt(2),ba=(r,t)=>(r+t/Zi)/t;function mh(r){const t=ya,e=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),c=BigInt(44),d=BigInt(88),w=r*r*r%t,S=w*w*r%t,_=Kt(S,e,t)*S%t,N=Kt(_,e,t)*S%t,L=Kt(N,Zi,t)*w%t,R=Kt(L,s,t)*L%t,I=Kt(R,i,t)*R%t,k=Kt(I,c,t)*I%t,O=Kt(k,d,t)*k%t,z=Kt(O,c,t)*I%t,P=Kt(z,e,t)*S%t,Y=Kt(P,o,t)*R%t,D=Kt(Y,n,t)*w%t,$=Kt(D,Zi,t);if(!Yi.eql(Yi.sqr($),r))throw new Error("Cannot find square root");return $}const Yi=So(ya,void 0,void 0,{sqrt:mh}),Xi=ph({a:BigInt(0),b:BigInt(7),Fp:Yi,n:wa,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const t=wa,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-gh*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,o=BigInt("0x100000000000000000000000000000000"),c=ba(i*r,t),d=ba(-n*r,t);let w=Ot(r-c*e-d*s,t),S=Ot(-c*n-d*i,t);const _=w>o,N=S>o;if(_&&(w=t-w),N&&(S=t-S),w>o||S>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:_,k1:w,k2neg:N,k2:S}}}},Ii);BigInt(0),Xi.ProjectivePoint,vr.utils.randomPrivateKey;function va(r){try{return vr.ExtendedPoint.fromHex(r),!0}catch{return!1}}const xa=(r,t)=>vr.sign(r,t.slice(0,32)),yh=vr.verify,qn=r=>dt.Buffer.isBuffer(r)?r:r instanceof Uint8Array?dt.Buffer.from(r.buffer,r.byteOffset,r.byteLength):dt.Buffer.from(r);class wh{constructor(t){Object.assign(this,t)}encode(){return dt.Buffer.from(Po(Ur,this))}static decode(t){return qo(Ur,this,t)}static decodeUnchecked(t){return Co(Ur,this,t)}}const Ur=new Map;var Ea;const bh=32,fn=32;function vh(r){return r._bn!==void 0}let Sa=1;class at extends wh{constructor(t){if(super({}),this._bn=void 0,vh(t))this._bn=t._bn;else{if(typeof t=="string"){const e=jt.decode(t);if(e.length!=fn)throw new Error("Invalid public key input");this._bn=new Lo(e)}else this._bn=new Lo(t);if(this._bn.byteLength()>fn)throw new Error("Invalid public key input")}}static unique(){const t=new at(Sa);return Sa+=1,new at(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return jt.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(dt.Buffer);if(t.length===fn)return t;const e=dt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,n){const s=dt.Buffer.concat([t.toBuffer(),dt.Buffer.from(e),n.toBuffer()]),i=Ii(s);return new at(i)}static createProgramAddressSync(t,e){let n=dt.Buffer.alloc(0);t.forEach(function(i){if(i.length>bh)throw new TypeError("Max seed length exceeded");n=dt.Buffer.concat([n,qn(i)])}),n=dt.Buffer.concat([n,e.toBuffer(),dt.Buffer.from("ProgramDerivedAddress")]);const s=Ii(n);if(va(s))throw new Error("Invalid seeds, address must fall off the curve");return new at(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let n=255,s;for(;n!=0;){try{const i=t.concat(dt.Buffer.from([n]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new at(t);return va(e.toBytes())}}Ea=at,at.default=new Ea("11111111111111111111111111111111"),Ur.set(at,{kind:"struct",fields:[["_bn","u256"]]}),new at("BPFLoader1111111111111111111111111111111111");const Dn=1280-40-8,Ji=127,Nr=64;class Ba extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Ba.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class _a extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(_a.prototype,"name",{value:"TransactionExpiredTimeoutError"});class sr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(sr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Fr{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,o)=>{n.set(i.toBase58(),o)});const s=i=>{const o=n.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const bt=(r="publicKey")=>Ct(32,r),xh=(r="signature")=>Ct(64,r),zn=(r="string")=>{const t=Q([nt("length"),nt("lengthPadding"),Ct(xn(nt(),-8),"chars")],r),e=t.decode.bind(t),n=t.encode.bind(t),s=t;return s.decode=(i,o)=>e(i,o).chars.toString(),s.encode=(i,o,c)=>{const d={chars:dt.Buffer.from(i,"utf8")};return n(d,o,c)},s.alloc=i=>nt().span+nt().span+dt.Buffer.from(i,"utf8").length,s},Eh=(r="authorized")=>Q([bt("staker"),bt("withdrawer")],r),Sh=(r="lockup")=>Q([Te("unixTimestamp"),Te("epoch"),bt("custodian")],r),Bh=(r="voteInit")=>Q([bt("nodePubkey"),bt("authorizedVoter"),bt("authorizedWithdrawer"),Et("commission")],r),_h=(r="voteAuthorizeWithSeedArgs")=>Q([nt("voteAuthorizationType"),bt("currentAuthorityDerivedKeyOwnerPubkey"),zn("currentAuthorityDerivedKeySeed"),bt("newAuthorized")],r);function Ce(r){let t=0,e=0;for(;;){let n=r.shift();if(t|=(n&127)<<e*7,e+=1,!(n&128))break}return t}function Ue(r,t){let e=t;for(;;){let n=e&127;if(e>>=7,e==0){r.push(n);break}else n|=128,r.push(n)}}function Pt(r,t){if(!r)throw new Error(t||"Assertion failed")}class Or{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const n=new Map,s=o=>{const c=o.toBase58();let d=n.get(c);return d===void 0&&(d={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(c,d)),d},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const o of t){s(o.programId).isInvoked=!0;for(const c of o.keys){const d=s(c.pubkey);d.isSigner||=c.isSigner,d.isWritable||=c.isWritable}}return new Or(e,n)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Pt(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,d])=>d.isSigner&&d.isWritable),n=t.filter(([,d])=>d.isSigner&&!d.isWritable),s=t.filter(([,d])=>!d.isSigner&&d.isWritable),i=t.filter(([,d])=>!d.isSigner&&!d.isWritable),o={numRequiredSignatures:e.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{Pt(e.length>0,"Expected at least one writable signer key");const[d]=e[0];Pt(d===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const c=[...e.map(([d])=>new at(d)),...n.map(([d])=>new at(d)),...s.map(([d])=>new at(d)),...i.map(([d])=>new at(d))];return[o,c]}extractTableLookup(t){const[e,n]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(t,e){const n=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const c=new at(i),d=t.findIndex(w=>w.equals(c));d>=0&&(Pt(d<256,"Max lookup table index exceeded"),n.push(d),s.push(c),this.keyMetaMap.delete(i))}return[n,s]}}const Aa="Reached end of buffer unexpectedly";function tn(r){if(r.length===0)throw new Error(Aa);return r.shift()}function Ne(r,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>r.length:e>=r.length)throw new Error(Aa);return r.splice(...t)}class en{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new at(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:jt.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Fr(this.staticAccountKeys)}static compile(t){const e=Or.compile(t.instructions,t.payerKey),[n,s]=e.getMessageComponents(),o=new Fr(s).compileInstructions(t.instructions).map(c=>({programIdIndex:c.programIdIndex,accounts:c.accountKeyIndexes,data:jt.encode(c.data)}));return new en({header:n,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const n=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=e-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Ue(e,t);const n=this.instructions.map(_=>{const{accounts:N,programIdIndex:L}=_,R=Array.from(jt.decode(_.data));let I=[];Ue(I,N.length);let k=[];return Ue(k,R.length),{programIdIndex:L,keyIndicesCount:dt.Buffer.from(I),keyIndices:N,dataLength:dt.Buffer.from(k),data:R}});let s=[];Ue(s,n.length);let i=dt.Buffer.alloc(Dn);dt.Buffer.from(s).copy(i);let o=s.length;n.forEach(_=>{const L=Q([Et("programIdIndex"),Ct(_.keyIndicesCount.length,"keyIndicesCount"),ye(Et("keyIndex"),_.keyIndices.length,"keyIndices"),Ct(_.dataLength.length,"dataLength"),ye(Et("userdatum"),_.data.length,"data")]).encode(_,i,o);o+=L}),i=i.slice(0,o);const c=Q([Ct(1,"numRequiredSignatures"),Ct(1,"numReadonlySignedAccounts"),Ct(1,"numReadonlyUnsignedAccounts"),Ct(e.length,"keyCount"),ye(bt("key"),t,"keys"),bt("recentBlockhash")]),d={numRequiredSignatures:dt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:dt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:dt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:dt.Buffer.from(e),keys:this.accountKeys.map(_=>qn(_.toBytes())),recentBlockhash:jt.decode(this.recentBlockhash)};let w=dt.Buffer.alloc(2048);const S=c.encode(d,w);return i.copy(w,S),w.slice(0,S+i.length)}static from(t){let e=[...t];const n=tn(e);if(n!==(n&Ji))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=tn(e),i=tn(e),o=Ce(e);let c=[];for(let N=0;N<o;N++){const L=Ne(e,0,fn);c.push(new at(dt.Buffer.from(L)))}const d=Ne(e,0,fn),w=Ce(e);let S=[];for(let N=0;N<w;N++){const L=tn(e),R=Ce(e),I=Ne(e,0,R),k=Ce(e),O=Ne(e,0,k),z=jt.encode(dt.Buffer.from(O));S.push({programIdIndex:L,accounts:I,data:z})}const _={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:jt.encode(dt.Buffer.from(d)),accountKeys:c,instructions:S};return new en(_)}}class or{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Fr(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){const s=t-n,i=this.addressTableLookups.reduce((o,c)=>o+c.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,o=n-e-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=t.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return e}static compile(t){const e=Or.compile(t.instructions,t.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const S of i){const _=e.extractTableLookup(S);if(_!==void 0){const[N,{writable:L,readonly:R}]=_;n.push(N),s.writable.push(...L),s.readonly.push(...R)}}const[o,c]=e.getMessageComponents(),w=new Fr(c,s).compileInstructions(t.instructions);return new or({header:o,staticAccountKeys:c,recentBlockhash:t.recentBlockhash,compiledInstructions:w,addressTableLookups:n})}serialize(){const t=Array();Ue(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),n=Array();Ue(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Ue(i,this.addressTableLookups.length);const o=Q([Et("prefix"),Q([Et("numRequiredSignatures"),Et("numReadonlySignedAccounts"),Et("numReadonlyUnsignedAccounts")],"header"),Ct(t.length,"staticAccountKeysLength"),ye(bt(),this.staticAccountKeys.length,"staticAccountKeys"),bt("recentBlockhash"),Ct(n.length,"instructionsLength"),Ct(e.length,"serializedInstructions"),Ct(i.length,"addressTableLookupsLength"),Ct(s.length,"serializedAddressTableLookups")]),c=new Uint8Array(Dn),d=128,w=o.encode({prefix:d,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(S=>S.toBytes()),recentBlockhash:jt.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},c);return c.slice(0,w)}serializeInstructions(){let t=0;const e=new Uint8Array(Dn);for(const n of this.compiledInstructions){const s=Array();Ue(s,n.accountKeyIndexes.length);const i=Array();Ue(i,n.data.length);const o=Q([Et("programIdIndex"),Ct(s.length,"encodedAccountKeyIndexesLength"),ye(Et(),n.accountKeyIndexes.length,"accountKeyIndexes"),Ct(i.length,"encodedDataLength"),Ct(n.data.length,"data")]);t+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Dn);for(const n of this.addressTableLookups){const s=Array();Ue(s,n.writableIndexes.length);const i=Array();Ue(i,n.readonlyIndexes.length);const o=Q([bt("accountKey"),Ct(s.length,"encodedWritableIndexesLength"),ye(Et(),n.writableIndexes.length,"writableIndexes"),Ct(i.length,"encodedReadonlyIndexesLength"),ye(Et(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const n=tn(e),s=n&Ji;Pt(n!==s,"Expected versioned message but received legacy message");const i=s;Pt(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:tn(e),numReadonlySignedAccounts:tn(e),numReadonlyUnsignedAccounts:tn(e)},c=[],d=Ce(e);for(let R=0;R<d;R++)c.push(new at(Ne(e,0,fn)));const w=jt.encode(Ne(e,0,fn)),S=Ce(e),_=[];for(let R=0;R<S;R++){const I=tn(e),k=Ce(e),O=Ne(e,0,k),z=Ce(e),P=new Uint8Array(Ne(e,0,z));_.push({programIdIndex:I,accountKeyIndexes:O,data:P})}const N=Ce(e),L=[];for(let R=0;R<N;R++){const I=new at(Ne(e,0,fn)),k=Ce(e),O=Ne(e,0,k),z=Ce(e),P=Ne(e,0,z);L.push({accountKey:I,writableIndexes:O,readonlyIndexes:P})}return new or({header:o,staticAccountKeys:c,recentBlockhash:w,compiledInstructions:_,addressTableLookups:L})}}const Ia={deserializeMessageVersion(r){const t=r[0],e=t&Ji;return e===t?"legacy":e},deserialize:r=>{const t=Ia.deserializeMessageVersion(r);if(t==="legacy")return en.from(r);if(t===0)return or.deserialize(r);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let hn=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const Ah=dt.Buffer.alloc(Nr).fill(0);class ka{constructor(t){this.keys=void 0,this.programId=void 0,this.data=dt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:n})=>({pubkey:t.toJSON(),isSigner:e,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class ln{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:n}=t;this.minNonceContextSlot=e,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:n}=t;this.recentBlockhash=e,this.lastValidBlockHeight=n}else{const{recentBlockhash:e,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new ka(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let I=0;I<e.length;I++)if(e[I].programId===void 0)throw new Error(`Transaction instruction index ${I} has undefined program id`);const s=[],i=[];e.forEach(I=>{I.keys.forEach(O=>{i.push({...O})});const k=I.programId.toString();s.includes(k)||s.push(k)}),s.forEach(I=>{i.push({pubkey:new at(I),isSigner:!1,isWritable:!1})});const o=[];i.forEach(I=>{const k=I.pubkey.toString(),O=o.findIndex(z=>z.pubkey.toString()===k);O>-1?(o[O].isWritable=o[O].isWritable||I.isWritable,o[O].isSigner=o[O].isSigner||I.isSigner):o.push(I)}),o.sort(function(I,k){if(I.isSigner!==k.isSigner)return I.isSigner?-1:1;if(I.isWritable!==k.isWritable)return I.isWritable?-1:1;const O={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return I.pubkey.toBase58().localeCompare(k.pubkey.toBase58(),"en",O)});const c=o.findIndex(I=>I.pubkey.equals(n));if(c>-1){const[I]=o.splice(c,1);I.isSigner=!0,I.isWritable=!0,o.unshift(I)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const I of this.signatures){const k=o.findIndex(O=>O.pubkey.equals(I.publicKey));if(k>-1)o[k].isSigner||(o[k].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${I.publicKey.toString()}`)}let d=0,w=0,S=0;const _=[],N=[];o.forEach(({pubkey:I,isSigner:k,isWritable:O})=>{k?(_.push(I.toString()),d+=1,O||(w+=1)):(N.push(I.toString()),O||(S+=1))});const L=_.concat(N),R=e.map(I=>{const{data:k,programId:O}=I;return{programIdIndex:L.indexOf(O.toString()),accounts:I.keys.map(z=>L.indexOf(z.pubkey.toString())),data:jt.encode(k)}});return R.forEach(I=>{Pt(I.programIdIndex>=0),I.accounts.forEach(k=>Pt(k>=0))}),new en({header:{numRequiredSignatures:d,numReadonlySignedAccounts:w,numReadonlyUnsignedAccounts:S},accountKeys:L,recentBlockhash:t,instructions:R})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(n=>{const s=n.toString();return e.has(s)?!1:(e.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(t,...e){const n=t.serialize();e.forEach(s=>{const i=xa(n,s.secretKey);this._addSignature(s.publicKey,qn(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){Pt(e.length===64);const n=this.signatures.findIndex(s=>t.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=dt.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(n.missing||=[]).push(i):yh(s,t,i.toBytes())||(n.invalid||=[]).push(i);return n.invalid||n.missing?n:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,e);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(c=>c.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(c=>c.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,n=[];Ue(n,e.length);const s=n.length+e.length*64+t.length,i=dt.Buffer.alloc(s);return Pt(e.length<256),dt.Buffer.from(n).copy(i,0),e.forEach(({signature:o},c)=>{o!==null&&(Pt(o.length===64,"signature has invalid length"),dt.Buffer.from(o).copy(i,n.length+c*64))}),t.copy(i,n.length+e.length*64),Pt(i.length<=Dn,`Transaction too large: ${i.length} > ${Dn}`),i}get keys(){return Pt(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return Pt(this.instructions.length===1),this.instructions[0].programId}get data(){return Pt(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const n=Ce(e);let s=[];for(let i=0;i<n;i++){const o=Ne(e,0,Nr);s.push(jt.encode(dt.Buffer.from(o)))}return ln.populate(en.from(e),s)}static populate(t,e=[]){const n=new ln;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const o={signature:s==jt.encode(Ah)?null:jt.decode(s),publicKey:t.accountKeys[i]};n.signatures.push(o)}),t.instructions.forEach(s=>{const i=s.accounts.map(o=>{const c=t.accountKeys[o];return{pubkey:c,isSigner:n.signatures.some(d=>d.publicKey.toString()===c.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});n.instructions.push(new ka({keys:i,programId:t.accountKeys[s.programIdIndex],data:jt.decode(s.data)}))}),n._message=t,n._json=n.toJSON(),n}}class ar{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)Pt(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const n=[];for(let s=0;s<t.header.numRequiredSignatures;s++)n.push(new Uint8Array(Nr));this.signatures=n}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Ue(e,this.signatures.length);const n=Q([Ct(e.length,"encodedSignaturesLength"),ye(xh(),this.signatures.length,"signatures"),Ct(t.length,"serializedMessage")]),s=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},s);return s.slice(0,i)}static deserialize(t){let e=[...t];const n=[],s=Ce(e);for(let o=0;o<s;o++)n.push(new Uint8Array(Ne(e,0,Nr)));const i=Ia.deserialize(new Uint8Array(e));return new ar(i,n)}sign(t){const e=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of t){const i=n.findIndex(o=>o.equals(s.publicKey));Pt(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=xa(e,s.secretKey)}}addSignature(t,e){Pt(e.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));Pt(s>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=e}}const Ih=1e3/(160/64);new at("SysvarC1ock11111111111111111111111111111111"),new at("SysvarEpochSchedu1e111111111111111111111111"),new at("Sysvar1nstructions1111111111111111111111111"),new at("SysvarRecentB1ockHashes11111111111111111111"),new at("SysvarRent111111111111111111111111111111111"),new at("SysvarRewards111111111111111111111111111111"),new at("SysvarS1otHashes111111111111111111111111111"),new at("SysvarS1otHistory11111111111111111111111111"),new at("SysvarStakeHistory1111111111111111111111111");function $n(r){return new Promise(t=>setTimeout(t,r))}const kh=ge("lamportsPerSignature"),Ma=Q([nt("version"),nt("state"),bt("authorizedPubkey"),bt("nonce"),Q([kh],"feeCalculator")]);Ma.span;class Qi{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Ma.decode(qn(t),0);return new Qi({authorizedPubkey:new at(e.authorizedPubkey),nonce:new at(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const Mh=r=>{const t=r.decode.bind(r),e=r.encode.bind(r);return{decode:t,encode:e}},Hn=(r=>t=>{const e=Ct(r,t),{encode:n,decode:s}=Mh(e),i=e;return i.decode=(o,c)=>{const d=s(o,c);return sf(dt.Buffer.from(d))},i.encode=(o,c,d)=>{const w=cf(o,r);return n(w,c,d)},i})(8);Object.freeze({Create:{index:0,layout:Q([nt("instruction"),Te("lamports"),Te("space"),bt("programId")])},Assign:{index:1,layout:Q([nt("instruction"),bt("programId")])},Transfer:{index:2,layout:Q([nt("instruction"),Hn("lamports")])},CreateWithSeed:{index:3,layout:Q([nt("instruction"),bt("base"),zn("seed"),Te("lamports"),Te("space"),bt("programId")])},AdvanceNonceAccount:{index:4,layout:Q([nt("instruction")])},WithdrawNonceAccount:{index:5,layout:Q([nt("instruction"),Te("lamports")])},InitializeNonceAccount:{index:6,layout:Q([nt("instruction"),bt("authorized")])},AuthorizeNonceAccount:{index:7,layout:Q([nt("instruction"),bt("authorized")])},Allocate:{index:8,layout:Q([nt("instruction"),Te("space")])},AllocateWithSeed:{index:9,layout:Q([nt("instruction"),bt("base"),zn("seed"),Te("space"),bt("programId")])},AssignWithSeed:{index:10,layout:Q([nt("instruction"),bt("base"),zn("seed"),bt("programId")])},TransferWithSeed:{index:11,layout:Q([nt("instruction"),Hn("lamports"),zn("seed"),bt("programId")])},UpgradeNonceAccount:{index:12,layout:Q([nt("instruction")])}}),new at("11111111111111111111111111111111"),new at("BPFLoader2111111111111111111111111111111111");function Rh(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Lh=Object.prototype.toString,Th=Object.keys||function(r){var t=[];for(var e in r)t.push(e);return t};function cr(r,t){var e,n,s,i,o,c,d;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return cr(r.toJSON(),t);if(d=Lh.call(r),d==="[object Array]"){for(s="[",n=r.length-1,e=0;e<n;e++)s+=cr(r[e],!0)+",";return n>-1&&(s+=cr(r[e],!0)),s+"]"}else if(d==="[object Object]"){for(i=Th(r).sort(),n=i.length,s="",e=0;e<n;)o=i[e],c=cr(r[o],!1),c!==void 0&&(s&&(s+=","),s+=JSON.stringify(o)+":"+c),e++;return"{"+s+"}"}else return JSON.stringify(r);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}var Ch=function(r){var t=cr(r,!1);if(t!==void 0)return""+t},Ra=Rh(Ch);const ur=32;function ts(r){let t=0;for(;r>1;)r/=2,t++;return t}function Uh(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class Nh{constructor(t,e,n,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=n,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=ts(Uh(t+ur+1))-ts(ur)-1,n=this.getSlotsInEpoch(e),s=t-(n-ur);return[e,s]}else{const e=t-this.firstNormalSlot,n=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+n,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*ur:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+ts(ur)):this.slotsPerEpoch}}class La extends Error{constructor(t,e){super(t),this.logs=void 0,this.logs=e}}class et extends Error{constructor({code:t,message:e,data:n},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}}var Fh=globalThis.fetch;class Oh extends Yf{constructor(t,e,n){const s=i=>{const o=th(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,t,e,n),this.underlyingSocket=void 0}call(...t){const e=this.underlyingSocket?.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){const e=this.underlyingSocket?.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function Ph(r,t){let e;try{e=r.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(e.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${r.index}`);return e}const Ta=56;class Ca{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=Ph(qh,t),n=t.length-Ta;Pt(n>=0,"lookup table is invalid"),Pt(n%32===0,"lookup table is invalid");const s=n/32,{addresses:i}=Q([ye(bt(),s,"addresses")]).decode(t.slice(Ta));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new at(e.authority[0]):void 0,addresses:i.map(o=>new at(o))}}}const qh={index:1,layout:Q([nt("typeIndex"),Hn("deactivationSlot"),ge("lastExtendedSlot"),Et("lastExtendedStartIndex"),Et(),ye(bt(),xn(Et(),-1),"authority")])},Dh=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function zh(r){const t=r.match(Dh);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[e,n,s,i]=t,o=r.startsWith("https:")?"wss:":"ws:",c=s==null?null:parseInt(s.slice(1),10),d=c==null?"":`:${c+1}`;return`${o}//${n}${d}${i}`}const Gt=nr(zi(at),K(),r=>new at(r)),Ua=$i([K(),$t("base64")]),es=nr(zi(dt.Buffer),Ua,r=>dt.Buffer.from(r[0],"base64")),$h=30*1e3;function Hh(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function qt(r){let t,e;if(typeof r=="string")t=r;else if(r){const{commitment:n,...s}=r;t=n,e=s}return{commitment:t,config:e}}function Na(r){return ke([q({jsonrpc:$t("2.0"),id:K(),result:r}),q({jsonrpc:$t("2.0"),id:K(),error:q({code:er(),message:K(),data:ot(mf())})})])}const Kh=Na(er());function mt(r){return nr(Na(r),Kh,t=>"error"in t?t:{...t,result:G(t.result,r)})}function Wt(r){return mt(q({context:q({slot:C()}),value:r}))}function Pr(r){return q({context:q({slot:C()}),value:r})}function ns(r,t){return r===0?new or({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new at(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:jt.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new en(t)}const Wh=q({foundation:C(),foundationTerm:C(),initial:C(),taper:C(),terminal:C()}),jh=mt(Z(V(q({epoch:C(),effectiveSlot:C(),amount:C(),postBalance:C(),commission:ot(V(C()))})))),Gh=Z(q({slot:C(),prioritizationFee:C()})),Vh=q({total:C(),validator:C(),foundation:C(),epoch:C()}),Zh=q({epoch:C(),slotIndex:C(),slotsInEpoch:C(),absoluteSlot:C(),blockHeight:ot(C()),transactionCount:ot(C())}),Yh=q({slotsPerEpoch:C(),leaderScheduleSlotOffset:C(),warmup:Ve(),firstNormalEpoch:C(),firstNormalSlot:C()}),Xh=sa(K(),Z(C())),Bn=V(ke([q({}),K()])),Jh=q({err:Bn}),Qh=$t("receivedSignature"),tl=q({"solana-core":K(),"feature-set":ot(C())}),Fa=Wt(q({err:V(ke([q({}),K()])),logs:V(Z(K())),accounts:ot(V(Z(V(q({executable:Ve(),owner:K(),lamports:C(),data:Z(K()),rentEpoch:ot(C())}))))),unitsConsumed:ot(C()),returnData:ot(V(q({programId:K(),data:$i([K(),$t("base64")])})))})),el=Wt(q({byIdentity:sa(K(),Z(C())),range:q({firstSlot:C(),lastSlot:C()})}));function nl(r,t,e,n,s,i){const o=e||Fh;let c;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let d;return n&&(d=async(S,_)=>{const N=await new Promise((L,R)=>{try{n(S,_,(I,k)=>L([I,k]))}catch(I){R(I)}});return await o(...N)}),new Hf(async(S,_)=>{const N={method:"POST",body:S,agent:c,headers:Object.assign({"Content-Type":"application/json"},t||{},rd)};try{let L=5,R,I=500;for(;d?R=await d(r,N):R=await o(r,N),!(R.status!==429||s===!0||(L-=1,L===0));)console.error(`Server responded with ${R.status} ${R.statusText}.  Retrying after ${I}ms delay...`),await $n(I),I*=2;const k=await R.text();R.ok?_(null,k):_(new Error(`${R.status} ${R.statusText}: ${k}`))}catch(L){L instanceof Error&&_(L)}},{})}function rl(r){return(t,e)=>new Promise((n,s)=>{r.request(t,e,(i,o)=>{if(i){s(i);return}n(o)})})}function il(r){return t=>new Promise((e,n)=>{t.length===0&&e([]);const s=t.map(i=>r.request(i.methodName,i.args));r.request(s,(i,o)=>{if(i){n(i);return}e(o)})})}const sl=mt(Wh),ol=mt(Vh),al=mt(Gh),cl=mt(Zh),ul=mt(Yh),fl=mt(Xh),hl=mt(C()),ll=Wt(q({total:C(),circulating:C(),nonCirculating:C(),nonCirculatingAccounts:Z(Gt)})),rs=q({amount:K(),uiAmount:V(C()),decimals:C(),uiAmountString:ot(K())}),dl=Wt(Z(q({address:Gt,amount:K(),uiAmount:V(C()),decimals:C(),uiAmountString:ot(K())}))),pl=Wt(Z(q({pubkey:Gt,account:q({executable:Ve(),owner:Gt,lamports:C(),data:es,rentEpoch:C()})}))),is=q({program:K(),parsed:er(),space:C()}),gl=Wt(Z(q({pubkey:Gt,account:q({executable:Ve(),owner:Gt,lamports:C(),data:is,rentEpoch:C()})}))),ml=Wt(Z(q({lamports:C(),address:Gt}))),fr=q({executable:Ve(),owner:Gt,lamports:C(),data:es,rentEpoch:C()}),yl=q({pubkey:Gt,account:fr}),wl=nr(ke([zi(dt.Buffer),is]),ke([Ua,is]),r=>Array.isArray(r)?G(r,es):r),ss=q({executable:Ve(),owner:Gt,lamports:C(),data:wl,rentEpoch:C()}),bl=q({pubkey:Gt,account:ss}),vl=q({state:ke([$t("active"),$t("inactive"),$t("activating"),$t("deactivating")]),active:C(),inactive:C()}),xl=mt(Z(q({signature:K(),slot:C(),err:Bn,memo:V(K()),blockTime:ot(V(C()))}))),El=mt(Z(q({signature:K(),slot:C(),err:Bn,memo:V(K()),blockTime:ot(V(C()))}))),Sl=q({subscription:C(),result:Pr(fr)}),Bl=q({pubkey:Gt,account:fr}),_l=q({subscription:C(),result:Pr(Bl)}),Al=q({parent:C(),slot:C(),root:C()}),Il=q({subscription:C(),result:Al}),kl=ke([q({type:ke([$t("firstShredReceived"),$t("completed"),$t("optimisticConfirmation"),$t("root")]),slot:C(),timestamp:C()}),q({type:$t("createdBank"),parent:C(),slot:C(),timestamp:C()}),q({type:$t("frozen"),slot:C(),timestamp:C(),stats:q({numTransactionEntries:C(),numSuccessfulTransactions:C(),numFailedTransactions:C(),maxTransactionsPerEntry:C()})}),q({type:$t("dead"),slot:C(),timestamp:C(),err:K()})]),Ml=q({subscription:C(),result:kl}),Rl=q({subscription:C(),result:Pr(ke([Jh,Qh]))}),Ll=q({subscription:C(),result:C()}),Tl=q({pubkey:K(),gossip:V(K()),tpu:V(K()),rpc:V(K()),version:V(K())}),Oa=q({votePubkey:K(),nodePubkey:K(),activatedStake:C(),epochVoteAccount:Ve(),epochCredits:Z($i([C(),C(),C()])),commission:C(),lastVote:C(),rootSlot:V(C())}),Cl=mt(q({current:Z(Oa),delinquent:Z(Oa)})),Ul=ke([$t("processed"),$t("confirmed"),$t("finalized")]),Nl=q({slot:C(),confirmations:V(C()),err:Bn,confirmationStatus:ot(Ul)}),Fl=Wt(Z(V(Nl))),Ol=mt(C()),Pa=q({accountKey:Gt,writableIndexes:Z(C()),readonlyIndexes:Z(C())}),os=q({signatures:Z(K()),message:q({accountKeys:Z(K()),header:q({numRequiredSignatures:C(),numReadonlySignedAccounts:C(),numReadonlyUnsignedAccounts:C()}),instructions:Z(q({accounts:Z(C()),data:K(),programIdIndex:C()})),recentBlockhash:K(),addressTableLookups:ot(Z(Pa))})}),qa=q({pubkey:Gt,signer:Ve(),writable:Ve(),source:ot(ke([$t("transaction"),$t("lookupTable")]))}),Da=q({accountKeys:Z(qa),signatures:Z(K())}),za=q({parsed:er(),program:K(),programId:Gt}),$a=q({accounts:Z(Gt),data:K(),programId:Gt}),Pl=ke([$a,za]),ql=ke([q({parsed:er(),program:K(),programId:K()}),q({accounts:Z(K()),data:K(),programId:K()})]),Ha=nr(Pl,ql,r=>"accounts"in r?G(r,$a):G(r,za)),Ka=q({signatures:Z(K()),message:q({accountKeys:Z(qa),instructions:Z(Ha),recentBlockhash:K(),addressTableLookups:ot(V(Z(Pa)))})}),qr=q({accountIndex:C(),mint:K(),owner:ot(K()),uiTokenAmount:rs}),Wa=q({writable:Z(Gt),readonly:Z(Gt)}),Dr=q({err:Bn,fee:C(),innerInstructions:ot(V(Z(q({index:C(),instructions:Z(q({accounts:Z(C()),data:K(),programIdIndex:C()}))})))),preBalances:Z(C()),postBalances:Z(C()),logMessages:ot(V(Z(K()))),preTokenBalances:ot(V(Z(qr))),postTokenBalances:ot(V(Z(qr))),loadedAddresses:ot(Wa),computeUnitsConsumed:ot(C())}),as=q({err:Bn,fee:C(),innerInstructions:ot(V(Z(q({index:C(),instructions:Z(Ha)})))),preBalances:Z(C()),postBalances:Z(C()),logMessages:ot(V(Z(K()))),preTokenBalances:ot(V(Z(qr))),postTokenBalances:ot(V(Z(qr))),loadedAddresses:ot(Wa),computeUnitsConsumed:ot(C())}),Kn=ke([$t(0),$t("legacy")]),_n=q({pubkey:K(),lamports:C(),postBalance:V(C()),rewardType:V(K()),commission:ot(V(C()))}),Dl=mt(V(q({blockhash:K(),previousBlockhash:K(),parentSlot:C(),transactions:Z(q({transaction:os,meta:V(Dr),version:ot(Kn)})),rewards:ot(Z(_n)),blockTime:V(C()),blockHeight:V(C())}))),zl=mt(V(q({blockhash:K(),previousBlockhash:K(),parentSlot:C(),rewards:ot(Z(_n)),blockTime:V(C()),blockHeight:V(C())}))),$l=mt(V(q({blockhash:K(),previousBlockhash:K(),parentSlot:C(),transactions:Z(q({transaction:Da,meta:V(Dr),version:ot(Kn)})),rewards:ot(Z(_n)),blockTime:V(C()),blockHeight:V(C())}))),Hl=mt(V(q({blockhash:K(),previousBlockhash:K(),parentSlot:C(),transactions:Z(q({transaction:Ka,meta:V(as),version:ot(Kn)})),rewards:ot(Z(_n)),blockTime:V(C()),blockHeight:V(C())}))),Kl=mt(V(q({blockhash:K(),previousBlockhash:K(),parentSlot:C(),transactions:Z(q({transaction:Da,meta:V(as),version:ot(Kn)})),rewards:ot(Z(_n)),blockTime:V(C()),blockHeight:V(C())}))),Wl=mt(V(q({blockhash:K(),previousBlockhash:K(),parentSlot:C(),rewards:ot(Z(_n)),blockTime:V(C()),blockHeight:V(C())}))),jl=mt(V(q({blockhash:K(),previousBlockhash:K(),parentSlot:C(),transactions:Z(q({transaction:os,meta:V(Dr)})),rewards:ot(Z(_n)),blockTime:V(C())}))),ja=mt(V(q({blockhash:K(),previousBlockhash:K(),parentSlot:C(),signatures:Z(K()),blockTime:V(C())}))),cs=mt(V(q({slot:C(),meta:V(Dr),blockTime:ot(V(C())),transaction:os,version:ot(Kn)}))),zr=mt(V(q({slot:C(),transaction:Ka,meta:V(as),blockTime:ot(V(C())),version:ot(Kn)}))),Gl=Wt(q({blockhash:K(),feeCalculator:q({lamportsPerSignature:C()})})),Vl=Wt(q({blockhash:K(),lastValidBlockHeight:C()})),Zl=Wt(Ve()),Yl=q({slot:C(),numTransactions:C(),numSlots:C(),samplePeriodSecs:C()}),Xl=mt(Z(Yl)),Jl=Wt(V(q({feeCalculator:q({lamportsPerSignature:C()})}))),Ql=mt(K()),td=mt(K()),ed=q({err:Bn,logs:Z(K()),signature:K()}),nd=q({result:Pr(ed),subscription:C()}),rd={"solana-client":"js/0.0.0-development"};class id{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const w={};return async S=>{const{commitment:_,config:N}=qt(S),L=this._buildArgs([],_,void 0,N),R=Ra(L);return w[R]=w[R]??(async()=>{try{const I=await this._rpcRequest("getBlockHeight",L),k=G(I,mt(C()));if("error"in k)throw new et(k.error,"failed to get block height information");return k.result}finally{delete w[R]}})(),await w[R]}})();let n,s,i,o,c,d;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,n=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,c=e.disableRetryOnRateLimit,d=e.httpAgent),this._rpcEndpoint=Hh(t),this._rpcWsEndpoint=n||zh(t),this._rpcClient=nl(t,s,i,o,c,d),this._rpcRequest=rl(this._rpcClient),this._rpcBatchRequest=il(this._rpcClient),this._rpcWebSocket=new Oh(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:n,config:s}=qt(e),i=this._buildArgs([t.toBase58()],n,void 0,s),o=await this._rpcRequest("getBalance",i),c=G(o,Wt(C()));if("error"in c)throw new et(c.error,`failed to get balance for ${t.toBase58()}`);return c.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+n)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),n=G(e,mt(V(C())));if("error"in n)throw new et(n.error,`failed to get block time for slot ${t}`);return n.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=G(t,mt(C()));if("error"in e)throw new et(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=G(t,hl);if("error"in e)throw new et(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[e]),s=G(n,ll);if("error"in s)throw new et(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",n),i=G(s,Wt(rs));if("error"in i)throw new et(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",n),i=G(s,Wt(rs));if("error"in i)throw new et(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,n){const{commitment:s,config:i}=qt(n);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const c=this._buildArgs(o,s,"base64",i),d=await this._rpcRequest("getTokenAccountsByOwner",c),w=G(d,pl);if("error"in w)throw new et(w.error,`failed to get token accounts owned by account ${t.toBase58()}`);return w.result}async getParsedTokenAccountsByOwner(t,e,n){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),c=G(o,gl);if("error"in c)throw new et(c.error,`failed to get token accounts owned by account ${t.toBase58()}`);return c.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},n=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",n),i=G(s,ml);if("error"in i)throw new et(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",n),i=G(s,dl);if("error"in i)throw new et(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:n,config:s}=qt(e),i=this._buildArgs([t.toBase58()],n,"base64",s),o=await this._rpcRequest("getAccountInfo",i),c=G(o,Wt(V(fr)));if("error"in c)throw new et(c.error,`failed to get info about account ${t.toBase58()}`);return c.result}async getParsedAccountInfo(t,e){const{commitment:n,config:s}=qt(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),c=G(o,Wt(V(ss)));if("error"in c)throw new et(c.error,`failed to get info about account ${t.toBase58()}`);return c.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(n){throw new Error("failed to get info about account "+t.toBase58()+": "+n)}}async getMultipleParsedAccounts(t,e){const{commitment:n,config:s}=qt(e),i=t.map(w=>w.toBase58()),o=this._buildArgs([i],n,"jsonParsed",s),c=await this._rpcRequest("getMultipleAccounts",o),d=G(c,Wt(Z(V(ss))));if("error"in d)throw new et(d.error,`failed to get info for accounts ${i}`);return d.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:n,config:s}=qt(e),i=t.map(w=>w.toBase58()),o=this._buildArgs([i],n,"base64",s),c=await this._rpcRequest("getMultipleAccounts",o),d=G(c,Wt(Z(V(fr))));if("error"in d)throw new et(d.error,`failed to get info for accounts ${i}`);return d.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,n){const{commitment:s,config:i}=qt(e),o=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:n??i?.epoch}),c=await this._rpcRequest("getStakeActivation",o),d=G(c,mt(vl));if("error"in d)throw new et(d.error,`failed to get Stake Activation ${t.toBase58()}`);return d.result}async getProgramAccounts(t,e){const{commitment:n,config:s}=qt(e),{encoding:i,...o}=s||{},c=this._buildArgs([t.toBase58()],n,i||"base64",o),d=await this._rpcRequest("getProgramAccounts",c),w=Z(yl),S=o.withContext===!0?G(d,Wt(w)):G(d,mt(w));if("error"in S)throw new et(S.error,`failed to get accounts owned by program ${t.toBase58()}`);return S.result}async getParsedProgramAccounts(t,e){const{commitment:n,config:s}=qt(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),c=G(o,mt(Z(bl)));if("error"in c)throw new et(c.error,`failed to get accounts owned by program ${t.toBase58()}`);return c.result}async confirmTransaction(t,e){let n;if(typeof t=="string")n=t;else{const i=t;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);n=i.signature}let s;try{s=jt.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Pt(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:n}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,n)=>{t!=null&&(t.aborted?n(t.reason):t.addEventListener("abort",()=>{n(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let n,s,i=!1;const o=new Promise((d,w)=>{try{n=this.onSignature(e,(_,N)=>{n=void 0;const L={context:N,value:_};d({__type:hn.PROCESSED,response:L})},t);const S=new Promise(_=>{n==null?_():s=this._onSubscriptionStateChange(n,N=>{N==="subscribed"&&_()})});(async()=>{if(await S,i)return;const _=await this.getSignatureStatus(e);if(i||_==null)return;const{context:N,value:L}=_;if(L!=null)if(L?.err)w(L.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(L.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(L.confirmationStatus==="processed"||L.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,d({__type:hn.PROCESSED,response:{context:N,value:L}})}})()}catch(S){w(S)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:n,signature:s}}){let i=!1;const o=new Promise(_=>{const N=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let L=await N();if(!i){for(;L<=n;)if(await $n(1e3),i||(L=await N(),i))return;_({__type:hn.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:c,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),w=this.getCancellationPromise(e);let S;try{const _=await Promise.race([w,d,o]);if(_.__type===hn.PROCESSED)S=_.response;else throw new Ba(s)}finally{i=!0,c()}return S}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:n,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let c=!1;const d=new Promise(L=>{let R=i,I=null;const k=async()=>{try{const{context:O,value:z}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:n});return I=O.slot,z?.nonce}catch{return R}};(async()=>{if(R=await k(),!c)for(;;){if(i!==R){L({__type:hn.NONCE_INVALID,slotInWhichNonceDidAdvance:I});return}if(await $n(2e3),c||(R=await k(),c))return}})()}),{abortConfirmation:w,confirmationPromise:S}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),_=this.getCancellationPromise(e);let N;try{const L=await Promise.race([_,S,d]);if(L.__type===hn.PROCESSED)N=L.response;else{let R;for(;;){const I=await this.getSignatureStatus(o);if(I==null)break;if(I.context.slot<(L.slotInWhichNonceDidAdvance??n)){await $n(400);continue}R=I;break}if(R?.value){const I=t||"finalized",{confirmationStatus:k}=R.value;switch(I){case"processed":case"recent":if(k!=="processed"&&k!=="confirmed"&&k!=="finalized")throw new sr(o);break;case"confirmed":case"single":case"singleGossip":if(k!=="confirmed"&&k!=="finalized")throw new sr(o);break;case"finalized":case"max":case"root":if(k!=="finalized")throw new sr(o);break;default:(O=>{})(I)}N={context:R.context,value:{err:R.value.err}}}else throw new sr(o)}}finally{c=!0,w()}return N}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let n;const s=new Promise(d=>{let w=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{w=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>d({__type:hn.TIMED_OUT,timeoutMs:w}),w)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let c;try{const d=await Promise.race([o,s]);if(d.__type===hn.PROCESSED)c=d.response;else throw new _a(e,d.timeoutMs/1e3)}finally{clearTimeout(n),i()}return c}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=G(t,mt(Z(Tl)));if("error"in e)throw new et(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getVoteAccounts",e),s=G(n,Cl);if("error"in s)throw new et(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:n}=qt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlot",s),o=G(i,mt(C()));if("error"in o)throw new et(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:n}=qt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlotLeader",s),o=G(i,mt(K()));if("error"in o)throw new et(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const n=[t,e],s=await this._rpcRequest("getSlotLeaders",n),i=G(s,mt(Z(Gt)));if("error"in i)throw new et(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:n,value:s}=await this.getSignatureStatuses([t],e);Pt(s.length===1);const i=s[0];return{context:n,value:i}}async getSignatureStatuses(t,e){const n=[t];e&&n.push(e);const s=await this._rpcRequest("getSignatureStatuses",n),i=G(s,Fl);if("error"in i)throw new et(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:n}=qt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getTransactionCount",s),o=G(i,mt(C()));if("error"in o)throw new et(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getInflationGovernor",e),s=G(n,sl);if("error"in s)throw new et(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,n){const{commitment:s,config:i}=qt(n),o=this._buildArgs([t.map(w=>w.toBase58())],s,void 0,{...i,epoch:e??i?.epoch}),c=await this._rpcRequest("getInflationReward",o),d=G(c,jh);if("error"in d)throw new et(d.error,"failed to get inflation reward");return d.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=G(t,ol);if("error"in e)throw new et(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:n}=qt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getEpochInfo",s),o=G(i,cl);if("error"in o)throw new et(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=G(t,ul);if("error"in e)throw new et(e.error,"failed to get epoch schedule");const n=e.result;return new Nh(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=G(t,fl);if("error"in e)throw new et(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const n=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",n),i=G(s,Ol);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getRecentBlockhash",e),s=G(n,Gl);if("error"in s)throw new et(s.error,"failed to get recent blockhash");return s.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),n=G(e,Xl);if("error"in n)throw new et(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(t,e){const n=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",n),i=G(s,Jl);if("error"in i)throw new et(i.error,"failed to get fee calculator");const{context:o,value:c}=i.result;return{context:o,value:c!==null?c.feeCalculator:null}}async getFeeForMessage(t,e){const n=qn(t.serialize()).toString("base64"),s=this._buildArgs([n],e),i=await this._rpcRequest("getFeeForMessage",s),o=G(i,Wt(V(C())));if("error"in o)throw new et(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){const e=t?.lockedWritableAccounts?.map(o=>o.toBase58()),n=e?.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",n),i=G(s,al);if("error"in i)throw new et(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:n}=qt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getLatestBlockhash",s),o=G(i,Vl);if("error"in o)throw new et(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:n,config:s}=qt(e),i=this._buildArgs([t],n,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),c=G(o,Zl);if("error"in c)throw new et(c.error,"failed to determine if the blockhash `"+t+"`is valid");return c.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=G(t,mt(tl));if("error"in e)throw new et(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=G(t,mt(K()));if("error"in e)throw new et(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:n,config:s}=qt(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const c=G(o,$l);if("error"in c)throw c.error;return c.result}case"none":{const c=G(o,zl);if("error"in c)throw c.error;return c.result}default:{const c=G(o,Dl);if("error"in c)throw c.error;const{result:d}=c;return d?{...d,transactions:d.transactions.map(({transaction:w,meta:S,version:_})=>({meta:S,transaction:{...w,message:ns(_,w.message)},version:_}))}:null}}}catch(c){throw new et(c,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:n,config:s}=qt(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const c=G(o,Kl);if("error"in c)throw c.error;return c.result}case"none":{const c=G(o,Wl);if("error"in c)throw c.error;return c.result}default:{const c=G(o,Hl);if("error"in c)throw c.error;return c.result}}}catch(c){throw new et(c,"failed to get block")}}async getBlockProduction(t){let e,n;if(typeof t=="string")n=t;else if(t){const{commitment:c,...d}=t;n=c,e=d}const s=this._buildArgs([],n,"base64",e),i=await this._rpcRequest("getBlockProduction",s),o=G(i,el);if("error"in o)throw new et(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:n,config:s}=qt(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,s),o=await this._rpcRequest("getTransaction",i),c=G(o,cs);if("error"in c)throw new et(c.error,"failed to get transaction");const d=c.result;return d&&{...d,transaction:{...d.transaction,message:ns(d.version,d.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:n,config:s}=qt(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),c=G(o,zr);if("error"in c)throw new et(c.error,"failed to get transaction");return c.result}async getParsedTransactions(t,e){const{commitment:n,config:s}=qt(e),i=t.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],n,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(d=>{const w=G(d,zr);if("error"in w)throw new et(w.error,"failed to get transactions");return w.result})}async getTransactions(t,e){const{commitment:n,config:s}=qt(e),i=t.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],n,void 0,s)}));return(await this._rpcBatchRequest(i)).map(d=>{const w=G(d,cs);if("error"in w)throw new et(w.error,"failed to get transactions");const S=w.result;return S&&{...S,transaction:{...S.transaction,message:ns(S.version,S.transaction.message)}}})}async getConfirmedBlock(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getConfirmedBlock",n),i=G(s,jl);if("error"in i)throw new et(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const c={...o,transactions:o.transactions.map(({transaction:d,meta:w})=>{const S=new en(d.message);return{meta:w,transaction:{...d,message:S}}})};return{...c,transactions:c.transactions.map(({transaction:d,meta:w})=>({meta:w,transaction:ln.populate(d.message,d.signatures)}))}}async getBlocks(t,e,n){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],n),i=await this._rpcRequest("getBlocks",s),o=G(i,mt(Z(C())));if("error"in o)throw new et(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=G(s,ja);if("error"in i)throw new et(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getConfirmedBlock",n),i=G(s,ja);if("error"in i)throw new et(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getConfirmedTransaction",n),i=G(s,cs);if("error"in i)throw new et(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const c=new en(o.transaction.message),d=o.transaction.signatures;return{...o,transaction:ln.populate(c,d)}}async getParsedConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getConfirmedTransaction",n),i=G(s,zr);if("error"in i)throw new et(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const n=t.map(o=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const c=G(o,zr);if("error"in c)throw new et(c.error,"failed to get confirmed transactions");return c.result})}async getConfirmedSignaturesForAddress(t,e,n){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const d=await this.getConfirmedBlockSignatures(e,"finalized");d.signatures.length>0&&(s.until=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}let o=await this.getSlot("finalized");for(;!("before"in s)&&(n++,!(n>o));)try{const d=await this.getConfirmedBlockSignatures(n);d.signatures.length>0&&(s.before=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(d=>d.signature)}async getConfirmedSignaturesForAddress2(t,e,n){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=G(i,xl);if("error"in o)throw new et(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,n){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),o=G(i,El);if("error"in o)throw new et(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:n,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new Ca({key:t,state:Ca.deserialize(s.data)})),{context:n,value:i}}async getNonceAndContext(t,e){const{context:n,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=Qi.fromAccountData(s.data)),{context:n,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+n)})}async requestAirdrop(t,e){const n=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=G(n,Ql);if("error"in s)throw new et(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await $n(100);const n=Date.now()-this._blockhashInfo.lastFetch>=$h;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,n=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(n!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await $n(Ih/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:n}=qt(t),s=this._buildArgs([],e,"base64",n),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=G(i,Wt(C()));if("error"in o)throw new et(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,n){if("message"in t){const I=t.serialize(),k=dt.Buffer.from(I).toString("base64");if(Array.isArray(e)||n!==void 0)throw new Error("Invalid arguments");const O=e||{};O.encoding="base64","commitment"in O||(O.commitment=this.commitment);const z=[k,O],P=await this._rpcRequest("simulateTransaction",z),Y=G(P,Fa);if("error"in Y)throw new Error("failed to simulate transaction: "+Y.error.message);return Y.result}let s;if(t instanceof ln){let R=t;s=new ln,s.feePayer=R.feePayer,s.instructions=t.instructions,s.nonceInfo=R.nonceInfo,s.signatures=R.signatures}else s=ln.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let R=this._disableBlockhashCaching;for(;;){const I=await this._blockhashWithExpiryBlockHeight(R);if(s.lastValidBlockHeight=I.lastValidBlockHeight,s.recentBlockhash=I.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const k=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(k)&&!this._blockhashInfo.transactionSignatures.includes(k)){this._blockhashInfo.simulatedSignatures.push(k);break}else R=!0}}const o=s._compile(),c=o.serialize(),w=s._serialize(c).toString("base64"),S={encoding:"base64",commitment:this.commitment};if(n){const R=(Array.isArray(n)?n:o.nonProgramIds()).map(I=>I.toBase58());S.accounts={encoding:"base64",addresses:R}}i&&(S.sigVerify=!0);const _=[w,S],N=await this._rpcRequest("simulateTransaction",_),L=G(N,Fa);if("error"in L){let R;if("data"in L.error&&(R=L.error.data.logs,R&&Array.isArray(R))){const I=`
    `,k=I+R.join(I);console.error(L.error.message,k)}throw new La("failed to simulate transaction: "+L.error.message,R)}return L.result}async sendTransaction(t,e,n){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const c=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=c.lastValidBlockHeight,t.recentBlockhash=c.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const d=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(d))o=!0;else{this._blockhashInfo.transactionSignatures.push(d);break}}}const i=t.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(t,e){const n=qn(t).toString("base64");return await this.sendEncodedTransaction(n,e)}async sendEncodedTransaction(t,e){const n={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(n.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(n.minContextSlot=e.minContextSlot),s&&(n.skipPreflight=s),i&&(n.preflightCommitment=i);const o=[t,n],c=await this._rpcRequest("sendTransaction",o),d=G(c,td);if("error"in d){let w;throw"data"in d.error&&(w=d.error.data.logs),new La("failed to send transaction: "+d.error.message,w)}return d.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,n])=>{this._setSubscription(e,{...n,state:"pending"})})}_setSubscription(t,e){const n=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,n!==e.state){const s=this._subscriptionStateChangeCallbacksByHash[t];s&&s.forEach(i=>{try{i(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){const n=this._subscriptionHashByClientSubscriptionId[t];if(n==null)return()=>{};const s=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const s=this._subscriptionsByHash[n];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[n],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(n,{...s,state:"subscribing"});const c=await this._rpcWebSocket.call(o,i);this._setSubscription(n,{...s,serverSubscriptionId:c,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[c]=s.callbacks,await this._updateSubscriptions()}catch(c){if(c instanceof Error&&console.error(`${o} error for argument`,i,c.message),!e())return;this._setSubscription(n,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(n,{...s,state:"unsubscribing"}),this._setSubscription(n,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(c){if(c instanceof Error&&console.error(`${o} error:`,c.message),!e())return;this._setSubscription(n,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const n=this._subscriptionCallbacksByServerSubscriptionId[t];n!==void 0&&n.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:n}=G(t,Sl);this._handleServerNotification(n,[e.value,e.context])}_makeSubscription(t,e){const n=this._nextClientSubscriptionId++,s=Ra([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[n]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[s];Pt(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(t,e,n){const s=this._buildArgs([t.toBase58()],n||this._commitment||"finalized","base64");return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},s)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:n}=G(t,_l);this._handleServerNotification(n,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,n,s){const i=this._buildArgs([t.toBase58()],n||this._commitment||"finalized","base64",s?{filters:s}:void 0);return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,n){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],n||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:n}=G(t,nd);this._handleServerNotification(n,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:n}=G(t,Il);this._handleServerNotification(n,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:n}=G(t,Ml);this._handleServerNotification(n,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,n,s){const i=e||this._commitment;if(i||n||s){let o={};n&&(o.encoding=n),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,n,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,n,s)}_wsOnSignatureNotification(t){const{result:e,subscription:n}=G(t,Rl);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,n){const s=this._buildArgs([t],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,c)=>{if(o.type==="status"){e(o.result,c);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,n){const{commitment:s,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([t],s,void 0,i),c=this._makeSubscription({callback:(d,w)=>{e(d,w);try{this.removeSignatureListener(c)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return c}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:n}=G(t,Ll);this._handleServerNotification(n,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:Q([nt("instruction"),Hn("recentSlot"),Et("bumpSeed")])},FreezeLookupTable:{index:1,layout:Q([nt("instruction")])},ExtendLookupTable:{index:2,layout:Q([nt("instruction"),Hn(),ye(bt(),xn(nt(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Q([nt("instruction")])},CloseLookupTable:{index:4,layout:Q([nt("instruction")])}}),new at("AddressLookupTab1e1111111111111111111111111"),Object.freeze({RequestUnits:{index:0,layout:Q([Et("instruction"),nt("units"),nt("additionalFee")])},RequestHeapFrame:{index:1,layout:Q([Et("instruction"),nt("bytes")])},SetComputeUnitLimit:{index:2,layout:Q([Et("instruction"),nt("units")])},SetComputeUnitPrice:{index:3,layout:Q([Et("instruction"),Hn("microLamports")])}}),new at("ComputeBudget111111111111111111111111111111"),Q([Et("numSignatures"),Et("padding"),Pe("signatureOffset"),Pe("signatureInstructionIndex"),Pe("publicKeyOffset"),Pe("publicKeyInstructionIndex"),Pe("messageDataOffset"),Pe("messageDataSize"),Pe("messageInstructionIndex")]),new at("Ed25519SigVerify111111111111111111111111111"),Xi.utils.isValidPrivateKey,Xi.getPublicKey,Q([Et("numSignatures"),Pe("signatureOffset"),Et("signatureInstructionIndex"),Pe("ethAddressOffset"),Et("ethAddressInstructionIndex"),Pe("messageDataOffset"),Pe("messageDataSize"),Et("messageInstructionIndex"),Ct(20,"ethAddress"),Ct(64,"signature"),Et("recoveryId")]),new at("KeccakSecp256k11111111111111111111111111111");var Ga;new at("StakeConfig11111111111111111111111111111111");class Va{constructor(t,e,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=n}}Ga=Va,Va.default=new Ga(0,0,at.default),Object.freeze({Initialize:{index:0,layout:Q([nt("instruction"),Eh(),Sh()])},Authorize:{index:1,layout:Q([nt("instruction"),bt("newAuthorized"),nt("stakeAuthorizationType")])},Delegate:{index:2,layout:Q([nt("instruction")])},Split:{index:3,layout:Q([nt("instruction"),Te("lamports")])},Withdraw:{index:4,layout:Q([nt("instruction"),Te("lamports")])},Deactivate:{index:5,layout:Q([nt("instruction")])},Merge:{index:7,layout:Q([nt("instruction")])},AuthorizeWithSeed:{index:8,layout:Q([nt("instruction"),bt("newAuthorized"),nt("stakeAuthorizationType"),zn("authoritySeed"),bt("authorityOwner")])}}),Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),new at("Stake11111111111111111111111111111111111111"),Object.freeze({InitializeAccount:{index:0,layout:Q([nt("instruction"),Bh()])},Authorize:{index:1,layout:Q([nt("instruction"),bt("newAuthorized"),nt("voteAuthorizationType")])},Withdraw:{index:3,layout:Q([nt("instruction"),Te("lamports")])},UpdateValidatorIdentity:{index:4,layout:Q([nt("instruction")])},AuthorizeWithSeed:{index:10,layout:Q([nt("instruction"),_h()])}}),Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),new at("Vote111111111111111111111111111111111111111"),new at("Va1idator1nfo111111111111111111111111111111"),q({name:K(),website:ot(K()),details:ot(K()),keybaseUsername:ot(K())}),new at("Vote111111111111111111111111111111111111111"),Q([bt("nodePubkey"),bt("authorizedWithdrawer"),Et("commission"),ge(),ye(Q([ge("slot"),nt("confirmationCount")]),xn(nt(),-8),"votes"),Et("rootSlotValid"),ge("rootSlot"),ge(),ye(Q([ge("epoch"),bt("authorizedVoter")]),xn(nt(),-8),"authorizedVoters"),Q([ye(Q([bt("authorizedPubkey"),ge("epochOfLastAuthorizedSwitch"),ge("targetEpoch")]),32,"buf"),ge("idx"),Et("isEmpty")],"priorVoters"),ge(),ye(Q([ge("epoch"),ge("credits"),ge("prevCredits")]),xn(nt(),-8),"epochCredits"),Q([ge("slot"),ge("timestamp")],"lastTimestamp")]);var Za=(r,t,e)=>{if(!t.has(r))throw TypeError("Cannot "+e)},sd=(r,t,e)=>(Za(r,t,"read from private field"),e?e.call(r):t.get(r)),od=(r,t,e)=>{if(t.has(r))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(r):t.set(r,e)},ad=(r,t,e,n)=>(Za(r,t,"write to private field"),n?n.call(r,e):t.set(r,e),e),$r;function cd(r){const t=({register:e})=>e(r);try{window.dispatchEvent(new ud(t))}catch(e){console.error(`wallet-standard:register-wallet event could not be dispatched
`,e)}try{window.addEventListener("wallet-standard:app-ready",({detail:e})=>t(e))}catch(e){console.error(`wallet-standard:app-ready event listener could not be added
`,e)}}class ud extends Event{constructor(t){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),od(this,$r,void 0),ad(this,$r,t)}get detail(){return sd(this,$r)}get type(){return"wallet-standard:register-wallet"}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}$r=new WeakMap;function fd(r){cd(r.getInstanceWithAdapter())}const Ya="solana:signAndSendTransaction",hd="solana:signIn",Xa="solana:signMessage",Ja="solana:signTransaction",ld="standard:connect",dd="standard:disconnect",pd="standard:events",gd="solana:mainnet",us=[gd];function fs(r){return us.includes(r)}function Hr(r){return"version"in r}var Qa=(r,t,e)=>{if(!t.has(r))throw TypeError("Cannot "+e)},Wn=(r,t,e)=>(Qa(r,t,"read from private field"),e?e.call(r):t.get(r)),jn=(r,t,e)=>{if(t.has(r))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(r):t.set(r,e)},Gn=(r,t,e,n)=>(Qa(r,t,"write to private field"),n?n.call(r,e):t.set(r,e),e),Kr,Wr,jr,Gr,Vr,Zr;const md=us,yd=[Ya,Ja,Xa],tc=class{constructor({address:r,publicKey:t,label:e,icon:n}){jn(this,Kr,void 0),jn(this,Wr,void 0),jn(this,jr,void 0),jn(this,Gr,void 0),jn(this,Vr,void 0),jn(this,Zr,void 0),new.target===tc&&Object.freeze(this),Gn(this,Kr,r),Gn(this,Wr,t),Gn(this,jr,md),Gn(this,Gr,yd),Gn(this,Vr,e),Gn(this,Zr,n)}get address(){return Wn(this,Kr)}get publicKey(){return Wn(this,Wr).slice()}get chains(){return Wn(this,jr).slice()}get features(){return Wn(this,Gr).slice()}get label(){return Wn(this,Vr)}get icon(){return Wn(this,Zr)}};let wd=tc;Kr=new WeakMap,Wr=new WeakMap,jr=new WeakMap,Gr=new WeakMap,Vr=new WeakMap,Zr=new WeakMap;const bd="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTgiIGhlaWdodD0iNjUiIHZpZXdCb3g9IjAgMCA1OCA2NSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTAgOS4zODk0OUwyOC44OTA3IDBWNjUuMDA0MkM4LjI1NDUgNTYuMzM2OSAwIDM5LjcyNDggMCAzMC4zMzUzVjkuMzg5NDlaIiBmaWxsPSIjMDUwMEZGIi8+CjxwYXRoIGQ9Ik01Ny43ODIyIDkuMzg5NDlMMjguODkxNSAwVjY1LjAwNDJDNDkuNTI3NyA1Ni4zMzY5IDU3Ljc4MjIgMzkuNzI0OCA1Ny43ODIyIDMwLjMzNTNWOS4zODk0OVoiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl8yMjAxXzY5NDIpIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMjIwMV82OTQyIiB4MT0iNTEuMzYxNSIgeTE9Ii00LjE1MjkzIiB4Mj0iMjkuNTM4NCIgeTI9IjY0LjUxNDciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agb2Zmc2V0PSIwLjAyMTEyIiBzdG9wLWNvbG9yPSIjMDAwMEZGIi8+CjxzdG9wIG9mZnNldD0iMC4wNzYyNDIzIiBzdG9wLWNvbG9yPSIjMDA5NEZGIi8+CjxzdG9wIG9mZnNldD0iMC4xNjMwODkiIHN0b3AtY29sb3I9IiM0OEZGOTEiLz4KPHN0b3Agb2Zmc2V0PSIwLjQyMDA0OSIgc3RvcC1jb2xvcj0iIzAwOTRGRiIvPgo8c3RvcCBvZmZzZXQ9IjAuNjgyODg2IiBzdG9wLWNvbG9yPSIjMDAzOEZGIi8+CjxzdG9wIG9mZnNldD0iMC45MDI0NjUiIHN0b3AtY29sb3I9IiMwNTAwRkYiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4K";function vd(r,t){return xd(r,t)}function xd(r,t){if(r===t)return!0;const e=r.length;if(e!==t.length)return!1;for(let n=0;n<e;n++)if(r[n]!==t[n])return!1;return!0}var hs=(r,t,e)=>{if(!t.has(r))throw TypeError("Cannot "+e)},ct=(r,t,e)=>(hs(r,t,"read from private field"),e?e.call(r):t.get(r)),de=(r,t,e)=>{if(t.has(r))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(r):t.set(r,e)},ls=(r,t,e,n)=>(hs(r,t,"write to private field"),n?n.call(r,e):t.set(r,e),e),ds=(r,t,e)=>(hs(r,t,"access private method"),e),An,ps,gs,ms,Ee,Ae,ys,Yr,ws,bs,ec,Vn,Xr,vs,xs,Es,Jr,Ss,Qr,Bs;const Ed="trust:",nc=class{constructor(r){de(this,Yr),de(this,bs),de(this,An,{}),de(this,ps,"1.0.0"),de(this,gs,"Trust"),de(this,ms,bd),de(this,Ee,null),de(this,Ae,void 0),de(this,ys,(t,e)=>{var n;return(n=ct(this,An)[t])!=null&&n.push(e)||(ct(this,An)[t]=[e]),()=>ds(this,bs,ec).call(this,t,e)}),de(this,Vn,()=>{var t;const e=(t=ct(this,Ae).publicKey)==null?void 0:t.toBase58();if(e){const n=ct(this,Ae).publicKey.toBytes(),s=ct(this,Ee);(!s||s.address!==e||!vd(s.publicKey,n))&&(ls(this,Ee,new wd({address:e,publicKey:n})),ds(this,Yr,ws).call(this,"change",{accounts:this.accounts}))}}),de(this,Xr,()=>{ct(this,Ee)&&(ls(this,Ee,null),ds(this,Yr,ws).call(this,"change",{accounts:this.accounts}))}),de(this,vs,()=>{ct(this,Ae).publicKey?ct(this,Vn).call(this):ct(this,Xr).call(this)}),de(this,xs,async({silent:t}={})=>(ct(this,Ee)||await ct(this,Ae).connect(t?{onlyIfTrusted:!0}:void 0),ct(this,Vn).call(this),{accounts:this.accounts})),de(this,Es,async()=>{await ct(this,Ae).disconnect()}),de(this,Jr,async(...t)=>{if(!ct(this,Ee))throw new Error("not connected");const e=[];if(t.length===1){const{transaction:n,account:s,chain:i,options:o}=t[0],{minContextSlot:c,preflightCommitment:d,skipPreflight:w,maxRetries:S}=o||{};if(s!==ct(this,Ee))throw new Error("invalid account");if(!fs(i))throw new Error("invalid chain");const{signature:_}=await ct(this,Ae).signAndSendTransaction(ar.deserialize(n),{preflightCommitment:d,minContextSlot:c,maxRetries:S,skipPreflight:w});e.push({signature:jt.decode(_)})}else if(t.length>1)for(const n of t)e.push(...await ct(this,Jr).call(this,n));return e}),de(this,Ss,async(...t)=>{if(!ct(this,Ee))throw new Error("not connected");const e=[];if(t.length===1){const{transaction:n,account:s,chain:i}=t[0];if(s!==ct(this,Ee))throw new Error("invalid account");if(i&&!fs(i))throw new Error("invalid chain");const o=await ct(this,Ae).signTransaction(ar.deserialize(n)),c=Hr(o)?o.serialize():new Uint8Array(o.serialize({requireAllSignatures:!1,verifySignatures:!1}));e.push({signedTransaction:c})}else if(t.length>1){let n;for(const o of t){if(o.account!==ct(this,Ee))throw new Error("invalid account");if(o.chain){if(!fs(o.chain))throw new Error("invalid chain");if(n){if(o.chain!==n)throw new Error("conflicting chain")}else n=o.chain}}const s=t.map(({transaction:o})=>ar.deserialize(o)),i=await ct(this,Ae).signAllTransactions(s);e.push(...i.map(o=>({signedTransaction:Hr(o)?o.serialize():new Uint8Array(o.serialize({requireAllSignatures:!1,verifySignatures:!1}))})))}return e}),de(this,Qr,async(...t)=>{if(!ct(this,Ee))throw new Error("not connected");const e=[];if(t.length===1){const{message:n,account:s}=t[0];if(s!==ct(this,Ee))throw new Error("invalid account");const{signature:i}=await ct(this,Ae).signMessage(n);e.push({signedMessage:n,signature:i})}else if(t.length>1)for(const n of t)e.push(...await ct(this,Qr).call(this,n));return e}),de(this,Bs,async(...t)=>{const e=[];if(t.length>1)for(const n of t)e.push(await ct(this,Ae).signIn(n));else return[await ct(this,Ae).signIn(t[0])];return e}),new.target===nc&&Object.freeze(this),ls(this,Ae,r),r.on("connect",ct(this,Vn),this),r.on("disconnect",ct(this,Xr),this),r.on("accountChanged",ct(this,vs),this),ct(this,Vn).call(this)}get version(){return ct(this,ps)}get name(){return ct(this,gs)}get icon(){return ct(this,ms)}get chains(){return us.slice()}get features(){return{[ld]:{version:"1.0.0",connect:ct(this,xs)},[dd]:{version:"1.0.0",disconnect:ct(this,Es)},[pd]:{version:"1.0.0",on:ct(this,ys)},[Ya]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:ct(this,Jr)},[Ja]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:ct(this,Ss)},[Xa]:{version:"1.0.0",signMessage:ct(this,Qr)},[hd]:{version:"1.0.0",signIn:ct(this,Bs)},[Ed]:{trust:ct(this,Ae)}}}get accounts(){return ct(this,Ee)?[ct(this,Ee)]:[]}};let Sd=nc;An=new WeakMap,ps=new WeakMap,gs=new WeakMap,ms=new WeakMap,Ee=new WeakMap,Ae=new WeakMap,ys=new WeakMap,Yr=new WeakSet,ws=function(r,...t){var e;(e=ct(this,An)[r])==null||e.forEach(n=>n.apply(null,t))},bs=new WeakSet,ec=function(r,t){var e;ct(this,An)[r]=(e=ct(this,An)[r])==null?void 0:e.filter(n=>t!==n)},Vn=new WeakMap,Xr=new WeakMap,vs=new WeakMap,xs=new WeakMap,Es=new WeakMap,Jr=new WeakMap,Ss=new WeakMap,Qr=new WeakMap,Bs=new WeakMap;class Bd{constructor(t,e=!1){this.useLegacySign=!1,this.provider=t,this.useLegacySign=e}async connect(t){const e=await this.provider.internalRequest({method:"requestAccounts",params:{options:t}});return this.provider.emit("connect"),{publicKey:new at(e[0])}}async signTransaction(t){if(this.useLegacySign)return await this.legacySign(t);const e=JSON.stringify(t);let n="legacy",s;Hr(t)?(n=t.version,s=Buffer.from(t.message.serialize()).toString("base64")):s=Buffer.from(t.serializeMessage()).toString("base64");const i=Buffer.from(t.serialize({requireAllSignatures:!1,verifySignatures:!1})).toString("base64"),o=await this.provider.internalRequest({method:"signRawTransaction",params:{data:e,raw:i,rawMessage:s,version:n}});return this.provider.mapSignedTransaction(t,o)}async legacySign(t){const e=JSON.stringify(t),n=typeof t.version!="number"?"legacy":t.version,s=jt.encode(n==="legacy"?t.serializeMessage():n===0?t.message.serialize():t.serialize());try{const i=await this.provider.internalRequest({method:"signRawTransaction",params:{data:e,raw:s,version:n}});return this.provider.mapSignedTransaction(t,i)}catch(i){console.log(`<== Error: ${i}`)}}async request(t,e){var n;switch(t.method){case"signTransaction":return this.signTransaction(t.params);case"connect":return this.connect((n=t?.params)==null?void 0:n.options)}return e()}}var _s=(r,t,e)=>{if(!t.has(r))throw TypeError("Cannot "+e)},As=(r,t,e)=>(_s(r,t,"read from private field"),e?e.call(r):t.get(r)),ti=(r,t,e)=>{if(t.has(r))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(r):t.set(r,e)},Is=(r,t,e,n)=>(_s(r,t,"write to private field"),n?n.call(r,e):t.set(r,e),e),ei=(r,t,e)=>(_s(r,t,"access private method"),e),ni,ri,ii,Zn,hr;const si=class extends wc{constructor(r){super(),ti(this,Zn),ti(this,ni,!1),ti(this,ri,!0),this.isFlowWallet=!0,ti(this,ii,!1),r&&(typeof r.enableAdapter<"u"&&Is(this,ri,r.enableAdapter),typeof r.cluster<"u"&&(this.connection=new id(r.cluster,"confirmed")),typeof r.disableMobileAdapter<"u"&&Is(this,ni,r.disableMobileAdapter),typeof r.useLegacySign<"u"&&Is(this,ii,r.useLegacySign),typeof r.isFlowWallet<"u"&&(this.isFlowWallet=r.isFlowWallet)),As(this,ri)&&fd(this),As(this,ni)||(this.mobileAdapter=new Bd(this,As(this,ii)))}static bufferToHex(r){return"0x"+Buffer.from(r).toString("hex")}static messageToBuffer(r){let t=Buffer.from([]);try{typeof r=="string"?t=Buffer.from(r.replace("0x",""),"hex"):t=Buffer.from(r)}catch(e){console.log(`messageToBuffer error: ${e}`)}return t}getInstanceWithAdapter(){return new Sd(this)}async connect(r){const t=await ei(this,Zn,hr).call(this,{method:"connect",params:{options:r}});return this.publicKey=t.publicKey,t}disconnect(){return new Promise(r=>{this.publicKey=null,this.emit("disconnect"),r()})}async signAndSendTransaction(r,t){const e=await this.signTransaction(r);return{signature:await this.connection.sendRawTransaction(e.serialize(),t)}}signTransaction(r){return ei(this,Zn,hr).call(this,{method:"signTransaction",params:r})}signAllTransactions(r){return Promise.all(r.map(t=>this.signTransaction(t)))}async signRawTransactionMulti(r){return(await ei(this,Zn,hr).call(this,{method:"signRawTransactionMulti",params:{transactions:r.map(t=>{const e=JSON.stringify(t);let n="legacy",s;Hr(t)?(n=t.version,s=Buffer.from(t.message.serialize()).toString("base64")):s=Buffer.from(t.serializeMessage()).toString("base64");const i=Buffer.from(t.serialize({requireAllSignatures:!1,verifySignatures:!1})).toString("base64");return{data:e,raw:i,rawMessage:s,version:n}})}})).map((t,e)=>this.mapSignedTransaction(r[e],t))}async signMessage(r){var t;const e=si.bufferToHex(r),n=await ei(this,Zn,hr).call(this,{method:"signMessage",params:{data:e}});return{signature:Buffer.from(si.messageToBuffer(n).buffer),publicKey:(t=this.publicKey)==null?void 0:t.toBase58()}}signIn(r){throw new Error("Method not implemented.")}getNetwork(){return si.NETWORK}mapSignedTransaction(r,t){return r.addSignature(this.publicKey,jt.decode(t)),r}request(r){throw new Error("Not implemented")}internalRequest(r){return super.request(r)}};let rc=si;ni=new WeakMap,ri=new WeakMap,ii=new WeakMap,Zn=new WeakSet,hr=function(r){const t=()=>this.internalRequest(r);return this.mobileAdapter?this.mobileAdapter.request(r,t):t()},rc.NETWORK="solana",In.SolanaProvider=rc,Object.defineProperty(In,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
